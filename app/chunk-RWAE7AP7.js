import{b as wt,c as S}from"./chunk-GXPB5I4C.js";import{a as ht}from"./chunk-D2H555EG.js";import{a as _t}from"./chunk-QWYAXZZX.js";import{b as _}from"./chunk-WNZFLLQC.js";import{d as U,g as M,h as mt,k as q,n as h,s as pt,t as ft,v as C,x as ut}from"./chunk-DVBPCEX4.js";import{A as ct,i as dt}from"./chunk-RYYQAFJB.js";import{B as v,Ba as O,Ca as I,Eb as X,F as D,Fb as tt,H as E,Ma as W,Nd as N,O as $,Sb as et,Sd as lt,Tb as it,_ as l,a as b,aa as u,b as R,ba as Y,be as L,cd as P,ec as st,fc as nt,gd as B,h as c,ha as d,hc as ot,ic as rt,jc as at,lb as V,ma as o,mb as J,o as G,pa as A,pc as z,qc as k,t as y,ub as x,xa as w,ya as H}from"./chunk-CHBP6U4G.js";var Wt=(()=>{class s extends _t{constructor(){let t=o(dt),e=o(ct);super(t,e,S,"Subscriptions")}getSubscriptionIdsByStudentAndCourse(t,e){return this.http.get(`${this.baseUrl}/`,{params:{"filter.PersonId":`=${t}`,"filter.EventId":`;${e}`}}).pipe(l(_(L)),y(i=>i.map(n=>n.Id)))}getSubscriptionIdsByEventAndStudents(t,e){return this.http.get(`${this.baseUrl}/`,{params:{"filter.EventId":`=${t}`,"filter.PersonId":`;${e}`}}).pipe(l(_(L)),y(i=>i.map(n=>n.Id)))}getSubscriptionsByStudent(t){return this.http.get(`${this.baseUrl}/`,{params:{"filter.PersonId":`=${t}`}}).pipe(l(_(S)))}getSubscriptionCountsByEvents(t){return this.http.get(`${this.baseUrl}/`,{params:{"filter.EventId":`;${t.join(";")}`,fields:["Id","EventId"].join(",")}}).pipe(l(_(lt({Id:N,EventId:N}))),y(e=>e.reduce((i,n)=>(i[n.EventId]=i[n.EventId]?i[n.EventId]+1:1,i),{})))}getSubscriptionsByCourse(t,e){return this.http.get(`${this.baseUrl}/`,{params:R(b({"filter.EventId":`=${t}`},e),{fields:["Id","EventId","EventDesignation","PersonId","Status","StatusId","RegistrationDate"].join(",")})}).pipe(l(_(S)))}getSubscriptionDetailsById(t){return this.http.get(`${this.baseUrl}/${t}/SubscriptionDetails`).pipe(l(_(wt)))}static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275prov=d({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var vt=["dialog"],Ct=["*"],Rt=(()=>{class s{constructor(){this._ngbConfig=o(ht),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0,this.role="dialog"}get animation(){return this._animation??this._ngbConfig.animation}set animation(t){this._animation=t}static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275prov=d({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),yt=["animation","backdropClass"],Et=(()=>{class s{constructor(){this._nativeElement=o(W).nativeElement,this._zone=o(I),this._injector=o(w),this._cdRef=o(P)}ngOnInit(){V({mixedReadWrite:()=>h(this._zone,this._nativeElement,(t,e)=>{e&&q(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})},{injector:this._injector})}hide(){return h(this._zone,this._nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}updateOptions(t){yt.forEach(e=>{M(t[e])&&(this[e]=t[e])}),this._cdRef.markForCheck()}static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275cmp=x({type:s,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(e,i){e&2&&(k("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),z("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,i){},encapsulation:2})}}return s})(),T=class{update(r){}close(r){}dismiss(r){}},Q=class{update(r){this._windowCmptRef.instance.updateOptions(r),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._backdropCmptRef.instance.updateOptions(r)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(u(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(u(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(r,t,e,i){this._windowCmptRef=r,this._contentRef=t,this._backdropCmptRef=e,this._beforeDismiss=i,this._closed=new c,this._dismissed=new c,this._hidden=new c,r.instance.dismissEvent.subscribe(n=>{this.dismiss(n)}),this.result=new Promise((n,a)=>{this._resolve=n,this._reject=a}),this.result.then(null,()=>{})}close(r){this._windowCmptRef&&(this._closed.next(r),this._resolve(r),this._removeModalElements())}_dismiss(r){this._dismissed.next(r),this._reject(r),this._removeModalElements()}dismiss(r){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(r);else{let t=this._beforeDismiss();mt(t)?t.then(e=>{e!==!1&&this._dismiss(r)},()=>{}):t!==!1&&this._dismiss(r)}}_removeModalElements(){let r=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():G(void 0);r.subscribe(()=>{let{nativeElement:e}=this._windowCmptRef.location;e.parentNode.removeChild(e),this._windowCmptRef.destroy(),this._contentRef?.viewRef?.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:e}=this._backdropCmptRef.location;e.parentNode.removeChild(e),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),E(r,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},Z=(function(s){return s[s.BACKDROP_CLICK=0]="BACKDROP_CLICK",s[s.ESC=1]="ESC",s})(Z||{}),It=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","role","scrollable","size","windowClass","modalDialogClass"],kt=(()=>{class s{constructor(){this._document=o(H),this._elRef=o(W),this._zone=o(I),this._injector=o(w),this._cdRef=o(P),this._closed$=new c,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.role="dialog",this.dismissEvent=new O,this.shown=new c,this.hidden=new c}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":U(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,V({mixedReadWrite:()=>this._show()},{injector:this._injector})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:t}=this._elRef,e={animation:this.animation,runningTransition:"stop"},i=h(this._zone,t,()=>t.classList.remove("show"),e),n=h(this._zone,this._dialogEl.nativeElement,()=>{},e),a=E(i,n);return a.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),a}updateOptions(t){It.forEach(e=>{M(t[e])&&(this[e]=t[e])}),this._cdRef.markForCheck()}_show(){let t={animation:this.animation,runningTransition:"continue"},e=h(this._zone,this._elRef.nativeElement,(n,a)=>{a&&q(n),n.classList.add("show")},t),i=h(this._zone,this._dialogEl.nativeElement,()=>{},t);E(e,i).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{v(t,"keydown").pipe(u(this._closed$),D(i=>i.key==="Escape")).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(Z.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let e=!1;v(this._dialogEl.nativeElement,"mousedown").pipe(u(this._closed$),Y(()=>e=!1),l(()=>v(t,"mouseup").pipe(u(this._closed$),$(1))),D(({target:i})=>t===i)).subscribe(()=>{e=!0}),v(t,"click").pipe(u(this._closed$)).subscribe(({target:i})=>{t===i&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!e&&this._zone.run(()=>this.dismiss(Z.BACKDROP_CLICK))),e=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){let e=t.querySelector("[ngbAutofocus]"),i=pt(t)[0];(e||i||t).focus()}}_restoreFocus(){let t=this._document.body,e=this._elWithFocus,i;e&&e.focus&&t.contains(e)?i=e:i=t,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&h(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275cmp=x({type:s,selectors:[["ngb-modal-window"]],viewQuery:function(e,i){if(e&1&&ot(vt,7),e&2){let n;rt(n=at())&&(i._dialogEl=n.first)}},hostAttrs:["tabindex","-1"],hostVars:8,hostBindings:function(e,i){e&2&&(tt("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy)("role",i.role),k("modal d-block"+(i.windowClass?" "+i.windowClass:"")),z("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",role:"role",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:Ct,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(e,i){e&1&&(st(),et(0,"div",1,0)(2,"div",2),nt(3),it()()),e&2&&k("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+i.fullscreenClass+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2})}}return s})(),Bt=(()=>{class s{constructor(){this._applicationRef=o(X),this._injector=o(w),this._environmentInjector=o(A),this._document=o(H),this._scrollBar=o(ut),this._activeWindowCmptHasChanged=new c,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new O;let t=o(I);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let e=this._windowCmpts[this._windowCmpts.length-1];ft(t,e.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(e.location.nativeElement)}})}_restoreScrollBar(){let t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,e,i){let n=i.container instanceof HTMLElement?i.container:M(i.container)?this._document.querySelector(i.container):this._document.body;if(!n)throw new Error(`The specified modal container "${i.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let a=new T;t=i.injector||t;let j=t.get(A,null)||this._environmentInjector,m=this._getContentRef(t,j,e,a,i),p=i.backdrop!==!1?this._attachBackdrop(n):void 0,F=this._attachWindowComponent(n,m.nodes),f=new Q(F,m,p,i.beforeDismiss);return this._registerModalRef(f),this._registerWindowCmpt(F),f.hidden.pipe($(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),a.close=g=>{f.close(g)},a.dismiss=g=>{f.dismiss(g)},a.update=g=>{f.update(g)},f.update(i),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),p&&p.instance&&p.changeDetectorRef.detectChanges(),F.changeDetectorRef.detectChanges(),f}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(e=>e.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t){let e=B(Et,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(e.hostView),t.appendChild(e.location.nativeElement),e}_attachWindowComponent(t,e){let i=B(kt,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:e});return this._applicationRef.attachView(i.hostView),t.appendChild(i.location.nativeElement),i}_getContentRef(t,e,i,n,a){return i?i instanceof J?this._createFromTemplateRef(i,n):U(i)?this._createFromString(i):this._createFromComponent(t,e,i,n,a):new C([])}_createFromTemplateRef(t,e){let i={$implicit:e,close(a){e.close(a)},dismiss(a){e.dismiss(a)}},n=t.createEmbeddedView(i);return this._applicationRef.attachView(n),new C([n.rootNodes],n)}_createFromString(t){let e=this._document.createTextNode(`${t}`);return new C([[e]])}_createFromComponent(t,e,i,n,a){let j=w.create({providers:[{provide:T,useValue:n}],parent:t}),m=B(i,{environmentInjector:e,elementInjector:j}),p=m.location.nativeElement;return a.scrollable&&p.classList.add("component-host-scrollable"),this._applicationRef.attachView(m.hostView),new C([[p]],m.hostView,m)}_setAriaHidden(t){let e=t.parentElement;e&&t!==this._document.body&&(Array.from(e.children).forEach(i=>{i!==t&&i.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(e))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,e)=>{t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){let e=()=>{let i=this._modalRefs.indexOf(t);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(e,e)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{let e=this._windowCmpts.indexOf(t);e>-1&&(this._windowCmpts.splice(e,1),this._activeWindowCmptHasChanged.next())})}static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275prov=d({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),gt=(()=>{class s{constructor(){this._injector=o(w),this._modalStack=o(Bt),this._config=o(Rt)}open(t,e={}){let i=b(R(b({},this._config),{animation:this._config.animation}),e);return this._modalStack.open(this._injector,t,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275prov=d({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var bt=(()=>{class s{constructor(){}get inIframe(){return window.parent!==window}get window(){return this.inIframe?window.parent:null}get document(){return this.window?.document.documentElement??null}querySelector(t){return this.window?.document?.querySelector("bkd-portal")?.shadowRoot?.querySelector(t)??null}getIframeElement(){return this.querySelector("bkd-content")?.shadowRoot?.querySelector("iframe")??null}getIframeTop(){return this.getIframeElement()?.offsetTop??0}getIFrameBottom(){let t=this.getIframeElement();return t?t.offsetTop+t.offsetHeight:0}static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275prov=d({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var de=(()=>{class s{constructor(){this.modal=o(gt),this.portal=o(bt)}open(...t){let e=this.modal.open(...t);return this.applyPortalOffsetAndMaxHeight(e),this.disablePortalScrolling(e),e}get activeInstances(){return this.modal.activeInstances}dismissAll(...t){return this.modal.dismissAll(...t)}hasOpenModals(...t){return this.modal.hasOpenModals(...t)}applyPortalOffsetAndMaxHeight(t){let e=this.getModalWindowElement(t);if(!e){console.warn("Trying to apply portal offset to <ngb-modal-window>, but element is not present!");return}this.portal.window&&(e.style.top=`${this.getModalIframeOffset()}px`,e.style.maxHeight=`${this.getModalHeight()}px`)}disablePortalScrolling(t){if(this.portal.window&&this.portal.document){let e=this.portal.window.innerWidth-this.portal.document.clientWidth;this.portal.document.style.paddingRight=`${e}px`,this.portal.document.style.overflow="hidden"}t.hidden.subscribe(()=>{this.portal.document&&(this.portal.document.style.paddingRight="0px",this.portal.document.style.overflow="auto")})}getModalWindowElement(t){return t._windowCmptRef?.instance?._elRef?.nativeElement??null}getModalIframeOffset(){return Math.max(this.getViewportTop()-this.portal.getIframeTop(),0)}getModalTop(){return Math.min(this.getViewportTop(),this.portal.getIframeTop())}getModalBottom(){return Math.min(this.getViewportBottom(),this.portal.getIFrameBottom())}getModalHeight(){return this.getModalBottom()-this.getModalTop()}getViewportTop(){return this.portal.window?.scrollY??0}getViewportBottom(){return this.getViewportTop()+this.getViewportHeight()}getViewportHeight(){return this.portal.window?.innerHeight??0}static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275prov=d({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();export{T as a,Wt as b,bt as c,de as d};
