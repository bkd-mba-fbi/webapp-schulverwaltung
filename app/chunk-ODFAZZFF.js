import{b as y,c as h}from"./chunk-KG7WGTAP.js";import{a as b}from"./chunk-H3RI53QQ.js";import{b as l}from"./chunk-KOTWO6JI.js";import{s as I}from"./chunk-Q6TACXIT.js";import{h as f,z as w}from"./chunk-LGTM5FIB.js";import{Dd as g,Od as m,a as c,b as u,ba as n,ja as s,pa as a,v as p,yd as d}from"./chunk-GUP4UHKK.js";var V=(()=>{class r extends b{constructor(){let t=a(f),e=a(w);super(t,e,h,"Subscriptions")}getSubscriptionIdsByStudentAndCourse(t,e){return this.http.get(`${this.baseUrl}/`,{params:{"filter.PersonId":`=${t}`,"filter.EventId":`;${e}`}}).pipe(n(l(m)),p(o=>o.map(i=>i.Id)))}getSubscriptionIdsByEventAndStudents(t,e){return this.http.get(`${this.baseUrl}/`,{params:{"filter.EventId":`=${t}`,"filter.PersonId":`;${e}`}}).pipe(n(l(m)),p(o=>o.map(i=>i.Id)))}getSubscriptionCountsByEvents(t){return this.http.get(`${this.baseUrl}/`,{params:{"filter.EventId":`;${t.join(";")}`,fields:["Id","EventId"].join(",")}}).pipe(n(l(g({Id:d,EventId:d}))),p(e=>e.reduce((o,i)=>(o[i.EventId]=o[i.EventId]?o[i.EventId]+1:1,o),{})))}getSubscriptionsByCourse(t,e){return this.http.get(`${this.baseUrl}/`,{params:u(c({"filter.EventId":`=${t}`},e),{fields:["Id","EventId","EventDesignation","PersonId","Status","RegistrationDate"].join(",")})}).pipe(n(l(h)))}getSubscriptionDetailsById(t){return this.http.get(`${this.baseUrl}/${t}/SubscriptionDetails`).pipe(n(l(y)))}static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275prov=s({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var S=(()=>{class r{constructor(){}get inIframe(){return window.parent!==window}get window(){return this.inIframe?window.parent:null}get document(){return this.window?.document.documentElement??null}querySelector(t){return this.window?.document?.querySelector("bkd-portal")?.shadowRoot?.querySelector(t)??null}getIframeElement(){return this.querySelector("bkd-content")?.shadowRoot?.querySelector("iframe")??null}getIframeTop(){return this.getIframeElement()?.offsetTop??0}getIFrameBottom(){let t=this.getIframeElement();return t?t.offsetTop+t.offsetHeight:0}static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275prov=s({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var F=(()=>{class r{constructor(){this.modal=a(I),this.portal=a(S)}open(...t){let e=this.modal.open(...t);return this.applyPortalOffsetAndMaxHeight(e),this.disablePortalScrolling(e),e}get activeInstances(){return this.modal.activeInstances}dismissAll(...t){return this.modal.dismissAll(...t)}hasOpenModals(...t){return this.modal.hasOpenModals(...t)}applyPortalOffsetAndMaxHeight(t){let e=this.getModalWindowElement(t);if(!e){console.warn("Trying to apply portal offset to <ngb-modal-window>, but element is not present!");return}this.portal.window&&(e.style.top=`${this.getModalIframeOffset()}px`,e.style.maxHeight=`${this.getModalHeight()}px`)}disablePortalScrolling(t){if(this.portal.window&&this.portal.document){let e=this.portal.window.innerWidth-this.portal.document.clientWidth;this.portal.document.style.paddingRight=`${e}px`,this.portal.document.style.overflow="hidden"}t.hidden.subscribe(()=>{this.portal.document&&(this.portal.document.style.paddingRight="0px",this.portal.document.style.overflow="auto")})}getModalWindowElement(t){return t._windowCmptRef?.instance?._elRef?.nativeElement??null}getModalIframeOffset(){return Math.max(this.getViewportTop()-this.portal.getIframeTop(),0)}getModalTop(){return Math.max(this.getViewportTop(),this.portal.getIframeTop())}getModalBottom(){return Math.min(this.getViewportBottom(),this.portal.getIFrameBottom())}getModalHeight(){return this.getModalBottom()-this.getModalTop()}getViewportTop(){return this.portal.window?.scrollY??0}getViewportBottom(){return this.getViewportTop()+this.getViewportHeight()}getViewportHeight(){return this.portal.window?.innerHeight??0}static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275prov=s({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();export{V as a,S as b,F as c};
