import{v as B,z as H}from"./chunk-D6XKSBCP.js";import{$a as o,Ad as V,D as _,Ga as O,H as u,J as h,Jb as l,Kb as p,Kd as N,Na as g,P as T,Pa as S,Pd as D,Qa as f,Va as y,_a as a,cc as P,da as I,ea as M,eb as $,fa as E,fd as k,g as m,gb as C,hb as x,id as w,md as F,n as c,rb as d,x as v,ya as r}from"./chunk-SFIM5H6S.js";function z(n,s){if(n&1){let e=$();a(0,"button",6),C("click",function(t){M(e);let b=x();return E(b.modelChange(t))}),a(1,"i",2),d(2,"clear"),o()()}}function L(n,s){n&1&&(a(0,"div",5)(1,"div",7)(2,"span",8),d(3,"Loading..."),o()()())}var A=300,j=3,ne=(()=>{class n{constructor(){this.selectedItem$=new m(null),this.placeholder="shared.typeahead.default-placeholder",this.valueChange=this.selectedItem$.pipe(c(e=>e?e.Key:null),u()),this.componentId=N("bkd-typeahead-"),this.loading$=new m(!1),this.search=e=>e.pipe(q(j,A),T(this.fetchItems.bind(this)))}ngOnChanges(e){e.value&&e.value.currentValue&&e.value.currentValue!==this.selectedItemKey&&this.fetchItem(e.value.currentValue).subscribe(i=>{this.modelChange(i)})}format(e){return e.Value}modelChange(e){this.selectedItem$.next(e instanceof Object?e:null)}get selectedItemKey(){return this.selectedItem$.value?this.selectedItem$.value.Key:null}fetchItems(e){return this.loading$.next(!0),this.typeaheadService.getTypeaheadItems(e,this.additionalHttpParams).pipe(h(()=>this.loading$.next(!1)))}fetchItem(e){return this.loading$.next(!0),this.typeaheadService.getTypeaheadItemByKey(e).pipe(h(()=>this.loading$.next(!1)))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=O({type:n,selectors:[["bkd-typeahead"]],inputs:{typeaheadService:"typeaheadService",placeholder:"placeholder",value:"value",additionalHttpParams:"additionalHttpParams"},outputs:{valueChange:"valueChange"},features:[I],decls:11,vars:18,consts:[[1,"input-group"],[1,"input-group-text",3,"id"],[1,"material-icons"],["type","text",1,"form-control",3,"ngModelChange","ngbTypeahead","inputFormatter","resultFormatter","ngModel"],["type","button",1,"btn","btn-link","text-decoration-none"],[1,"spinner-container"],["type","button",1,"btn","btn-link","text-decoration-none",3,"click"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"visually-hidden"]],template:function(i,t){i&1&&(a(0,"div",0)(1,"span",1)(2,"i",2),d(3,"search"),o()(),a(4,"input",3),l(5,"async"),l(6,"translate"),l(7,"translate"),C("ngModelChange",function(K){return t.modelChange(K)}),o(),g(8,z,3,0,"button",4),o(),g(9,L,4,0,"div",5),l(10,"async")),i&2&&(r(),f("id",t.componentId),r(3),f("ngbTypeahead",t.search)("inputFormatter",t.format)("resultFormatter",t.format)("ngModel",p(5,10,t.selectedItem$)),S("placeholder",p(6,12,t.placeholder))("aria-label",p(7,14,t.placeholder))("aria-describedby",t.componentId),r(4),y(t.value?8:-1),r(),y(p(10,16,t.loading$)?9:-1))},dependencies:[B,V,k,w,F,P,D],styles:["[_nghost-%COMP%]{display:block;position:relative;background:#fff}.spinner-container[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;right:.75rem;display:flex;align-items:center;z-index:1001}.spinner-border[_ngcontent-%COMP%]{color:#6c757d}input[_ngcontent-%COMP%]{padding-right:2.5em}.input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{position:absolute;right:0;z-index:5}"],changeDetection:0})}}return n})();function q(n,s){return e=>e.pipe(_(s),c(U),u(),v(H(n)))}function U(n){return n.trim().toLowerCase()}export{ne as a};
