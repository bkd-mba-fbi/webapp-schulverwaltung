import{c as f}from"./chunk-SH3IV7KW.js";import{C as a,z as r}from"./chunk-3RYIB53E.js";import{j as o}from"./chunk-NL5E3FC5.js";function d(t,e){return+o(t)<+o(e)}function p(t,e,n){let s=+o(t,n?.in),[i,m]=[+o(e.start,n?.in),+o(e.end,n?.in)].sort((l,L)=>l-L);return s>=i&&s<=m}function T(t,e){return t===null&&e===null||t!==null&&e!==null&&t.TeacherInformation===e.TeacherInformation&&t.LessonDateTimeFrom.getTime()===e.LessonDateTimeFrom.getTime()&&t.LessonDateTimeTo.getTime()===e.LessonDateTimeTo.getTime()}function h(t){let e=new u(t.TeacherInformation,t.LessonDateTimeFrom,t.LessonDateTimeTo);return e.addLesson(t),e}var u=class{constructor(e,n,s){this.TeacherInformation=e,this.LessonDateTimeFrom=n,this.LessonDateTimeTo=s,this.lessons=[]}addLesson(e){this.lessons.some(n=>r(n,e))||(this.lessons.push(e),this.updateId(),this.updateStudyClassNumbers(),this.updateEventDesignations())}getIds(){return[...new Set(this.lessons.map(e=>e.LessonRef.Id))]}getEventIds(){return[...new Set(this.lessons.map(e=>e.EventRef.Id))]}updateId(){this.id=[...new Set(this.lessons.map(e=>e.LessonRef.Id).sort())].join("-")}updateStudyClassNumbers(){this.studyClassNumbers=[...new Set(this.lessons.map(e=>e.StudyClassNumber).sort((e,n)=>e.localeCompare(n)))].join(", ")}updateEventDesignations(){this.eventDesignations=[...new Set(this.lessons.map(e=>e.EventDesignation).sort())].join(", ")}};function v(t){return c(t).reduce((e,n)=>{let s=e.find(m=>T(m,n));if(s)return s.addLesson(n),e;let i=h(n);return[...e,i]},[]).sort(a)}function C(t){if(t.length===0)return null;let e=new Date;if(t=[...t].sort(a),f(e,t[0].LessonDateTimeFrom)){for(let n of t)if(d(e,n.LessonDateTimeFrom)||p(e,{start:n.LessonDateTimeFrom,end:n.LessonDateTimeTo}))return n;return t[t.length-1]}return t[0]}function c(t){return t.reduce((e,n)=>e.some(s=>r(s,n))?e:[...e,n],[])}export{v as a,C as b,c};
