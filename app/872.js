"use strict";(self.webpackChunkwebapp_schulverwaltung=self.webpackChunkwebapp_schulverwaltung||[]).push([[872],{2357:(j,$,n)=>{n.r($),n.d($,{OPEN_ABSENCES_ROUTES:()=>le});var i=n(9733),d=n(177),b=n(5212),g=n(4572),c=n(983),f=n(1413),E=n(5558),p=n(6354),y=n(6977),A=n(5964),m=n(6697),C=n(9728),_=n(2637),F=n(235),e=n(4438),v=n(5539),T=n(4412),u=n(7786),D=n(4668),a=n(3382),h=n(8358),S=n(4125),U=n(916),Y=n(9067),x=n(9366),W=n(2673),L=n(3955);let R=(()=>{class o{constructor(t,s,r,l){this.lessonPresencesService=t,this.selectionService=s,this.loadingService=r,this.translate=l,this.loading$=this.loadingService.loading$,this.search$=new T.t(""),this.updateUnconfirmedAbsences$=new f.B,this.unconfirmedAbsences$=(0,u.h)(this.loadUnconfirmedAbsences(),this.updateUnconfirmedAbsences$).pipe((0,D.t)(1)),this.entries$=this.unconfirmedAbsences$.pipe((0,p.T)(U.fJ),(0,D.t)(1)),this.sortCriteriaSubject$=new T.t({primarySortKey:"date",ascending:!1}),this.sortCriteria$=this.sortCriteriaSubject$.asObservable(),this.sortedEntries$=(0,g.z)([this.entries$,this.sortCriteria$]).pipe((0,p.T)((0,a.i)(U.B7))),this.filteredEntries$=(0,g.z)([this.sortedEntries$,this.search$]).pipe((0,p.T)((0,a.i)(h.x)),(0,D.t)(1)),this.currentDetail=null}getUnconfirmedAbsences(t,s){return this.entries$.pipe((0,p.T)(r=>{const l=r.find(M=>M.dateString===t&&M.studentId===s);return l?l.absences:[]}))}getAllUnconfirmedAbsencesForStudent(t){return this.entries$.pipe((0,p.T)(s=>s.filter(r=>r.studentId===t).reduce((r,l)=>r.concat(l.absences),[])))}toggleSort(t){this.sortCriteriaSubject$.pipe((0,m.s)(1)).subscribe(s=>{this.sortCriteriaSubject$.next(s.primarySortKey===t?{primarySortKey:t,ascending:!s.ascending}:{primarySortKey:t,ascending:"name"===t})})}get confirmBackLink(){return this.currentDetail?["/open-absences/detail",this.currentDetail.personId,this.currentDetail.date]:["/open-absences"]}updateAfterConfirm(){(0,g.z)([this.unconfirmedAbsences$.pipe((0,m.s)(1)),this.selectionService.selectedIds$.pipe((0,m.s)(1))]).pipe((0,p.T)((0,a.i)(U.Xv))).subscribe(t=>{this.selectionService.clear(),this.updateUnconfirmedAbsences$.next(t)})}buildMailToString(t,s){const r=t.Email,l=this.translate.instant("open-absences.detail.mail.subject"),M=s.map(N=>(0,S.L0)(N)).join("%0D%0A");let I=`${this.translate.instant("open-absences.detail.mail.body")}%0D%0A${M}`;return I.length>=1600&&(I=`${I.substring(0,1500)}%0D%0A${this.translate.instant("open-absences.detail.mail.bodyToLargeForEmailTo")}`),`${r}?subject=${l}&body=${I}`}loadUnconfirmedAbsences(){return this.loadingService.load(this.lessonPresencesService.getListOfUnconfirmed())}static#e=this.\u0275fac=function(s){return new(s||o)(e.KVO(Y.g),e.KVO(x.s),e.KVO(W.U),e.KVO(L.c$))};static#t=this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac})}return o})();var G=n(8413),V=n(4688),K=n(1769);const X=()=>["/open-absences"];let J=(()=>{class o{constructor(t,s,r,l,M,I,N){this.router=t,this.route=s,this.openAbsencesService=r,this.presenceTypesService=l,this.personService=M,this.selectionService=I,this.scrollPosition=N,this.absences$=this.route.paramMap.pipe((0,E.n)(this.getAbsencesForParams.bind(this))),this.hasAbsences$=this.absences$.pipe((0,p.T)((0,C.NT)(1))),this.studentFullName$=this.absences$.pipe((0,p.T)(O=>O[0]&&O[0].StudentFullName||null)),this.allSelected$=(0,g.z)([this.absences$,this.selectionService.selection$]).pipe((0,p.T)(([O,B])=>O.length===B.length)),this.studentEmail$=this.absences$.pipe((0,p.T)(O=>O[0]&&O[0].StudentRef.Id||null),(0,E.n)(O=>O?this.personService.getByIdWithEmailInfos(O):c.w)),this.allUnconfirmedAbsencesForStudent$=this.route.paramMap.pipe((0,E.n)(this.getAbsencesForStudentParam.bind(this))),this.mailTo$=(0,g.z)([this.studentEmail$,this.allUnconfirmedAbsencesForStudent$]).pipe((0,p.T)(([O,B])=>this.openAbsencesService.buildMailToString(O,B))),this.destroy$=new f.B}ngOnInit(){this.selectionService.clearNonLessonPresences(),this.route.paramMap.pipe((0,y.Q)(this.destroy$)).subscribe(t=>this.openAbsencesService.currentDetail={date:String(t.get("date")),personId:Number(t.get("personId"))}),this.hasAbsences$.pipe((0,y.Q)(this.destroy$),(0,A.p)((0,b.AU)(C.zz))).subscribe(()=>this.router.navigate(["/open-absences"]))}ngAfterViewInit(){this.scrollPosition.restore()}ngOnDestroy(){this.destroy$.next()}toggleAll(t){t?this.absences$.pipe((0,m.s)(1)).subscribe(s=>this.selectionService.clear(s)):this.selectionService.clear()}onRowClick(t,s){t.target!==s&&s.click()}getPresenceTypeDesignation(t){return this.presenceTypesService.displayedTypes$.pipe((0,p.T)(s=>t.TypeRef.Id&&s.find(r=>r.Id===t.TypeRef.Id)?.Designation||null))}getAbsencesForParams(t){return this.openAbsencesService.getUnconfirmedAbsences(String(t.get("date")),Number(t.get("personId")))}getAbsencesForStudentParam(t){return this.openAbsencesService.getAllUnconfirmedAbsencesForStudent(Number(t.get("personId")))}static#e=this.\u0275fac=function(s){return new(s||o)(e.rXU(v.Ix),e.rXU(v.nX),e.rXU(R),e.rXU(G._),e.rXU(V.a),e.rXU(x.s),e.rXU(K.W))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["bkd-open-absences-detail"]],standalone:!0,features:[e.aNF],decls:6,vars:10,consts:[[3,"link"],[3,"absences$","selectionService","confirmLink","displayEmail","mailTo$"]],template:function(s,r){1&s&&(e.j41(0,"div"),e.nrm(1,"bkd-backlink",0),e.j41(2,"h1"),e.EFF(3),e.nI1(4,"async"),e.k0s()(),e.nrm(5,"bkd-student-dossier-absences",1)),2&s&&(e.R7$(),e.Y8G("link",e.lJ4(9,X)),e.R7$(2),e.JRh(e.bMT(4,7,r.studentFullName$)),e.R7$(2),e.Y8G("absences$",r.absences$)("selectionService",r.selectionService)("confirmLink","/open-absences/confirm")("displayEmail",!0)("mailTo$",r.mailTo$))},dependencies:[_.P,F.A,d.Jj],styles:['.content[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem}.back[_ngcontent-%COMP%]{color:#000;text-decoration:none}.back[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%], .back[_ngcontent-%COMP%]:active   span[_ngcontent-%COMP%]{text-decoration:underline}.absence-entry[_ngcontent-%COMP%]{padding:1rem;border-bottom:1px solid #dee2e6;display:grid;grid-template-areas:"checkbox lesson-class time teacher" "checkbox presence-type date days-ago";grid-template-columns:min-content 2fr 1fr 2fr}.checkbox[_ngcontent-%COMP%]{grid-area:checkbox;margin:0;padding:.6rem .5rem 0 0}.checkbox[_ngcontent-%COMP%]   input.form-check-input[_ngcontent-%COMP%]{position:static!important;margin:0!important;display:block}.all[_ngcontent-%COMP%]{grid-area:all}.lesson-class[_ngcontent-%COMP%]{grid-area:lesson-class;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.time[_ngcontent-%COMP%]{grid-area:time}.teacher[_ngcontent-%COMP%]{grid-area:teacher}.presence-type[_ngcontent-%COMP%]{color:#adb5bd;grid-area:presence-type}.date[_ngcontent-%COMP%]{grid-area:date}.days-ago[_ngcontent-%COMP%]{color:#adb5bd;grid-area:days-ago}.date-days-ago[_ngcontent-%COMP%]{grid-area:date-days-ago;display:none}@media (max-width: 750px){.content[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.absence-entry[_ngcontent-%COMP%]{grid-template-areas:"checkbox lesson-class" "checkbox teacher" "checkbox date-days-ago" "checkbox time" "checkbox presence-type";grid-template-columns:min-content 1fr}.date-days-ago[_ngcontent-%COMP%]{display:block}.date[_ngcontent-%COMP%], .days-ago[_ngcontent-%COMP%]{display:none}}'],changeDetection:0})}return o})();var z=n(2239),H=n(1517),Q=n(7887),Z=n(5063);const w=(o,P,t)=>({selection:o,entries:P,sortCriteria:t}),k=o=>({count:o}),q=(o,P)=>["detail",o,P];function ee(o,P){if(1&o){const t=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){const r=e.eBV(t).$implicit,l=e.XpG(4);return e.Njj(l.openAbsencesService.toggleSort(r))}),e.EFF(1),e.nI1(2,"translate"),e.j41(3,"span",17),e.EFF(4),e.k0s()()}if(2&o){const t=P.$implicit,s=e.XpG(3).bkdLet,r=e.XpG();e.Y8G("className",t),e.R7$(),e.SpI(" ",e.bMT(2,3,"open-absences.list.header."+t)," "),e.R7$(3),e.JRh(r.getSortDirectionCharacter(s.sortCriteria,t))}}function te(o,P){if(1&o){const t=e.RV6();e.j41(0,"div")(1,"div",18)(2,"div",19),e.bIt("click",function(r){e.eBV(t);const l=e.sdS(4),M=e.XpG(4);return e.Njj(M.onCheckboxCellClick(r,l))}),e.j41(3,"input",13,2),e.nI1(5,"async"),e.bIt("change",function(){const r=e.eBV(t).$implicit,l=e.XpG(4);return e.Njj(l.selectionService.toggle(r))}),e.k0s()(),e.j41(6,"div",20)(7,"a",21),e.EFF(8),e.k0s()(),e.j41(9,"div",22),e.EFF(10),e.k0s(),e.j41(11,"div",23),e.EFF(12),e.nI1(13,"translate"),e.k0s(),e.j41(14,"div",24),e.EFF(15),e.nI1(16,"translate"),e.k0s(),e.j41(17,"div",25),e.EFF(18),e.nI1(19,"bkdDaysDifference"),e.k0s(),e.j41(20,"div",26),e.EFF(21),e.nI1(22,"date"),e.k0s()()()}if(2&o){const t=P.$implicit,s=e.XpG(4);e.R7$(3),e.Y8G("checked",e.bMT(5,9,s.selectionService.isSelected$(t))),e.R7$(4),e.Y8G("routerLink",e.l_i(22,q,t.studentId,t.dateString)),e.R7$(),e.JRh(t.studentFullName),e.R7$(2),e.SpI(" ",t.studyClassNumber," "),e.R7$(2),e.SpI(" ",e.i5U(13,11,s.getLessonsCountKey(t),e.eq3(25,k,t.lessonsCount))," "),e.R7$(3),e.Lme(" ",t.studyClassNumber,", ",e.i5U(16,14,s.getLessonsCountKey(t),e.eq3(27,k,t.lessonsCount))," "),e.R7$(3),e.SpI(" ",e.bMT(19,17,t.date)," "),e.R7$(3),e.JRh(e.i5U(22,19,t.date,"dd.MM.yyyy"))}}function ne(o,P){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"div")(2,"bkd-resettable-input",5),e.nI1(3,"async"),e.nI1(4,"translate"),e.nI1(5,"translate"),e.bIt("valueChange",function(r){e.eBV(t);const l=e.XpG(3);return e.Njj(l.openAbsencesService.search$.next(r))}),e.k0s(),e.j41(6,"div",6)(7,"div",7),e.EFF(8),e.nI1(9,"translate"),e.k0s(),e.j41(10,"a",8)(11,"i",9),e.EFF(12,"edit"),e.k0s()()()(),e.j41(13,"div",10)(14,"div",11)(15,"div",12)(16,"input",13),e.bIt("change",function(r){e.eBV(t);const l=e.XpG(3);return e.Njj(l.onToggleAll(null==r.currentTarget?null:r.currentTarget.checked))}),e.k0s()(),e.DNE(17,ee,5,5,"div",14),e.k0s(),e.DNE(18,te,23,29,"div",15),e.k0s(),e.bVm()}if(2&o){const t=e.XpG(2).bkdLet,s=e.XpG();e.R7$(2),e.Y8G("value",e.bMT(3,9,s.openAbsencesService.search$))("placeholder",e.bMT(4,11,"open-absences.search-by-name-or-class"))("label",e.bMT(5,13,"open-absences.search")),e.R7$(6),e.SpI(" ",e.i5U(9,15,"open-absences.selected",e.eq3(18,k,t.selection.length))," "),e.R7$(2),e.AVh("disabled",0===t.selection.length),e.R7$(6),e.Y8G("checked",t.selection.length===t.entries.length),e.R7$(),e.Y8G("ngForOf",s.primarySortKeys),e.R7$(),e.Y8G("ngForOf",t.entries)}}function se(o,P){1&o&&(e.j41(0,"p",27),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&o&&(e.R7$(),e.JRh(e.bMT(2,1,"open-absences.noEntries")))}function ie(o,P){if(1&o&&(e.qex(0),e.DNE(1,ne,19,20,"ng-container",4),e.nI1(2,"async"),e.DNE(3,se,3,3,"ng-template",null,1,e.C5r),e.bVm()),2&o){let t;const s=e.sdS(4),r=e.XpG().bkdLet,l=e.XpG();e.R7$(),e.Y8G("ngIf",(null!==(t=null==(t=e.bMT(2,2,l.openAbsencesService.sortedEntries$))?null:t.length)&&void 0!==t?t:0)>0||(null==r.entries?null:r.entries.length)>0)("ngIfElse",s)}}function oe(o,P){1&o&&e.nrm(0,"bkd-spinner")}function re(o,P){if(1&o&&(e.j41(0,"div"),e.DNE(1,ie,5,4,"ng-container",4),e.nI1(2,"async"),e.DNE(3,oe,1,0,"ng-template",null,0,e.C5r),e.k0s()),2&o){const t=e.sdS(4),s=e.XpG();e.R7$(),e.Y8G("ngIf",!1===e.bMT(2,2,s.openAbsencesService.loading$))("ngIfElse",t)}}let ce=(()=>{class o{constructor(t,s,r){this.openAbsencesService=t,this.selectionService=s,this.scrollPosition=r,this.primarySortKeys=["name","date"],this.destroy$=new f.B}ngOnInit(){this.openAbsencesService.currentDetail=null,this.selectionService.clearNonOpenAbsencesEntries()}ngAfterViewInit(){this.scrollPosition.restore()}ngOnDestroy(){this.destroy$.next()}onToggleAll(t){this.openAbsencesService.filteredEntries$.pipe((0,m.s)(1)).subscribe(s=>{this.selectionService.clear(t?s:null)})}onCheckboxCellClick(t,s){t.target!==s&&s.click()}getSortDirectionCharacter(t,s){return t.primarySortKey!==s?"":t.ascending?"\u2193":"\u2191"}getLessonsCountKey(t){return"open-absences.list.content.lessonsCount."+(1===t.lessonsCount?"singular":"plural")}static#e=this.\u0275fac=function(s){return new(s||o)(e.rXU(R),e.rXU(x.s),e.rXU(K.W))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["bkd-open-absences-list"]],standalone:!0,features:[e.aNF],decls:7,vars:14,consts:[["loading",""],["noEntries",""],["checkbox",""],[4,"bkdLet"],[4,"ngIf","ngIfElse"],[1,"d-flex","header-search",3,"valueChange","value","placeholder","label"],[1,"d-flex","align-items-center","justify-content-between","mt-1"],[1,"selection-count","ps-1"],["routerLink","/open-absences/confirm",1,"edit","btn","btn-primary","btn-edit","mt-1","mb-2"],[1,"material-icons"],[1,"content"],[1,"absence-header"],[1,"checkbox"],["type","checkbox",1,"form-check-input",3,"change","checked"],[3,"className","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"click","className"],[1,"sort-direction"],[1,"absence-entry"],[1,"checkbox",3,"click"],[1,"name","pe-2"],[3,"routerLink"],[1,"study-class"],[1,"lessons-count"],[1,"study-class-lessons-count"],[1,"days-ago"],[1,"date"],[1,"mt-3"]],template:function(s,r){1&s&&(e.j41(0,"h1"),e.EFF(1),e.nI1(2,"translate"),e.k0s(),e.DNE(3,re,5,4,"div",3),e.nI1(4,"async"),e.nI1(5,"async"),e.nI1(6,"async")),2&s&&(e.R7$(),e.JRh(e.bMT(2,2,"open-absences.title")),e.R7$(2),e.Y8G("bkdLet",e.sMw(10,w,e.bMT(4,4,r.selectionService.selection$),e.bMT(5,6,r.openAbsencesService.filteredEntries$),e.bMT(6,8,r.openAbsencesService.sortCriteria$))))},dependencies:[Q.N,d.bT,z.B,v.Wk,d.pM,H.t,d.Jj,d.vh,L.h,L.D9,Z.j],styles:['.header-search[_ngcontent-%COMP%]{max-width:500px}.absence-header[_ngcontent-%COMP%]{cursor:pointer;padding:1rem;display:grid;grid-template-areas:"checkbox name date";grid-template-columns:min-content 5fr 1fr;border-top:1px solid #dee2e6;border-bottom:2px solid #dee2e6;align-items:center}.absence-entry[_ngcontent-%COMP%]{padding:1rem;border-bottom:1px solid #dee2e6;display:grid;grid-template-areas:"checkbox name study-class lessons-count days-ago date";grid-template-columns:min-content 2fr 1fr 1fr 1fr 1fr;align-items:center}.checkbox[_ngcontent-%COMP%]{align-self:start;grid-area:checkbox;margin:0;padding:.3rem 1rem 0 0}.checkbox[_ngcontent-%COMP%]   input.form-check-input[_ngcontent-%COMP%]{position:static!important;margin:0!important;display:block}.name[_ngcontent-%COMP%]{grid-area:name;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.lessons-count[_ngcontent-%COMP%]{grid-area:lessons-count}.study-class[_ngcontent-%COMP%]{grid-area:study-class}.study-class-lessons-count[_ngcontent-%COMP%]{grid-area:study-class-lessons-count;display:none}.days-ago[_ngcontent-%COMP%]{color:#6c757d;grid-area:days-ago}.date[_ngcontent-%COMP%]{grid-area:date}@media (max-width: 750px){.content[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.absence-header[_ngcontent-%COMP%]{grid-template-areas:"checkbox name date";grid-template-columns:min-content 3fr 2fr}.absence-entry[_ngcontent-%COMP%]{grid-template-areas:"checkbox name date" "checkbox study-class-lessons-count days-ago";grid-template-columns:min-content 3fr 2fr}.study-class-lessons-count[_ngcontent-%COMP%]{display:block}.study-class[_ngcontent-%COMP%], .lessons-count[_ngcontent-%COMP%]{display:none}.days-ago[_ngcontent-%COMP%], .study-class-lessons-count[_ngcontent-%COMP%]{font-size:.875rem;color:#adb5bd}}'],changeDetection:0})}return o})();var ae=n(1876);const le=[{path:"",component:(()=>{class o{constructor(){}static#e=this.\u0275fac=function(s){return new(s||o)};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["bkd-open-absences"]],standalone:!0,features:[e.Jv_([R,x.s,{provide:ae.G,useExisting:R}]),e.aNF],decls:1,vars:0,template:function(s,r){1&s&&e.nrm(0,"router-outlet")},dependencies:[v.n3],changeDetection:0})}return o})(),children:[{path:"",component:ce,data:{restoreScrollPositionFrom:["/open-absences/detail/:personId/:date","/open-absences/confirm"]}},{path:"detail/:personId/:date",component:J,data:{restoreScrollPositionFrom:["/open-absences/confirm"]}},{path:"confirm",component:i.k}]}]},5666:(j,$,n)=>{n.d($,{H:()=>d});var i=n(5783);const d=i.NW({Key:i.KC([i.ai,i.Yj]),Value:i.Yj})},8296:(j,$,n)=>{n.d($,{v:()=>p});var i=n(5558),d=n(4668),b=n(2809),g=n(5666),c=n(785),f=n(4438),E=n(1626);let p=(()=>{class y{constructor(m,C){this.http=m,this.settings=C}getAbsenceConfirmationStates(){return this.http.get(`${this.baseUrl}/AbsenceConfirmationStates`).pipe((0,i.n)((0,c.k$)(g.H)),(0,d.t)(1))}getStayPermits(){return this.http.get(`${this.baseUrl}/StayPermits`).pipe((0,i.n)((0,c.k$)(g.H)),(0,d.t)(1))}get baseUrl(){return`${this.settings.apiUrl}/DropDownItems`}static#e=this.\u0275fac=function(C){return new(C||y)(f.KVO(E.Qq),f.KVO(b.yy))};static#t=this.\u0275prov=f.jDH({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})()},4688:(j,$,n)=>{n.d($,{a:()=>C});var i=n(5783),d=n(5558),b=n(6354),g=n(2809),c=n(5306);const f=i.NW({Id:i.ai,FormOfAddress:i.Yj,Nationality:(0,c.c$)(i.Yj),AddressLine1:(0,c.c$)(i.Yj),AddressLine2:(0,c.c$)(i.Yj),BillingAddress:(0,c.c$)(i.Yj),Birthdate:(0,c.c$)(c.iC),CorrespondenceAddress:(0,c.c$)(i.Yj),DisplayEmail:(0,c.c$)(i.Yj),Email:(0,c.bW)(i.Yj),Email2:(0,c.bW)(i.Yj),FirstName:(0,c.c$)(i.Yj),Gender:(0,c.c$)(i.KC([i.eu("M"),i.eu("F"),i.eu("X")])),HomeTown:(0,c.c$)(i.Yj),LastName:(0,c.c$)(i.Yj),FullName:(0,c.c$)(i.Yj),Location:(0,c.c$)(i.Yj),MiddleName:(0,c.c$)(i.Yj),NativeLanguage:(0,c.c$)(i.Yj),PhoneMobile:(0,c.c$)(i.Yj),PhonePrivate:(0,c.c$)(i.Yj),PhoneBusiness:(0,c.bW)(i.Yj),SocialSecurityNumber:(0,c.c$)(i.Yj),StayPermit:(0,c.c$)(i.ai),StayPermitExpiry:(0,c.c$)(c.iC),Zip:(0,c.c$)(i.Yj)});var E=n(785),p=n(5437),y=n(6952),A=n(4438),m=n(1626);let C=(()=>{class _ extends y.G{constructor(e,v){super(e,v,f,"Persons"),this.personEmailCodec=i.NW((0,p.U)(this.codec.props,["Email","FormOfAddress"]))}getListForIds(e){return this.getList({params:{"filter.Id":`;${e.join(";")}`}})}getMyself(e){return this.http.get(`${this.baseUrl}/me`,e).pipe((0,d.n)((0,E.D4)(this.codec)))}getByIdWithEmailInfos(e){return this.http.get(`${this.baseUrl}/`,{params:{"filter.Id=":e.toString(),fields:["FormOfAddress","Email"].join(",")}}).pipe((0,d.n)((0,E.k$)(this.personEmailCodec)),(0,b.T)(v=>v[0]))}update(e,v,T,u){return this.http.put(`${this.baseUrl}/${e}`,{PhonePrivate:v,PhoneMobile:T,Email2:u}).pipe((0,b.T)(()=>{}))}static#e=this.\u0275fac=function(v){return new(v||_)(A.KVO(m.Qq),A.KVO(g.yy))};static#t=this.\u0275prov=A.jDH({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()},1769:(j,$,n)=>{n.d($,{W:()=>F});var i=n(5539),d=n(1413),b=n(7673),g=n(5964),c=n(6354),f=n(6697),E=n(1397),p=n(5558),y=n(7799),A=n(4668),m=n(6977),C=n(4438),_=n(177);let F=(()=>{class u{constructor(a,h){this.router=a,this.viewportScroller=h,this.scrollPositions={},this.previousRoute=null,this.currentRoute=this.getInitialActivatedRouteSnapshot(),this.currentScrollPosition=[0,0],this.destroy$=new d.B,this.activationEnd$=this.router.events.pipe((0,g.p)(e)),this.navigationEnd$=this.router.events.pipe((0,g.p)(T)),this.navigationStart$=this.router.events.pipe((0,g.p)(v)),this.scrollPosition$=this.navigationStart$.pipe((0,c.T)(this.getScrollPosition.bind(this))),this.route$=this.activationEnd$.pipe((0,f.s)(1)).pipe((0,E.Z)(S=>[(0,b.of)(S),this.navigationEnd$.pipe((0,p.n)(()=>this.activationEnd$.pipe((0,f.s)(1))))]),(0,y.w)(),(0,c.T)(S=>S.snapshot),(0,A.t)(1)),this.scrollPosition$.pipe((0,m.Q)(this.destroy$)).subscribe(S=>this.currentScrollPosition=S),this.route$.pipe((0,m.Q)(this.destroy$)).subscribe(S=>{this.previousRoute=this.currentRoute,this.currentRoute=S})}ngOnDestroy(){this.destroy$.next()}restore(){if(!this.currentRoute||!this.requiresStoring(this.currentRoute))return;if(this.previousRoute&&this.shouldStoreFor(this.currentRoute,this.previousRoute)){const h=this.getPath(this.currentRoute);this.scrollToPosition(this.scrollPositions[h]||[0,0])}const a=this.currentRoute;this.route$.pipe((0,f.s)(1),(0,m.Q)(this.destroy$),(0,g.p)(h=>this.shouldStoreFor(a,h))).subscribe(()=>{const h=this.getPath(a);this.scrollPositions[h]=this.currentScrollPosition})}getScrollPosition(){return this.viewportScroller.getScrollPosition()}scrollToPosition(a){this.viewportScroller.scrollToPosition(a)}getPath(a){return a?"/"+a.pathFromRoot.map(h=>h.routeConfig&&h.routeConfig.path).filter(h=>h).join("/"):"/"}requiresStoring(a){return!!(a&&a.routeConfig&&a.routeConfig.data&&Array.isArray(a.routeConfig.data.restoreScrollPositionFrom)&&a.routeConfig.data.restoreScrollPositionFrom.length>0)}shouldStoreFor(a,h){return(a&&a.routeConfig&&a.routeConfig.data&&Array.isArray(a.routeConfig.data.restoreScrollPositionFrom)?a.routeConfig.data.restoreScrollPositionFrom:[]).includes(this.getPath(h))}getInitialActivatedRouteSnapshot(){let a=this.router.routerState.snapshot.root;for(;a.firstChild;)a=a.firstChild;return a}static#e=this.\u0275fac=function(h){return new(h||u)(C.KVO(i.Ix),C.KVO(_.Xr))};static#t=this.\u0275prov=C.jDH({token:u,factory:u.\u0275fac,providedIn:"root"})}return u})();function e(u){return u instanceof i._d}function v(u){return u instanceof i.Z}function T(u){return u instanceof i.wF}},4297:(j,$,n)=>{function i(b,g){return d(b).includes(g)}function d(b){return b?b.split(";"):[]}n.d($,{O:()=>d,h:()=>i})}}]);