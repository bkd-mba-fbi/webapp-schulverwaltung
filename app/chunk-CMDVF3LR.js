import{a as Te,b as Le,c as De,d as Fe,e as Ne}from"./chunk-3DWQRMU4.js";import"./chunk-I5JSV7AG.js";import{c as Be,d as Re}from"./chunk-E3MRLVGK.js";import"./chunk-ZAGM2WJU.js";import"./chunk-I6B7SZW4.js";import{a as Z}from"./chunk-JQMOLUIY.js";import{b as Ae}from"./chunk-TN3HRY7Y.js";import"./chunk-2QS7YZBA.js";import{a as Ee}from"./chunk-56A7FKFV.js";import"./chunk-MGLEQUF6.js";import{d as $e}from"./chunk-2N7K67C6.js";import"./chunk-W3YEYO67.js";import{i as Ve}from"./chunk-YNODG5RP.js";import"./chunk-SNNR7FJ6.js";import"./chunk-EFJ6WEH7.js";import{a as z,b,c as xe,d as Se,e as be,f as Pe,g as Me}from"./chunk-HVLHLZKP.js";import{b as Ie}from"./chunk-DQAQYQ7K.js";import{a as ke}from"./chunk-LYDHS67M.js";import{r as pe,s as se,t as de}from"./chunk-ZXUJZ6KS.js";import{$d as ce,Ae as F,Cc as s,Dc as d,Eb as ie,Ec as V,Gb as v,H as K,Ib as y,Kb as Y,Kc as H,L as Q,Lb as B,Mb as L,Nb as f,Ob as l,Pb as a,Pc as le,Qb as m,U as X,Ub as E,Wb as w,Xb as u,_ as j,aa as ee,ba as T,be as me,ce as fe,db as n,de as ue,ec as S,gc as ne,he as _e,ic as p,id as q,ja as te,jc as C,jd as U,k as G,kc as _,lc as oe,le as ve,mc as re,ne as ye,oa as g,ob as x,q as $,r as J,rc as D,sc as I,tc as h,ua as M,ub as A,va as k,ve as he,wc as ae,we as Ce,xc as O,xe as ge,ze as we}from"./chunk-GP622B77.js";var N=(()=>{let t=class t{constructor(){this.storageService=g(Ee),this.profileService=g(Te),this.reloadStudent$=new G(void 0),this.person$=this.reloadStudent$.pipe(T(()=>this.loadPerson()),j(1)),this.loadingPerson$=this.profileService.loadingMyself$,this.legalRepresentatives$=this.person$.pipe(T(i=>i&&this.isStudent()?this.profileService.getLegalRepresentatives(i):$(null)),j(1)),this.loadingLegalRepresentatives$=this.profileService.loadingLegalRepresentatives$,this.apprenticeships$=this.person$.pipe(T(i=>i&&this.isStudent()?this.profileService.getApprenticeships(i.Id):$(null)),j(1)),this.loadingApprenticeships$=this.profileService.loadingApprenticeships$,this.stayPermit$=this.person$.pipe(T(i=>i?this.profileService.getStayPermitValue(i.StayPermit):$(null))),this.loadingStayPermit$=this.profileService.loadingStayPermit$}reloadStudent(){this.reloadStudent$.next()}loadPerson(){return this.profileService.getMyself().pipe(Q(i=>i.status===403?$(null):J(()=>i)))}isStudent(){return(this.storageService.getPayload()?.roles?.split(";")??[]).includes("StudentRole")}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=te({token:t,factory:t.\u0275fac});let e=t;return e})();function We(e,t){if(e&1&&(l(0,"div"),p(1),a()),e&2){u(2);let o=h(1);n(),_(" ",o.AddressLine2," ")}}function Ye(e,t){if(e&1&&(l(0,"div",5),p(1),s(2,"translate"),a()),e&2){let o=t.$implicit;n(),_(" ",V(2,1,"global.validation-errors."+o.error,o.params)," ")}}function Ze(e,t){if(e&1&&(l(0,"div",13),p(1),s(2,"translate"),a()),e&2){let o=t.$implicit;n(),_(" ",V(2,1,"global.validation-errors."+o.error,o.params)," ")}}function Je(e,t){e&1&&(l(0,"div",18)(1,"span",19),p(2,"Loading..."),a()())}function Ke(e,t){if(e&1){let o=E();l(0,"form",2),w("ngSubmit",function(){M(o);let r=u();return k(r.onSubmit())}),l(1,"div",3)(2,"p"),p(3),s(4,"translate"),a(),l(5,"address",4)(6,"div"),p(7),a(),v(8,We,2,1,"div"),l(9,"div"),p(10),a()()(),B(11,Ye,3,4,"div",5,Y),s(13,"async"),l(14,"div",3)(15,"label",6),p(16),s(17,"translate"),a(),m(18,"input",7),a(),l(19,"div",3)(20,"label",8),p(21),s(22,"translate"),a(),m(23,"input",9),l(24,"small",10),p(25),s(26,"translate"),a()(),l(27,"div",3)(28,"label",11),p(29),s(30,"translate"),a(),m(31,"input",12),s(32,"async"),B(33,Ze,3,4,"div",13,Y),s(35,"async"),l(36,"small",14),p(37),s(38,"translate"),a()(),l(39,"div",15)(40,"button",16),s(41,"async"),w("click",function(){M(o);let r=u();return k(r.cancel())}),p(42),s(43,"translate"),a(),l(44,"button",17),s(45,"async"),p(46),s(47,"translate"),v(48,Je,3,0,"div",18),s(49,"async"),a()()()}if(e&2){let o,i=u(),r=h(0),c=h(1);f("formGroup",r),n(3),C(d(4,18,"my-profile.edit.address-changes-remark")),n(4),C(c.AddressLine1),n(),y(c.AddressLine2?8:-1),n(2),oe("",c.Zip||""," ",c.Location),n(),L(d(13,20,i.formErrors$)),n(5),_(" ",d(17,22,"my-profile.edit.fields.phone-private")," "),n(5),_(" ",d(22,24,"my-profile.edit.fields.phone-mobile")," "),n(4),C(d(26,26,"my-profile.edit.fields.phone-mobile-hint")),n(4),_(" ",d(30,28,"my-profile.edit.fields.email2")," "),n(2),ne("is-invalid",(((o=d(32,30,i.email2Errors$))==null?null:o.length)??0)>0),n(2),L(d(35,32,i.email2Errors$)),n(4),C(d(38,34,"my-profile.edit.fields.email2-hint")),n(3),f("disabled",d(41,36,i.saving$)),n(2),_(" ",d(43,38,"my-profile.edit.cancel")," "),n(2),f("disabled",d(45,40,i.saving$)),n(2),_(" ",d(47,42,"my-profile.edit.save")," "),n(2),y(d(49,44,i.saving$)?48:-1)}}var Ge=(()=>{let t=class t{constructor(){this.fb=g(he),this.router=g(se),this.toastService=g(ke),this.translate=g(we),this.profileService=g(N),this.personsService=g($e),this.person=b(this.profileService.person$,{initialValue:null}),this.formGroup=H(()=>this.createFormGroup(this.person())),this.formGroup$=z(this.formGroup).pipe(K(Ie)),this.saving$=new G(!1),this.submitted$=new G(!1),this.formErrors$=Z(this.formGroup$,this.submitted$),this.email2Errors$=Z(this.formGroup$,this.submitted$,"email2")}cancel(){this.navigateBack()}onSubmit(){this.submitted$.next(!0);let i=this.formGroup();if(i?.valid){let{phonePrivate:r,phoneMobile:c,email2:P}=i.value;this.save(r?.trim()||null,c?.trim()||null,P||null)}}createFormGroup(i){return i?this.fb.group({phonePrivate:[i.PhonePrivate],phoneMobile:[i.PhoneMobile],email2:[i.Email2,me.email]}):null}save(i,r,c){let P=this.person();P&&(this.saving$.next(!0),this.personsService.update(P.Id,i,r,c).pipe(X(()=>this.saving$.next(!1))).subscribe(this.onSaveSuccess.bind(this)))}onSaveSuccess(){this.profileService.reloadStudent(),this.toastService.success(this.translate.instant("my-profile.edit.save-success")),this.navigateBack()}navigateBack(){this.router.navigate(["/my-profile"])}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=x({type:t,selectors:[["bkd-my-profile-edit"]],decls:7,vars:6,consts:[[1,"bkd-container","bkd-container-limited"],[3,"formGroup"],[3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"text-muted"],[1,"alert","alert-danger"],["id","my-profile-phone-private",1,"form-label"],["id","my-profile-phone-private","formControlName","phonePrivate","type","tel",1,"form-control"],["id","my-profile-phone-mobile",1,"form-label"],["id","my-profile-phone-mobile","formControlName","phoneMobile","type","tel","aria-describedby","my-profile-phone-mobile-hint",1,"form-control"],["id","my-profile-phone-mobile-hint",1,"form-text"],["for","my-profile-email2",1,"form-label"],["id","my-profile-email2","formControlName","email2","type","email","aria-describedby","my-profile-email2-hint",1,"form-control"],[1,"invalid-feedback"],["id","my-profile-email2-hint",1,"form-text"],[1,"d-flex","justify-content-end"],["type","button",1,"btn","btn-outline-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary","ms-2",3,"disabled"],["role","status",1,"spinner-border","spinner-border-sm","align-middle"],[1,"visually-hidden"]],template:function(r,c){if(r&1&&(D(0)(1),l(2,"div",0)(3,"h1"),p(4),s(5,"translate"),a(),v(6,Ke,50,46,"form",1),a()),r&2){let P=I(c.formGroup());n();let ze=I(c.person());n(3),C(d(5,4,"my-profile.edit.title")),n(2),y(P&&ze?6:-1)}},dependencies:[Ce,_e,ce,fe,ue,ge,ve,ye,q,F],encapsulation:2,changeDetection:0});let e=t;return e})();var Oe=(()=>{let t=class t{constructor(){}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=x({type:t,selectors:[["bkd-my-profile-address"]],inputs:{address:"address"},decls:2,vars:1,template:function(r,c){r&1&&(l(0,"address"),p(1),a()),r&2&&(n(),C(c.address))},styles:["[_nghost-%COMP%]{padding:1rem}address[_ngcontent-%COMP%]{white-space:pre-wrap}"],changeDetection:0});let e=t;return e})();var je=(()=>{let t=class t{constructor(){}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=x({type:t,selectors:[["bkd-my-profile-entry"]],inputs:{label:"label",value:"value"},decls:6,vars:4,consts:[[1,"row"],[1,"col-md-6"]],template:function(r,c){r&1&&(l(0,"dl",0)(1,"dt",1),p(2),s(3,"translate"),a(),l(4,"dd",1),p(5),a()()),r&2&&(n(2),C(d(3,2,c.label)),n(3),C(c.value))},dependencies:[F],styles:["dl[_ngcontent-%COMP%]{padding:0 1rem}dt[_ngcontent-%COMP%]{font-weight:400;color:#00000080}"],changeDetection:0});let e=t;return e})();function Qe(e,t){if(e&1&&(l(0,"span"),p(1),a()),e&2){u(2);let o=h(0);n(),_("(",o.Gender,")")}}function Xe(e,t){if(e&1&&(l(0,"div",0)(1,"div",1),m(2,"bkd-avatar",2),l(3,"div",3),p(4),v(5,Qe,2,1,"span"),l(6,"div",4),p(7),s(8,"date"),a()()(),m(9,"bkd-reports-link",5),s(10,"async"),a(),l(11,"div",6),p(12),a()),e&2){let o=u(),i=h(0);n(2),f("studentId",i.Id),n(2),re(" ",i.LastName," ",i.FirstName," ",i.MiddleName," "),n(),y(i.Gender?5:-1),n(2),_(" ",V(8,8,i.Birthdate,"dd.MM.yyyy")," "),n(2),f("reports",d(10,11,o.reports$)),n(3),C(i.Email)}}var He=(()=>{let t=class t{constructor(){this.reportsService=g(Re),this.person=le(),this.personId=H(()=>this.person()?.Id??null),this.reports$=z(this.personId).pipe(T(i=>i?this.reportsService.getPersonMasterDataReports(i):$([])),ee([]))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=x({type:t,selectors:[["bkd-my-profile-header"]],inputs:{person:[1,"person"]},decls:2,vars:2,consts:[[1,"avatar-person"],[1,"d-flex"],[1,"me-3","avatar","large",3,"studentId"],[1,"person"],[1,"birthdate"],[3,"reports"],[1,"email"]],template:function(r,c){if(r&1&&(D(0),v(1,Xe,13,13)),r&2){let P=I(c.person());n(),y(P?1:-1)}},dependencies:[Ne,Ae,q,U],styles:[".avatar-person[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-left:1rem 1rem 1rem 0}.person[_ngcontent-%COMP%]{align-self:center}.email[_ngcontent-%COMP%]{padding:1rem 1rem 0 0}.report[_ngcontent-%COMP%]{align-self:flex-start;line-height:1}"],changeDetection:0});let e=t;return e})();var W=()=>[],et=(e,t)=>t.apprenticeshipContract.Id,tt=(e,t)=>t.Id;function it(e,t){e&1&&m(0,"bkd-spinner")}function nt(e,t){e&1&&(l(0,"p",7),p(1),s(2,"translate"),a()),e&2&&(n(),_(" ",d(2,1,"shared.profile.substitution-profile")," "))}function ot(e,t){if(e&1&&m(0,"bkd-my-profile-entry",11),e&2){u(2);let o=h(0);f("value",o.SocialSecurityNumber)}}function rt(e,t){if(e&1&&m(0,"bkd-my-profile-entry",12),e&2){u(2);let o=h(0);f("value",o.HomeTown||o.Nationality)}}function at(e,t){if(e&1&&m(0,"bkd-my-profile-entry",13),e&2){u(2);let o=h(0);f("value",o.NativeLanguage)}}function lt(e,t){e&1&&m(0,"bkd-spinner",14)}function pt(e,t){if(e&1&&m(0,"bkd-my-profile-entry",15),e&2){u(2);let o=h(1);f("value",o)}}function st(e,t){if(e&1&&(m(0,"bkd-my-profile-entry",16),s(1,"date")),e&2){u(2);let o=h(0);f("value",V(1,1,o.StayPermitExpiry,"mediumDate"))}}function dt(e,t){if(e&1&&(l(0,"div",24)(1,"a",25),s(2,"translate"),l(3,"i",26),p(4,"edit"),a()(),m(5,"bkd-student-dossier-address",27),a()),e&2){u(2);let o=h(0);n(),ie("aria-label",d(2,2,"my-profile.edit.title")),n(4),f("student",o)}}function ct(e,t){if(e&1&&m(0,"bkd-my-profile-address",28),e&2){u(3);let o=h(0);f("address",o.CorrespondenceAddress)}}function mt(e,t){if(e&1){let o=E();l(0,"div",18,1)(2,"div",19)(3,"bkd-student-dossier-entry-header",20),w("click",function(){M(o);let r=S(1);return k(r.toggle())}),p(4),s(5,"translate"),a()(),l(6,"div",21)(7,"div",22),A(8,ct,1,1,"ng-template"),a()()()}if(e&2){let o=S(1);n(3),f("opened",!o.collapsed),n(),_(" ",d(5,2,"shared.profile.correspondence-address")," ")}}function ft(e,t){if(e&1&&m(0,"bkd-my-profile-address",28),e&2){u(3);let o=h(0);f("address",o.BillingAddress)}}function ut(e,t){if(e&1){let o=E();l(0,"div",18,2)(2,"div",19)(3,"bkd-student-dossier-entry-header",20),w("click",function(){M(o);let r=S(1);return k(r.toggle())}),p(4),s(5,"translate"),a()(),l(6,"div",21)(7,"div",22),A(8,ft,1,1,"ng-template"),a()()()}if(e&2){let o=S(1);n(3),f("opened",!o.collapsed),n(),_(" ",d(5,2,"shared.profile.billing-address")," ")}}function _t(e,t){e&1&&m(0,"bkd-spinner",14)}function vt(e,t){if(e&1&&m(0,"bkd-student-dossier-legal-representative",29),e&2){let o=t.$implicit;f("person",o)}}function yt(e,t){if(e&1&&B(0,vt,1,1,"bkd-student-dossier-legal-representative",29,tt),e&2){let o=u(3);L(o.legalRepresentatives()??O(0,W))}}function ht(e,t){if(e&1){let o=E();l(0,"div",18,3)(2,"div",19)(3,"bkd-student-dossier-entry-header",20),w("click",function(){M(o);let r=S(1);return k(r.toggle())}),p(4),s(5,"translate"),a()(),l(6,"div",21)(7,"div",22),A(8,yt,2,1,"ng-template"),a()()()}if(e&2){let o=S(1);n(3),f("opened",!o.collapsed),n(),_(" ",d(5,2,"shared.profile.legal-representation")," ")}}function Ct(e,t){e&1&&m(0,"bkd-spinner",14)}function gt(e,t){if(e&1&&p(0),e&2){let o=u().$index;_(" ",o+1," ")}}function xt(e,t){if(e&1&&m(0,"bkd-student-dossier-apprenticeship",30),e&2){let o=u().$implicit;f("apprenticeship",o)}}function St(e,t){if(e&1){let o=E();l(0,"div",23,4)(2,"div",19)(3,"bkd-student-dossier-entry-header",20),w("click",function(){M(o);let r=S(1);return k(r.toggle())}),p(4),s(5,"translate"),v(6,gt,1,1),a()(),l(7,"div",21)(8,"div",22),A(9,xt,1,1,"ng-template"),a()()()}if(e&2){let o=S(1),i=u(2);n(3),f("opened",!o.collapsed),n(),_(" ",d(5,3,"shared.profile.apprenticeship-company")," "),n(2),y((i.apprenticeships()??O(5,W)).length>1?6:-1)}}function bt(e,t){if(e&1){let o=E();m(0,"bkd-my-profile-header",8),l(1,"div",9)(2,"div",10),v(3,ot,1,1,"bkd-my-profile-entry",11),v(4,rt,1,1,"bkd-my-profile-entry",12),v(5,at,1,1,"bkd-my-profile-entry",13),v(6,lt,1,0,"bkd-spinner",14)(7,pt,1,1,"bkd-my-profile-entry",15),v(8,st,2,4,"bkd-my-profile-entry",16),a(),l(9,"div",17)(10,"div",18,0)(12,"div",19)(13,"bkd-student-dossier-entry-header",20),w("click",function(){M(o);let r=S(11);return k(r.toggle())}),p(14),s(15,"translate"),a()(),l(16,"div",21)(17,"div",22),A(18,dt,6,4,"ng-template"),a()()(),v(19,mt,9,4,"div",18),v(20,ut,9,4,"div",18),v(21,_t,1,0,"bkd-spinner",14)(22,ht,9,4,"div",18),v(23,Ct,1,0,"bkd-spinner",14),B(24,St,10,6,"div",23,et),a()()}if(e&2){let o=S(11),i=u(),r=h(0),c=h(1);f("person",r),n(3),y(r.SocialSecurityNumber?3:-1),n(),y(r.HomeTown||r.Nationality?4:-1),n(),y(r.NativeLanguage?5:-1),n(),y(i.loadingStayPermit()?6:c?7:-1),n(2),y(r.StayPermitExpiry?8:-1),n(5),f("opened",!o.collapsed),n(),_(" ",d(15,12,"shared.profile.student-address")," "),n(5),y(r.CorrespondenceAddress?19:-1),n(),y(r.BillingAddress?20:-1),n(),y(i.loadingLegalRepresentatives()?21:(i.legalRepresentatives()??O(14,W)).length>0?22:-1),n(2),y(i.loadingApprenticeships()?23:-1),n(),L(i.apprenticeships()??O(15,W))}}var qe=(()=>{let t=class t{constructor(){this.profileService=g(N),this.person=b(this.profileService.person$,{initialValue:null}),this.loadingPerson=b(this.profileService.loadingPerson$,{requireSync:!0}),this.legalRepresentatives=b(this.profileService.legalRepresentatives$,{initialValue:null}),this.loadingLegalRepresentatives=b(this.profileService.loadingLegalRepresentatives$,{requireSync:!0}),this.apprenticeships=b(this.profileService.apprenticeships$),this.loadingApprenticeships=b(this.profileService.loadingApprenticeships$,{requireSync:!0}),this.stayPermit=b(this.profileService.stayPermit$,{initialValue:null}),this.loadingStayPermit=b(this.profileService.loadingStayPermit$,{requireSync:!0})}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=x({type:t,selectors:[["bkd-my-profile-show"]],decls:9,vars:6,consts:[["studentAddress","ngbAccordionItem"],["correspondenceAddress","ngbAccordionItem"],["billingAddress","ngbAccordionItem"],["legalRepresentativesItem","ngbAccordionItem"],["apprenticeshipCompanies","ngbAccordionItem"],[1,"bkd-container","bkd-container-limited"],["data-testid","profile-title"],["data-testid","profile-substitution"],[3,"person"],["data-testid","profile-content",1,"profile-content"],[1,"profile-entries","pt-3"],["label","my-profile.show.social-security-number",3,"value"],["label","my-profile.show.hometown-nationality",3,"value"],["label","my-profile.show.native-language",3,"value"],[1,"small"],["label","my-profile.show.stay-permit",3,"value"],["label","my-profile.show.stay-permit-expiry",3,"value"],["ngbAccordion",""],["ngbAccordionItem",""],["ngbAccordionHeader",""],[3,"click","opened"],["ngbAccordionCollapse",""],["ngbAccordionBody",""],[3,"ngbAccordionItem"],[1,"clearfix"],["routerLink","edit",1,"btn","btn-primary","btn-icon","float-end","me-2"],[1,"material-icons"],["emailProperty","Email2",1,"profile-entry",3,"student"],[1,"profile-entry",3,"address"],[1,"profile-entry",3,"person"],[1,"profile-entry",3,"apprenticeship"]],template:function(r,c){if(r&1&&(D(0)(1),l(2,"div",5)(3,"h1",6),p(4),s(5,"translate"),a(),v(6,it,1,0,"bkd-spinner")(7,nt,3,3,"p",7)(8,bt,26,16),a()),r&2){let P=I(c.person());n(),I(c.stayPermit()),n(3),C(d(5,4,"my-profile.title")),n(2),y(c.loadingPerson()?6:P?8:7)}},dependencies:[He,je,Me,Pe,be,Be,Se,xe,de,Le,Oe,Fe,De,Ve,U,F],styles:[".profile-content[_ngcontent-%COMP%]{padding-top:1rem}.profile-entry[_ngcontent-%COMP%]{display:block;padding:0 1rem}.profile-entries[_ngcontent-%COMP%]:not(:empty){border-top:1px solid rgb(222,222,222)}"],changeDetection:0});let e=t;return e})();var Ue=(()=>{let t=class t{constructor(){}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=x({type:t,selectors:[["bkd-my-profile"]],features:[ae([N])],decls:1,vars:0,template:function(r,c){r&1&&m(0,"router-outlet")},dependencies:[pe],encapsulation:2,changeDetection:0});let e=t;return e})();var Vi=[{path:"",component:Ue,children:[{path:"",component:qe},{path:"edit",component:Ge}]}];export{Vi as MY_PROFILE_ROUTES};
