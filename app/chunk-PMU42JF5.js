import{p as X,r as Z,s as te,t as ie,w as re}from"./chunk-W7ASLXRM.js";import"./chunk-Y4QYVF5K.js";import"./chunk-HII3S2DL.js";import{d as ee}from"./chunk-RFO4NYUO.js";import{a as K,b as W}from"./chunk-FTDG26ID.js";import{a as z,c as Q}from"./chunk-SOHFFTKU.js";import{A as w,u as _}from"./chunk-C56YGDXA.js";import{$ as g,$a as O,Ab as d,Bb as p,Ga as j,Gd as k,Hd as R,Ia as f,Id as Y,L as B,O as T,Sa as C,Sb as J,Ta as S,Ua as l,Va as A,Vb as M,Vc as V,W as L,Wa as N,Z as m,g as E,jb as b,kb as $,m as a,n as F,pc as U,r as P,sb as G,tb as h,ua as u,ub as q,va as I,yb as H}from"./chunk-XTHSYQMN.js";var v=(()=>{let e=class e{constructor(n,r,o,y,de,pe,ce){this.storageService=n,this.loadingService=r,this.coursesRestService=o,this.subscriptionRestService=y,this.reportsService=de,this.gradingScalesRestService=pe,this.settings=ce,this.studentId$=new E(1),this.loading$=this.loadingService.loading$,this.studentCourses$=this.loadCourses().pipe(B(1)),this.studentCoursesSorted$=this.studentCourses$.pipe(a(i=>i.slice().sort((s,me)=>s.Designation.localeCompare(me.Designation)))),this.studentCourseIds$=this.studentCourses$.pipe(a(i=>i.flatMap(s=>s.Id))),this.idSubscriptions$=F([this.studentId$,this.studentCourseIds$]).pipe(T(([i,s])=>this.subscriptionRestService.getIdSubscriptionsByStudentAndCourse(i,s))),this.ids$=this.idSubscriptions$.pipe(a(i=>i.map(s=>s.Id))),this.testReports$=this.ids$.pipe(a(i=>this.reportsService.getStudentSubscriptionReports(i))),this.tests$=this.studentCourses$.pipe(a(i=>i.flatMap(s=>s.Tests).filter(_))),this.gradingScaleIdsFromTests$=this.tests$.pipe(a(i=>[...i.map(s=>s.GradingScaleId)].filter(_).filter(w))),this.gradingScaleIdsFromCourses$=this.studentCourses$.pipe(a(i=>i.flatMap(s=>s.GradingScaleId).filter(_).filter(w))),this.gradingScaleIds$=F([this.gradingScaleIdsFromCourses$,this.gradingScaleIdsFromTests$]).pipe(a(([i,s])=>i.concat(s).filter(w))),this.gradingScales$=this.gradingScaleIds$.pipe(T(i=>P(i.map(s=>this.gradingScalesRestService.getGradingScale(s)))));let D=this.storageService.getPayload()?.id_person;D&&this.studentId$.next(Number(D))}loadCourses(){return this.loadingService.load(this.coursesRestService.getExpandedCoursesForStudent())}};e.\u0275fac=function(r){return new(r||e)(m(Y),m(W),m(X),m(Z),m(ee),m(te),m(V))},e.\u0275prov=L({token:e,factory:e.\u0275fac});let t=e;return t})();var ue=()=>[],ne=(()=>{let e=class e{constructor(n){this.myGradesService=n}};e.\u0275fac=function(r){return new(r||e)(I(v))},e.\u0275cmp=g({type:e,selectors:[["bkd-my-grades-header"]],standalone:!0,features:[h],decls:7,vars:7,consts:[[1,"d-flex","justify-content-between","header"],[3,"reports"]],template:function(r,o){if(r&1&&(C(0,"div",0)(1,"div"),b(2),d(3,"translate"),S(),C(4,"div"),l(5,"bkd-reports-link",1),d(6,"async"),S()()),r&2){let y;u(2),$(p(3,2,"my-grades.header")),u(3),f("reports",(y=p(6,4,o.myGradesService.testReports$))!==null&&y!==void 0?y:q(6,ue))}},dependencies:[K,M,R,k],styles:[".header[_ngcontent-%COMP%]{padding-bottom:1rem}.report[_ngcontent-%COMP%]{margin-left:1rem}"]});let t=e;return t})();var fe=(t,e,c,n)=>({loading:t,studentId:e,courses:c,gradingScales:n});function ge(t,e){if(t&1&&l(0,"bkd-dossier-grades-view",4),t&2){let c=O().bkdLet;f("courses",c.courses)("studentId",c.studentId)("gradingScales",c.gradingScales)("isEditable",!1)}}function Se(t,e){t&1&&(A(0),l(1,"bkd-spinner"),N())}function he(t,e){if(t&1&&(C(0,"div",1)(1,"h1"),b(2),d(3,"translate"),S(),l(4,"bkd-my-grades-header"),j(5,ge,1,4,"bkd-dossier-grades-view",2)(6,Se,2,0,"ng-container",3),S()),t&2){let c=e.bkdLet;u(2),$(p(3,3,"my-grades.title")),u(3),f("ngIf",!c.loading),u(),f("ngIf",c.loading)}}var oe=(()=>{let e=class e{constructor(n){this.myGradesService=n}};e.\u0275fac=function(r){return new(r||e)(I(v))},e.\u0275cmp=g({type:e,selectors:[["bkd-my-grades-show"]],standalone:!0,features:[G([ie]),h],decls:5,vars:14,consts:[["class","bkd-container bkd-container-limited",4,"bkdLet"],[1,"bkd-container","bkd-container-limited"],[3,"courses","studentId","gradingScales","isEditable",4,"ngIf"],[4,"ngIf"],[3,"courses","studentId","gradingScales","isEditable"]],template:function(r,o){r&1&&(j(0,he,7,5,"div",0),d(1,"async"),d(2,"async"),d(3,"async"),d(4,"async")),r&2&&f("bkdLet",H(9,fe,p(1,1,o.myGradesService.loading$),p(2,3,o.myGradesService.studentId$),p(3,5,o.myGradesService.studentCoursesSorted$),p(4,7,o.myGradesService.gradingScales$)))},dependencies:[z,ne,J,re,Q,M,R,k]});let t=e;return t})();var ae=(()=>{let e=class e{constructor(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=g({type:e,selectors:[["bkd-my-grades"]],standalone:!0,features:[G([v]),h],decls:1,vars:0,template:function(r,o){r&1&&l(0,"router-outlet")},dependencies:[U]});let t=e;return t})();var Je=[{path:"",component:ae,children:[{path:"",component:oe}]}];export{Je as MY_GRADES_ROUTES};
