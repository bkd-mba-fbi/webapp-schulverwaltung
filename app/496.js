"use strict";(self.webpackChunkwebapp_schulverwaltung=self.webpackChunkwebapp_schulverwaltung||[]).push([[496],{7496:(D,m,r)=>{r.r(m),r.d(m,{MyGradesModule:()=>H});var l=r(9808),g=r(5357),S=r(4707),d=r(4004),v=r(9841),h=r(3900),f=r(4128),G=r(8029),c=r(3978),e=r(5e3),M=r(1303),C=r(2024),$=r(9118),I=r(4381),Z=r(6401),z=r(6629);let p=(()=>{class t{constructor(s,a,j,E,P,X,b){var u;this.storageService=s,this.loadingService=a,this.coursesRestService=j,this.subscriptionRestService=E,this.reportsService=P,this.gradingScalesRestService=X,this.settings=b,this.studentId$=new S.t(1),this.loading$=this.loadingService.loading$,this.studentCourses$=this.loadCourses(),this.studentCourseIds$=this.studentCourses$.pipe((0,d.U)(i=>i.flatMap(o=>o.Id))),this.idSubscriptions$=(0,v.a)([this.studentId$,this.studentCourseIds$]).pipe((0,h.w)(([i,o])=>this.subscriptionRestService.getIdSubscriptionsByStudentAndCourse(i,o))),this.ids$=this.idSubscriptions$.pipe((0,d.U)(i=>i.map(o=>o.Id))),this.testReportUrl$=this.ids$.pipe((0,d.U)(i=>this.reportsService.getSubscriptionReportUrl(this.settings.testsBySubscriptionReportId,i))),this.tests$=this.studentCourses$.pipe((0,d.U)(i=>i.flatMap(o=>o.Tests).filter(c.Nf))),this.gradingScaleIdsFromTests$=this.tests$.pipe((0,d.U)(i=>[...i.map(o=>o.GradingScaleId)].filter(c.Tw))),this.gradingScaleIdsFromCourses$=this.studentCourses$.pipe((0,d.U)(i=>i.flatMap(o=>o.GradingScaleId).filter(c.Nf).filter(c.Tw))),this.gradingScaleIds$=(0,v.a)([this.gradingScaleIdsFromCourses$,this.gradingScaleIdsFromTests$]).pipe((0,d.U)(([i,o])=>i.concat(o).filter(c.Tw))),this.gradingScales$=this.gradingScaleIds$.pipe((0,h.w)(i=>(0,f.D)(i.map(o=>this.gradingScalesRestService.getGradingScale(o)))));const y=null===(u=this.storageService.getPayload())||void 0===u?void 0:u.id_person;y&&this.studentId$.next(Number(y))}loadCourses(){return this.loadingService.load(this.coursesRestService.getExpandedCoursesForStudent())}}return t.\u0275fac=function(s){return new(s||t)(e.LFG(M.V),e.LFG(C.b),e.LFG($.s),e.LFG(I.o),e.LFG(Z.F),e.LFG(z.R),e.LFG(G.L))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})(),L=(()=>{class t{constructor(){}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["erz-my-grades"]],features:[e._Bn([p])],decls:1,vars:0,template:function(s,a){1&s&&e._UZ(0,"router-outlet")},directives:[g.lC],styles:[""]}),t})();var F=r(8980),T=r(1104),U=r(8995);let A=(()=>{class t{constructor(s){this.myGradesService=s}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(p))},t.\u0275cmp=e.Xpm({type:t,selectors:[["erz-my-grades-header"]],decls:9,vars:6,consts:[[1,"d-flex","justify-content-between","header"],["target","_blank",1,"report","btn","btn-primary",3,"href"],[1,"material-icons"]],template:function(s,a){1&s&&(e.TgZ(0,"div",0),e.TgZ(1,"div"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div"),e.TgZ(5,"a",1),e.ALo(6,"async"),e.TgZ(7,"i",2),e._uU(8,"description"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&s&&(e.xp6(2),e.Oqu(e.lcZ(3,2,"my-grades.header")),e.xp6(3),e.Q6J("href",e.lcZ(6,4,a.myGradesService.testReportUrl$),e.LSH))},pipes:[U.X$,l.Ov],styles:[".header[_ngcontent-%COMP%]{padding-left:1.5rem;padding-bottom:1.5rem}@media (max-width: 750px){.header[_ngcontent-%COMP%]{padding-right:1.5rem}}.report[_ngcontent-%COMP%]{margin-left:1.5rem}"]}),t})();var R=r(7681),x=r(2925);function w(t,n){if(1&t&&e._UZ(0,"erz-dossier-grades-view",4),2&t){const s=e.oxw().erzLet;e.Q6J("courses",s.courses)("studentId",s.studentId)("gradingScales",s.gradingScales)("isEditable",!1)}}function B(t,n){1&t&&(e.ynx(0),e._UZ(1,"erz-spinner"),e.BQk())}function J(t,n){if(1&t&&(e.ynx(0),e._UZ(1,"erz-my-grades-header"),e.YNc(2,w,1,4,"erz-dossier-grades-view",2),e.YNc(3,B,2,0,"ng-container",3),e.BQk()),2&t){const s=n.erzLet;e.xp6(2),e.Q6J("ngIf",!s.loading),e.xp6(1),e.Q6J("ngIf",s.loading)}}const O=function(t,n,s,a){return{loading:t,studentId:n,courses:s,gradingScales:a}},Q=[{path:"",component:L,children:[{path:"",component:(()=>{class t{constructor(s){this.myGradesService=s}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(p))},t.\u0275cmp=e.Xpm({type:t,selectors:[["erz-my-grades-show"]],features:[e._Bn([F.S])],decls:6,vars:14,consts:[[1,"erz-container","erz-container-limited","erz-container-padding-y","erz-container-padding-x-responsive"],[4,"erzLet"],[3,"courses","studentId","gradingScales","isEditable",4,"ngIf"],[4,"ngIf"],[3,"courses","studentId","gradingScales","isEditable"]],template:function(s,a){1&s&&(e.TgZ(0,"div",0),e.YNc(1,J,4,2,"ng-container",1),e.ALo(2,"async"),e.ALo(3,"async"),e.ALo(4,"async"),e.ALo(5,"async"),e.qZA()),2&s&&(e.xp6(1),e.Q6J("erzLet",e.l5B(9,O,e.lcZ(2,1,a.myGradesService.loading$),e.lcZ(3,3,a.myGradesService.studentId$),e.lcZ(4,5,a.myGradesService.studentCourses$),e.lcZ(5,7,a.myGradesService.gradingScales$))))},directives:[T.e,A,l.O5,R.d,x.O],pipes:[l.Ov],styles:[""]}),t})()}]}];let N=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[g.Bz.forChild(Q)],g.Bz]}),t})();var Y=r(9415);let H=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[l.ez,N,Y.m]]}),t})()}}]);