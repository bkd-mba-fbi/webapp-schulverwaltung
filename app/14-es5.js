!function(){function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function i(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function n(t,n,e){return n&&i(t.prototype,n),e&&i(t,e),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"EM/t":function(i,e,o){"use strict";o.r(e),o.d(e,"MySettingsModule",function(){return U});var c,s=o("PCNd"),r=o("tyNb"),a=o("fXoL"),u=o("2Vo4"),f=o("kZPp"),b=o("lJxs"),l=o("bHdf"),p=o("pLZG"),g=o("xbPD"),m=o("SxV6"),h=o("eIep"),d=o("vkgz"),v=o("PYvG"),y=o("t0ae"),S=o("AcjI"),j=((c=function(){function i(n){t(this,i),this.settingsService=n,this.refetchSubject=new u.a(null),this.settingsService.getUserSettingsCst().subscribe(function(t){return sessionStorage.setItem("userSettings",JSON.stringify(f.d.encode(t)))})}return n(i,[{key:"refetch",get:function(){return this.refetchSubject.asObservable()}},{key:"getCurrentNotificationSettingsPropertyValue",value:function(){return this.settingsService.getUserSettingsCst().pipe(Object(b.a)(function(t){return t.Settings}),Object(l.a)(),Object(p.a)(function(t){return"notification"===t.Key}),Object(g.a)({Value:"{}"}),Object(m.a)(),Object(b.a)(function(t){return JSON.parse(t.Value)}),Object(h.a)(Object(y.a)(f.c)))}},{key:"updateCurrentNotificationSettingsPropertyValue",value:function(t,i,n){var e=this,o={Key:"notification",Value:JSON.stringify({gui:t,mail:i,phoneMobile:n})},c=Object.assign({},Object(S.a)());return c.Settings.push(o),this.settingsService.updateUserSettingsCst(c).pipe(Object(d.a)(function(){return e.refetchSubject.next(null)}))}}]),i}()).\u0275fac=function(t){return new(t||c)(a.Zb(v.a))},c.\u0275prov=a.Ib({token:c,factory:c.\u0275fac}),c),k=o("UXun"),O=o("nYR2"),z=o("IzEk"),M=o("3Pt+"),w=o("5eHb"),G=o("sYmb"),N=o("EOpz"),C=o("ofXK");function P(t,i){1&t&&(a.Sb(0,"div",15),a.Sb(1,"span",16),a.Dc(2,"Loading..."),a.Rb(),a.Rb())}function R(t,i){if(1&t){var n=a.Tb();a.Sb(0,"form",4),a.dc("ngSubmit",function(){return a.vc(n),a.fc(2).onSubmit()}),a.Sb(1,"div",5),a.Nb(2,"input",6),a.Sb(3,"label",7),a.Dc(4),a.gc(5,"translate"),a.Rb(),a.Rb(),a.Sb(6,"div",5),a.Nb(7,"input",8),a.Sb(8,"label",9),a.Dc(9),a.gc(10,"translate"),a.Rb(),a.Rb(),a.Sb(11,"div",5),a.Nb(12,"input",10),a.Sb(13,"label",11),a.Dc(14),a.gc(15,"translate"),a.Rb(),a.Rb(),a.Sb(16,"div",12),a.Sb(17,"button",13),a.gc(18,"async"),a.Dc(19),a.gc(20,"translate"),a.Bc(21,P,3,0,"div",14),a.gc(22,"async"),a.Rb(),a.Rb(),a.Rb()}if(2&t){var e=a.fc().erzLet,o=a.fc();a.lc("formGroup",e.notificationFormGroup),a.zb(4),a.Fc(" ",a.hc(5,7,"my-settings.notifications.gui")," "),a.zb(5),a.Fc(" ",a.hc(10,9,"my-settings.notifications.mail")," "),a.zb(5),a.Fc(" ",a.hc(15,11,"my-settings.notifications.phoneMobile")," "),a.zb(3),a.lc("disabled",a.hc(18,13,o.saving$)),a.zb(2),a.Fc(" ",a.hc(20,15,"my-settings.notifications.save")," "),a.zb(2),a.lc("ngIf",a.hc(22,17,o.saving$))}}function x(t,i){if(1&t&&(a.Sb(0,"div",1),a.Sb(1,"h5",2),a.Dc(2),a.gc(3,"translate"),a.Rb(),a.Bc(4,R,23,19,"form",3),a.Rb()),2&t){var n=i.erzLet;a.zb(2),a.Fc(" ",a.hc(3,2,"my-settings.notifications.title")," "),a.zb(2),a.lc("ngIf",n.notificationFormGroup)}}var F,$,I,D,V,J=function(t){return{notificationFormGroup:t}},L=(($=function(){function i(n,e,o,c){var s=this;t(this,i),this.settingsService=n,this.formBuilder=e,this.toastr=o,this.translate=c,this.notificationSettings$=this.settingsService.refetch.pipe(Object(h.a)(function(){return s.settingsService.getCurrentNotificationSettingsPropertyValue()})),this.notificationFormGroup$=this.notificationSettings$.pipe(Object(b.a)(this.createNotificationFormGroup.bind(this)),Object(k.a)(1)),this.saving$=new u.a(!1),this.submitted$=new u.a(!1)}return n(i,[{key:"createNotificationFormGroup",value:function(t){return this.formBuilder.group({notificationsGui:[t.gui],notificationsMail:[t.mail],notificationsPhoneMobile:[t.phoneMobile]})}},{key:"save",value:function(t,i,n){var e=this;this.saving$.next(!0),this.settingsService.updateCurrentNotificationSettingsPropertyValue(t,i,n).pipe(Object(O.a)(function(){return e.saving$.next(!1)})).subscribe(this.onSaveSuccess.bind(this))}},{key:"onSaveSuccess",value:function(){this.toastr.success(this.translate.instant("my-settings.notifications.save-success"))}},{key:"onSubmit",value:function(){var t=this;this.submitted$.next(!0),this.notificationFormGroup$.pipe(Object(z.a)(1)).subscribe(function(i){if(i.valid){var n=i.value,e=n.notificationsGui,o=n.notificationsMail,c=n.notificationsPhoneMobile;t.save(e,o,c)}})}}]),i}()).\u0275fac=function(t){return new(t||$)(a.Mb(j),a.Mb(M.c),a.Mb(w.b),a.Mb(G.d))},$.\u0275cmp=a.Gb({type:$,selectors:[["erz-my-settings-notifications"]],decls:2,vars:5,consts:[["class","border-bottom mb-3 pb-3",4,"erzLet"],[1,"border-bottom","mb-3","pb-3"],[1,"m-0","pb-3"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"checkbox"],["id","my-settings-notifications-gui","type","checkbox","formControlName","notificationsGui",1,"form-check-input"],["for","my-settings-notifications-gui",1,"pl-2"],["id","my-settings-notifications-mail","type","checkbox","formControlName","notificationsMail",1,"form-check-input"],["for","my-settings-notifications-mail",1,"pl-2"],["id","my-settings-notifications-phoneMobile","type","checkbox","formControlName","notificationsPhoneMobile",1,"form-check-input"],["for","my-settings-notifications-phoneMobile",1,"pl-2"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary","ml-2",3,"disabled"],["class","spinner-border spinner-border-sm align-middle","role","status",4,"ngIf"],["role","status",1,"spinner-border","spinner-border-sm","align-middle"],[1,"sr-only"]],template:function(t,i){1&t&&(a.Bc(0,x,5,4,"div",0),a.gc(1,"async")),2&t&&a.lc("erzLet",a.pc(3,J,a.hc(1,1,i.notificationFormGroup$)))},directives:[N.a,C.m,M.r,M.j,M.e,M.a,M.i,M.d],pipes:[C.b,G.c],styles:[".checkbox[_ngcontent-%COMP%]   input.form-check-input[_ngcontent-%COMP%]{position:static!important;margin:0!important}"],changeDetection:0}),$),B=((F=function(){function i(){t(this,i)}return n(i,[{key:"ngOnInit",value:function(){}}]),i}()).\u0275fac=function(t){return new(t||F)},F.\u0275cmp=a.Gb({type:F,selectors:[["erz-my-settings-show"]],decls:2,vars:0,consts:[[1,"erz-container","erz-container-limited","erz-container-padding-y"]],template:function(t,i){1&t&&(a.Sb(0,"div",0),a.Nb(1,"erz-my-settings-notifications"),a.Rb())},directives:[L],styles:[""]}),F),K=[{path:"",component:(I=function(){function i(){t(this,i)}return n(i,[{key:"ngOnInit",value:function(){}}]),i}(),I.\u0275fac=function(t){return new(t||I)},I.\u0275cmp=a.Gb({type:I,selectors:[["erz-my-settings"]],features:[a.yb([j])],decls:1,vars:0,template:function(t,i){1&t&&a.Nb(0,"router-outlet")},directives:[r.k],styles:[""],changeDetection:0}),I),children:[{path:"",component:B}]}],E=((V=function i(){t(this,i)}).\u0275fac=function(t){return new(t||V)},V.\u0275mod=a.Kb({type:V}),V.\u0275inj=a.Jb({imports:[[r.j.forChild(K)],r.j]}),V),U=((D=function i(){t(this,i)}).\u0275fac=function(t){return new(t||D)},D.\u0275mod=a.Kb({type:D}),D.\u0275inj=a.Jb({providers:[],imports:[[s.a,E]]}),D)}}])}();