import{a as oe}from"./chunk-5VYD6CSY.js";import"./chunk-DQAQYQ7K.js";import"./chunk-T6TSYWUT.js";import{c as R,d as B,f as M,h as U,z as K}from"./chunk-LGTM5FIB.js";import{Ab as $,Cc as O,Dc as D,Fb as b,Gb as p,La as H,Mb as w,Ob as S,Pb as E,Pc as q,Qb as C,Rb as i,Sb as o,Tb as c,Wd as J,Xb as G,Yd as v,Zb as u,Zd as L,_b as x,_d as j,ce as Q,ge as Y,hb as n,he as z,ie as W,je as X,kc as l,ke as Z,lc as A,le as ee,pa as y,pe as te,se as re,ub as F,ve as ie,wa as g,xa as T,xc as I}from"./chunk-GUP4UHKK.js";var pe=()=>["GET","POST","PUT","PATCH","DELETE"];function se(a,s){if(a&1&&(i(0,"option",4),l(1),o()),a&2){let t=s.$implicit;p("value",t),n(),A(t)}}function de(a,s){if(a&1){let t=G();i(0,"div",8)(1,"div",12)(2,"label",13),l(3,"Param:"),o()(),i(4,"div",12),c(5,"input",14),o(),i(6,"div",12)(7,"label",13),l(8,"Value:"),o()(),i(9,"div",12),c(10,"input",15),o(),i(11,"div",12)(12,"button",16),u("click",function(){let r=g(t).$index,d=x();return T(d.removeParam(r))}),l(13," Remove "),o()()()}if(a&2){let t=s.$implicit,e=s.$index;p("formGroup",t),n(2),b("for","param-key-"+e),n(3),p("id","param-key-"+e),n(2),b("for","param-value-"+e),n(3),p("id","param-value-"+e)}}function ce(a,s){if(a&1){let t=G();i(0,"div",8)(1,"div",12)(2,"label",13),l(3,"Header:"),o()(),i(4,"div",12),c(5,"input",14),o(),i(6,"div",12)(7,"label",13),l(8,"Value:"),o()(),i(9,"div",12),c(10,"input",15),o(),i(11,"div",12)(12,"button",16),u("click",function(){let r=g(t).$index,d=x();return T(d.removeHeader(r))}),l(13," Remove "),o()()()}if(a&2){let t=s.$implicit,e=s.$index;p("formGroup",t),n(2),b("for","header-key-"+e),n(3),p("id","header-key-"+e),n(2),b("for","header-value-"+e),n(3),p("id","header-value-"+e)}}function ue(a,s){a&1&&(i(0,"div",1)(1,"label",17),l(2,"JSON Body:"),o(),c(3,"textarea",18),o())}var ne="bkdApiRequest",ae=(()=>{class a{constructor(){this.fb=y(te),this.http=y(U),this.settings=y(K),this.formGroup=H(this.createFormGroup()),this.params=q(()=>this.formGroup().controls.params)}ngOnInit(){let t=this.restoreValue();if(t){let e=this.formGroup();e.reset(t),e.controls.params.clear(),t.params.forEach(r=>this.addParam(r)),e.controls.headers.clear(),t.headers.forEach(r=>this.addHeader(r))}}addParam({key:t="",value:e=""}={}){let{params:r}=this.formGroup().controls;r.push(this.createKeyValueGroup(t,e))}removeParam(t){let{params:e}=this.formGroup().controls;e.removeAt(t)}addHeader({key:t="",value:e=""}={}){let{headers:r}=this.formGroup().controls;r.push(this.createKeyValueGroup(t,e))}removeHeader(t){let{headers:e}=this.formGroup().controls;e.removeAt(t)}onSubmit(){let t=this.formGroup();if(t.valid){let{method:e,path:r,body:d,params:le,headers:me}=t.value;this.storeValue();let N=`${this.settings.apiUrl}${r}`,k=le?.reduce((m,{key:f,value:h})=>f?.trim()&&h?.trim()?m.set(f.trim(),h.trim()):m,new B),P=me?.reduce((m,{key:f,value:h})=>f?.trim()&&h?.trim()?m.set(f.trim(),h.trim()):m,new R),V=new M().set(oe,{disableErrorHandling:!0}),_=null;switch(e){case"GET":case"DELETE":_=this.http.request(e,N,{context:V,headers:P,params:k});break;case"POST":case"PUT":case"PATCH":_=this.http.request(e,N,{context:V,headers:P,params:k,body:d});break}_&&_.subscribe({next:m=>{console.log("Success:",m)},error:m=>{console.log("Error:",m)}})}}createFormGroup(){return this.fb.nonNullable.group({method:["GET",v.required],path:["",v.required],body:[""],params:this.fb.nonNullable.array([]),headers:this.fb.nonNullable.array([])})}createKeyValueGroup(t="",e=""){return this.fb.nonNullable.group({key:[t,v.required],value:[e,v.required]})}restoreValue(){let t=localStorage.getItem(ne);return t?JSON.parse(t):null}storeValue(){console.log(this.formGroup().value),localStorage.setItem(ne,JSON.stringify(this.formGroup().value))}static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275cmp=F({type:a,selectors:[["bkd-api"]],decls:28,vars:6,consts:[[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","method",1,"form-label"],["id","method","formControlName","method",1,"form-select"],[3,"value"],["for","path",1,"form-label"],["type","text","id","path","formControlName","path",1,"form-control"],["formArrayName","params",1,"mb-3"],[1,"row","g-3","align-items-center","mt-1",3,"formGroup"],["type","button",1,"btn","btn-secondary","mt-2",3,"click"],["formArrayName","headers",1,"mb-3"],["type","submit",1,"btn","btn-primary"],[1,"col-auto"],[1,"form-label"],["type","text","formControlName","key",1,"form-control",3,"id"],["type","text","formControlName","value",1,"form-control",3,"id"],["type","button",1,"btn","btn-secondary",3,"click"],["for","body",1,"form-label"],["id","body","formControlName","body","rows","10",1,"form-control"]],template:function(e,r){e&1&&(i(0,"h1"),l(1),O(2,"translate"),o(),i(3,"form",0),u("ngSubmit",function(){return r.onSubmit()}),i(4,"div",1)(5,"label",2),l(6,"Method:"),o(),i(7,"select",3),E(8,se,2,2,"option",4,S),o()(),i(10,"div",1)(11,"label",5),l(12,"Path:"),o(),c(13,"input",6),o(),i(14,"div",7),E(15,de,14,5,"div",8,S),i(17,"button",9),u("click",function(){return r.addParam()}),l(18," Add param "),o()(),i(19,"div",10),E(20,ce,14,5,"div",8,S),i(22,"button",9),u("click",function(){return r.addHeader()}),l(23," Add header "),o()(),$(24,ue,4,0,"div",1),i(25,"button",11),l(26,"Send"),o()(),c(27,"output")),e&2&&(n(),A(D(2,3,"api.title")),n(2),p("formGroup",r.formGroup()),n(5),C(I(5,pe)),n(7),C(r.params().controls),n(5),C(r.formGroup().controls.headers.controls),n(4),w(r.formGroup().controls.method.value==="POST"||r.formGroup().controls.method.value==="PUT"||r.formGroup().controls.method.value==="PATCH"?24:-1))},dependencies:[re,Q,Z,ee,J,X,L,j,Y,W,z,ie],styles:["[_nghost-%COMP%]{display:block;margin:1rem}"],changeDetection:0})}}return a})();var xe=[{path:"",component:ae}];export{xe as API_ROUTES};
