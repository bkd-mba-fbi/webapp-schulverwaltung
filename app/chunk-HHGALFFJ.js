import{v as b}from"./chunk-FTRAQKUW.js";import{a as g}from"./chunk-3AROKYRB.js";import{A as f,Gd as E,_ as i,bc as p,dc as m,j as t,l as u,rc as d}from"./chunk-T7QWSMKM.js";var S=new p(()=>({disableErrorHandling:!1,disableErrorHandlingForStatus:[]}));function R(){return(e,o)=>{let s=e.context.get(S);return o(e).pipe(f(h(s)))}}function h(e){let o=i(d),s=i(g),a=i(E);return r=>{if(r instanceof m&&!e.disableErrorHandling&&(!e.disableErrorHandlingForStatus||!e.disableErrorHandlingForStatus.includes(r.status)))switch(r.status){case 401:return n("noaccess"),o.navigate(["/unauthenticated"]),t;case 403:return n("noaccess"),o.navigate(["/dashboard"]),t;case 404:return n("notfound"),t;case 0:case 503:case 504:return n("unavailable"),t;case 409:return H(r),t;default:return n("server"),t}return u(()=>r)};function n(r){s.error(a.instant(`global.rest-errors.${r}-message`),a.instant(`global.rest-errors.${r}-title`))}function H(r){let c=a.instant("global.rest-errors.conflict-message"),l=v(r);s.error(l.length>0?l.join(`
`):c,a.instant("global.rest-errors.conflict-title"))}function v(r){return Array.isArray(r.error?.Issues)?r.error.Issues.map(c=>c?.Message).filter(b):[]}}export{S as a,R as b};
