import{l as H,m as U,n as z,s as J}from"./chunk-63NXKJIP.js";import{d as V}from"./chunk-BHASDBIA.js";import{a as O,b as q}from"./chunk-2JKGIYT3.js";import"./chunk-Y4QYVF5K.js";import"./chunk-QGDSASTQ.js";import"./chunk-2QS7YZBA.js";import{a as A}from"./chunk-DQZMQ4YX.js";import{a as Y}from"./chunk-DCZMTIC7.js";import"./chunk-AQYFD262.js";import{i as N}from"./chunk-YNODG5RP.js";import"./chunk-SNNR7FJ6.js";import"./chunk-EFJ6WEH7.js";import"./chunk-HVLHLZKP.js";import{b as G,h as M}from"./chunk-DQAQYQ7K.js";import{r as j,z as _}from"./chunk-ZXUJZ6KS.js";import{Ae as b,Cc as n,Dc as a,Gb as T,Hb as D,Ib as E,Nb as S,Ob as f,Pb as l,Qb as c,Xb as B,_ as F,ba as x,db as p,ic as g,id as I,ja as L,jc as h,l as w,oa as s,ob as m,rc as v,sc as y,tc as C,v as d,w as R,wc as $,xc as P}from"./chunk-GP622B77.js";var u=(()=>{let t=class t{constructor(){this.storageService=s(A),this.loadingService=s(O),this.coursesRestService=s(H),this.subscriptionRestService=s(Y),this.reportsService=s(V),this.gradingScalesRestService=s(U),this.settings=s(_),this.studentId$=new w(1),this.loading$=this.loadingService.loading$,this.studentCourses$=this.loadCourses().pipe(F(1)),this.studentCoursesSorted$=this.studentCourses$.pipe(d(e=>e.slice().sort((i,Z)=>i.Designation.localeCompare(Z.Designation)))),this.studentCourseIds$=this.studentCourses$.pipe(d(e=>e.flatMap(i=>i.Id))),this.subscriptionIds$=R([this.studentId$,this.studentCourseIds$]).pipe(x(([e,i])=>this.subscriptionRestService.getSubscriptionIdsByStudentAndCourse(e,i))),this.testReports$=this.subscriptionIds$.pipe(d(e=>this.reportsService.getStudentSubscriptionGradesReports(e))),this.tests$=this.studentCourses$.pipe(d(e=>e.flatMap(i=>i.Tests).filter(G))),this.gradingScaleIdsFromTests$=this.tests$.pipe(d(e=>[...e.map(i=>i.GradingScaleId)].filter(G).filter(M))),this.gradingScaleIdsFromCourses$=this.studentCourses$.pipe(d(e=>e.flatMap(i=>i.GradingScaleId).filter(G).filter(M))),this.gradingScaleIds$=R([this.gradingScaleIdsFromCourses$,this.gradingScaleIdsFromTests$]).pipe(d(([e,i])=>e.concat(i).filter(M))),this.gradingScales$=this.gradingScaleIds$.pipe(x(e=>this.gradingScalesRestService.getListForIds(e)));let o=this.storageService.getPayload()?.id_person;o&&this.studentId$.next(Number(o))}loadCourses(){return this.loadingService.load(this.coursesRestService.getExpandedCoursesForStudent())}};t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=L({token:t,factory:t.\u0275fac});let r=t;return r})();var ee=()=>[],K=(()=>{let t=class t{constructor(){this.myGradesService=s(u)}};t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=m({type:t,selectors:[["bkd-my-grades-header"]],decls:7,vars:7,consts:[[1,"d-flex","justify-content-between","header"],[3,"reports"]],template:function(e,i){e&1&&(f(0,"div",0)(1,"div"),g(2),n(3,"translate"),l(),f(4,"div"),c(5,"bkd-reports-link",1),n(6,"async"),l()()),e&2&&(p(2),h(a(3,2,"my-grades.header")),p(3),S("reports",a(6,4,i.myGradesService.testReports$)??P(6,ee)))},dependencies:[q,I,b],styles:[".header[_ngcontent-%COMP%]{padding-bottom:1rem}.report[_ngcontent-%COMP%]{margin-left:1rem}"]});let r=t;return r})();function te(r,t){r&1&&c(0,"bkd-spinner")}function ie(r,t){if(r&1&&c(0,"bkd-dossier-grades-view",1),r&2){B();let X=C(0),o=C(2),e=C(4);S("courses",X)("studentId",o)("gradingScales",e)("isEditable",!1)}}var Q=(()=>{let t=class t{constructor(){this.myGradesService=s(u)}};t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=m({type:t,selectors:[["bkd-my-grades-show"]],features:[$([z])],decls:14,vars:15,consts:[[1,"bkd-container","bkd-container-limited"],[3,"courses","studentId","gradingScales","isEditable"]],template:function(e,i){e&1&&(v(0),n(1,"async"),v(2),n(3,"async"),v(4),n(5,"async"),f(6,"div",0)(7,"h1"),g(8),n(9,"translate"),l(),c(10,"bkd-my-grades-header"),T(11,te,1,0,"bkd-spinner"),n(12,"async"),D(13,ie,1,4,"bkd-dossier-grades-view",1),l()),e&2&&(y(a(1,2,i.myGradesService.studentCoursesSorted$)),p(2),y(a(3,5,i.myGradesService.studentId$)),p(2),y(a(5,8,i.myGradesService.gradingScales$)),p(4),h(a(9,11,"my-grades.title")),p(3),E(a(12,13,i.myGradesService.loading$)?11:13))},dependencies:[K,J,N,I,b],encapsulation:2});let r=t;return r})();var W=(()=>{let t=class t{constructor(){}};t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=m({type:t,selectors:[["bkd-my-grades"]],features:[$([u])],decls:1,vars:0,template:function(e,i){e&1&&c(0,"router-outlet")},dependencies:[j],encapsulation:2});let r=t;return r})();var je=[{path:"",component:W,children:[{path:"",component:Q}]}];export{je as MY_GRADES_ROUTES};
