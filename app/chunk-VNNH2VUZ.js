import{$a as g,Eb as h,Ed as B,Id as I,Jc as o,Kc as f,Mc as R,Nd as _,Oc as k,P,Pc as b,Qa as M,Rc as L,Td as G,Wc as a,X as x,Xc as w,_ as c,_a as u,a as y,aa as d,ab as j,ad as E,b as v,ed as O,ib as D,jb as F,l as S,n as A,nc as $,o as C,rb as T,sb as U,ya as m}from"./chunk-TTJNYD2F.js";var z=(()=>{class i{constructor(){this.expanded=!1}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=d({type:i,selectors:[["bkd-caret"]],inputs:{expanded:"expanded"},standalone:!0,features:[h],decls:2,vars:1,consts:[["role","button",1,"d-flex","material-icons"]],template:function(e,r){e&1&&(u(0,"i",0),T(1),g()),e&2&&(m(),U(r.expanded?"expand_less":"expand_more"))},styles:["i[_ngcontent-%COMP%]:hover{color:#ea161f}"]})}}return i})();var q=["*"],W=(()=>{class i{constructor(){this.opened=!1}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=d({type:i,selectors:[["bkd-student-dossier-entry-header"]],inputs:{opened:"opened"},standalone:!0,features:[h],ngContentSelectors:q,decls:3,vars:1,consts:[[1,"m-0"],[1,"d-flex","align-items-center",3,"expanded"]],template:function(e,r){e&1&&(D(),u(0,"h5",0),F(1),g(),j(2,"bkd-caret",1)),e&2&&(m(2),M("expanded",r.opened))},dependencies:[z],styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem;border-top:1px solid #dee2e6;cursor:pointer}button[_ngcontent-%COMP%]{color:#000;text-decoration:none}.btn-link[_ngcontent-%COMP%]:hover{text-decoration:none}"],changeDetection:0})}}return i})();var K=b({Id:f,Title:o}),H=a(k(K));var lt=(()=>{class i{constructor(t,e,r){this.settings=t,this.storageService=e,this.http=r}getPersonMasterDataReports(t){return this.getAvailableReports("Person",this.settings.personMasterDataReports,[t])}getStudentConfirmationReports(t){return this.getAvailableReports("Praesenzinformation",this.settings.studentConfirmationReports,t)}getEvaluateAbsencesReports(t){return this.getAvailableReports("Praesenzinformation",this.settings.evaluateAbsencesReports,t)}getMyAbsencesReports(t){return this.getAvailableReports("Praesenzinformation",this.settings.myAbsencesReports,t)}getCourseTestsReports(t){return this.getAvailableReports("Anlass",this.settings.testsByCourseReports,[t])}getStudentSubscriptionGradesReports(t){return this.settings.testsBySubscriptionStudentReports.map((r,n)=>{let s=this.getReportUrl(r.type,"Anmeldung",r.id,t);return v(y({},r),{title:`Report ${n+1}`,url:s})})}getTeacherSubscriptionGradesReports(t){return this.settings.testsBySubscriptionTeacherReports.map((r,n)=>{let s=this.getReportUrl(r.type,"Anmeldung",r.id,t);return v(y({},r),{title:`Report ${n+1}`,url:s})})}getStudyClassStudentsReports(t){return this.getAvailableReports("Anlass",this.settings.studyClassStudentsReports,[t])}getCourseStudentsReports(t){return this.getAvailableReports("Anlass",this.settings.courseStudentsReports,[t])}getAvailableReports(t,e,r){let n=I(e,p=>p.type),s=C(Object.keys(n).map(p=>this.getAvailableReportsForType(p,t,n[p].map(({id:l})=>l),r)));return this.mergeAvailableReports(s,e)}getAvailableReportsForType(t,e,r,n){return n.length===0?S([]):this.http.get(this.getReportAvailabilityUrl(t,e,r,n)).pipe(P(_(H)),A(s=>s?s.map(({Id:p,Title:l})=>({type:t,id:p,title:l,url:this.getReportUrl(t,e,p,n)})):[]))}mergeAvailableReports(t,e){return t.pipe(A(r=>{let n=B(r);return e.reduce((s,p)=>{let l=n.find(({id:X})=>X===p.id);return l?[...s,l]:s},[])}))}getReportUrl(t,e,r,n){let s=new URL(`${this.settings.apiUrl}/Files/${this.getReportTypePathPart(t)}/${e}/${r}`);return s.searchParams.set("ids",n.join(",")),s.searchParams.set("token",this.storageService.getAccessToken()??""),s.toString()}getReportAvailabilityUrl(t,e,r,n){let s=new URL(`${this.settings.apiUrl}/${this.getReportTypePathPart(t)}/AvailableReports/${e}`);return s.searchParams.set("ids",Array.isArray(r)?r.join(","):String(r)),s.searchParams.set("keys",n.join(",")),s.toString()}getReportTypePathPart(t){return`${t[0].toUpperCase()+t.slice(1)}Reports`}static{this.\u0275fac=function(e){return new(e||i)(c(O),c(G),c($))}}static{this.\u0275prov=x({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var ut=b({Id:f,AddressLine1:a(o),AddressLine2:w(o),Birthdate:a(E),DisplayEmail:a(o),FirstName:o,FullName:o,Gender:L([R("M"),R("F"),R("X")]),LastName:o,Location:a(o),PhoneMobile:a(o),PhonePrivate:a(o),PostalCode:a(o)});export{z as a,W as b,ut as c,lt as d};
