import{$b as F,$c as S,Fa as _,Hb as D,Jb as I,Lc as f,Mc as v,Sb as o,Tb as a,Wc as h,Xc as M,ac as w,cc as c,dc as y,fb as r,je as V,lc as b,mc as x,nc as L,pc as m,rc as l,sa as s,sc as g,ta as p,ub as C}from"./chunk-CHBP6U4G.js";var T=["fileInput"];function P(i,z){if(i&1&&(o(0,"div",3),l(1),a()),i&2){let e=y();r(),g(e.error())}}var j=(()=>{class i{constructor(){this.acceptedExtensions=h.required(),this.error=h(null),this.file=S(null),this.dragging=_(!1),this.dragCount=0,this.fileInput=M.required("fileInput"),this.onDragEnter=()=>{this.dragCount+=1,this.dragCount===1&&this.dragging.set(!0)},this.onDragLeave=()=>{this.dragCount-=1,this.dragCount===0&&this.dragging.set(!1)}}ngAfterViewInit(){document.addEventListener("dragenter",this.onDragEnter),document.addEventListener("dragleave",this.onDragLeave)}ngOnDestroy(){document.removeEventListener("dragenter",this.onDragEnter),document.removeEventListener("dragleave",this.onDragLeave)}onFileInput(e){this.file.set(e?.item(0)??null)}onFileDrag(e){e.preventDefault()}onFileDrop(e){e.preventDefault(),this.dragCount=0,this.dragging.set(!1);let n=this.fileInput().nativeElement;n.files=e.dataTransfer?.files??null,n.dispatchEvent(new Event("change"))}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=C({type:i,selectors:[["bkd-file-input"]],viewQuery:function(n,t){n&1&&b(t.fileInput,T,5),n&2&&x()},inputs:{acceptedExtensions:[1,"acceptedExtensions"],error:[1,"error"],file:[1,"file"]},outputs:{file:"fileChange"},decls:13,vars:14,consts:[["fileInput",""],["for","formFile",1,"form-label"],["type","file","id","formFile",1,"form-control",3,"change","accept"],[1,"invalid-feedback"],["id","drop-zone",3,"drop","dragover"],[1,"material-icons"]],template:function(n,t){if(n&1){let u=F();o(0,"label",1),l(1),f(2,"translate"),a(),o(3,"input",2,0),c("change",function(){s(u);let d=L(4);return p(t.onFileInput(d.files))}),a(),D(5,P,2,1,"div",3),o(6,"div",4,0),c("drop",function(d){return s(u),p(t.onFileDrop(d))})("dragover",function(d){return s(u),p(t.onFileDrag(d))}),o(8,"i",5),l(9,"cloud_upload"),a(),o(10,"span"),l(11),f(12,"translate"),a()()}n&2&&(r(),g(v(2,10,"shared.file-input.input-label")),r(2),m("is-valid",t.file()&&!t.error())("is-invalid",t.error()),w("accept",t.acceptedExtensions().join(",")),r(2),I(t.error()?5:-1),r(),m("dragging",t.dragging()),r(5),g(v(12,12,"shared.file-input.drop-zone-label")))},dependencies:[V],styles:["#drop-zone[_ngcontent-%COMP%]{border:2px dashed #adb5bd;display:none;flex-direction:column;justify-content:center;align-items:center;padding:5rem;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1055;background:#dededee6}#drop-zone.dragging[_ngcontent-%COMP%]{display:flex}"],changeDetection:0})}}return i})();export{j as a};
