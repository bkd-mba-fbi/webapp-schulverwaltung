import{a as $e,b as Be,c as Le,d as De,e as Re}from"./chunk-Q6B7WJUC.js";import"./chunk-OF7YQV6U.js";import{c as Ae,d as Fe}from"./chunk-32YM3WGR.js";import"./chunk-VCHCEGK6.js";import"./chunk-DJY5YSXI.js";import{a as Y}from"./chunk-IDHYLWS2.js";import{j as Te}from"./chunk-JIKP4RQI.js";import{a as ke}from"./chunk-CN5U6A34.js";import"./chunk-XZ5YH2US.js";import{d as Ie}from"./chunk-Z7WVESUI.js";import"./chunk-5DF2F6N3.js";import{i as Ve}from"./chunk-EM55JINF.js";import{a as U,b,c as ge,d as xe,e as Se,f as be,g as Pe}from"./chunk-UPBUIITP.js";import"./chunk-PWSL3Z3Z.js";import{b as Ee}from"./chunk-DQAQYQ7K.js";import{a as Me}from"./chunk-SMJAVNKU.js";import{$a as y,$b as j,Ab as C,Ba as i,Bb as _,Cb as oe,Cd as ue,D as K,Db as re,Gd as _e,Hc as le,Ib as L,Ic as pe,Id as ye,Jb as I,Jc as se,Kb as v,La as x,Lb as ae,M as Q,Mb as G,P as O,Qd as ve,R as X,Rb as s,Rd as he,S as T,Sa as h,Sb as d,Sd as Ce,Tb as V,Ua as ie,Va as c,Xa as ne,_ as ee,bb as W,be as we,ca as g,cb as A,ce as D,db as B,eb as r,fb as o,g as N,gb as m,ha as M,ia as w,kb as E,lc as H,m as $,mb as k,mc as q,n as Z,nb as f,ta as te,ud as de,wd as me,xd as ce,yb as S,yd as fe,z as J,zb as l}from"./chunk-5J7UGDDX.js";var R=(()=>{class e{constructor(){this.storageService=g(ke),this.profileService=g($e),this.reloadStudent$=new N(void 0),this.person$=this.reloadStudent$.pipe(T(()=>this.loadPerson()),O(1)),this.loadingPerson$=this.profileService.loadingMyself$,this.legalRepresentatives$=this.person$.pipe(T(t=>t&&this.isStudent()?this.profileService.getLegalRepresentatives(t):$(null)),O(1)),this.loadingLegalRepresentatives$=this.profileService.loadingLegalRepresentatives$,this.apprenticeships$=this.person$.pipe(T(t=>t&&this.isStudent()?this.profileService.getApprenticeships(t.Id):$(null)),O(1)),this.loadingApprenticeships$=this.profileService.loadingApprenticeships$,this.stayPermit$=this.person$.pipe(T(t=>t?this.profileService.getStayPermitValue(t.StayPermit):$(null))),this.loadingStayPermit$=this.profileService.loadingStayPermit$}reloadStudent(){this.reloadStudent$.next()}loadPerson(){return this.profileService.getMyself().pipe(K(t=>t.status===403?$(null):Z(()=>t)))}isStudent(){return(this.storageService.getPayload()?.roles?.split(";")??[]).includes("StudentRole")}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=ee({token:e,factory:e.\u0275fac})}}return e})();function ze(e,p){if(e&1&&(r(0,"div"),l(1),o()),e&2){f(2);let t=v(1);i(),_(" ",t.AddressLine2," ")}}function We(e,p){if(e&1&&(r(0,"div",5),l(1),s(2,"translate"),o()),e&2){let t=p.$implicit;i(),_(" ",V(2,1,"global.validation-errors."+t.error,t.params)," ")}}function Ye(e,p){if(e&1&&(r(0,"div",13),l(1),s(2,"translate"),o()),e&2){let t=p.$implicit;i(),_(" ",V(2,1,"global.validation-errors."+t.error,t.params)," ")}}function Ze(e,p){e&1&&(r(0,"div",18)(1,"span",19),l(2,"Loading..."),o()())}function Je(e,p){if(e&1){let t=E();r(0,"form",2),k("ngSubmit",function(){M(t);let a=f();return w(a.onSubmit())}),r(1,"div",3)(2,"p"),l(3),s(4,"translate"),o(),r(5,"address",4)(6,"div"),l(7),o(),h(8,ze,2,1,"div"),r(9,"div"),l(10),o()()(),A(11,We,3,4,"div",5,W),s(13,"async"),r(14,"div",3)(15,"label",6),l(16),s(17,"translate"),o(),m(18,"input",7),o(),r(19,"div",3)(20,"label",8),l(21),s(22,"translate"),o(),m(23,"input",9),r(24,"small",10),l(25),s(26,"translate"),o()(),r(27,"div",3)(28,"label",11),l(29),s(30,"translate"),o(),m(31,"input",12),s(32,"async"),A(33,Ye,3,4,"div",13,W),s(35,"async"),r(36,"small",14),l(37),s(38,"translate"),o()(),r(39,"div",15)(40,"button",16),s(41,"async"),k("click",function(){M(t);let a=f();return w(a.cancel())}),l(42),s(43,"translate"),o(),r(44,"button",17),s(45,"async"),l(46),s(47,"translate"),h(48,Ze,3,0,"div",18),s(49,"async"),o()()()}if(e&2){let t,n=f(),a=v(0),u=v(1);c("formGroup",a),i(3),C(d(4,18,"my-profile.edit.address-changes-remark")),i(4),C(u.AddressLine1),i(),y(u.AddressLine2?8:-1),i(2),oe("",u.Zip||""," ",u.Location,""),i(),B(d(13,20,n.formErrors$)),i(5),_(" ",d(17,22,"my-profile.edit.fields.phone-private")," "),i(5),_(" ",d(22,24,"my-profile.edit.fields.phone-mobile")," "),i(4),C(d(26,26,"my-profile.edit.fields.phone-mobile-hint")),i(4),_(" ",d(30,28,"my-profile.edit.fields.email2")," "),i(2),ne("is-invalid",((t=(t=d(32,30,n.email2Errors$))==null?null:t.length)!==null&&t!==void 0?t:0)>0),i(2),B(d(35,32,n.email2Errors$)),i(4),C(d(38,34,"my-profile.edit.fields.email2-hint")),i(3),c("disabled",d(41,36,n.saving$)),i(2),_(" ",d(43,38,"my-profile.edit.cancel")," "),i(2),c("disabled",d(45,40,n.saving$)),i(2),_(" ",d(47,42,"my-profile.edit.save")," "),i(2),y(d(49,44,n.saving$)?48:-1)}}var Ne=(()=>{class e{constructor(){this.fb=g(ve),this.router=g(pe),this.toastService=g(Me),this.translate=g(we),this.profileService=g(R),this.personsService=g(Ie),this.person=b(this.profileService.person$,{initialValue:null}),this.formGroup=j(()=>this.createFormGroup(this.person())),this.formGroup$=U(this.formGroup).pipe(J(Ee)),this.saving$=new N(!1),this.submitted$=new N(!1),this.formErrors$=Y(this.formGroup$,this.submitted$),this.email2Errors$=Y(this.formGroup$,this.submitted$,"email2")}cancel(){this.navigateBack()}onSubmit(){this.submitted$.next(!0);let t=this.formGroup();if(t?.valid){let{phonePrivate:n,phoneMobile:a,email2:u}=t.value;this.save(n?.trim()||null,a?.trim()||null,u||null)}}createFormGroup(t){return t?this.fb.group({phonePrivate:[t.PhonePrivate],phoneMobile:[t.PhoneMobile],email2:[t.Email2,me.email]}):null}save(t,n,a){let u=this.person();u&&(this.saving$.next(!0),this.personsService.update(u.Id,t,n,a).pipe(Q(()=>this.saving$.next(!1))).subscribe(this.onSaveSuccess.bind(this)))}onSaveSuccess(){this.profileService.reloadStudent(),this.toastService.success(this.translate.instant("my-profile.edit.save-success")),this.navigateBack()}navigateBack(){this.router.navigate(["/my-profile"])}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=x({type:e,selectors:[["bkd-my-profile-edit"]],decls:7,vars:6,consts:[[1,"bkd-container","bkd-container-limited"],[3,"formGroup"],[3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"text-muted"],[1,"alert","alert-danger"],["id","my-profile-phone-private",1,"form-label"],["id","my-profile-phone-private","formControlName","phonePrivate","type","tel",1,"form-control"],["id","my-profile-phone-mobile",1,"form-label"],["id","my-profile-phone-mobile","formControlName","phoneMobile","type","tel","aria-describedby","my-profile-phone-mobile-hint",1,"form-control"],["id","my-profile-phone-mobile-hint",1,"form-text"],["for","my-profile-email2",1,"form-label"],["id","my-profile-email2","formControlName","email2","type","email","aria-describedby","my-profile-email2-hint",1,"form-control"],[1,"invalid-feedback"],["id","my-profile-email2-hint",1,"form-text"],[1,"d-flex","justify-content-end"],["type","button",1,"btn","btn-outline-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary","ms-2",3,"disabled"],["role","status",1,"spinner-border","spinner-border-sm","align-middle"],[1,"visually-hidden"]],template:function(n,a){if(n&1&&(L(0)(1),r(2,"div",0)(3,"h1"),l(4),s(5,"translate"),o(),h(6,Je,50,46,"form",1),o()),n&2){let u=I(a.formGroup());i();let P=I(a.person());i(3),C(d(5,4,"my-profile.edit.title")),i(2),y(u&&P?6:-1)}},dependencies:[he,ue,de,ce,fe,Ce,_e,ye,H,D],encapsulation:2,changeDetection:0})}}return e})();var Ge=(()=>{class e{constructor(){}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=x({type:e,selectors:[["bkd-my-profile-address"]],inputs:{address:"address"},decls:2,vars:1,template:function(n,a){n&1&&(r(0,"address"),l(1),o()),n&2&&(i(),C(a.address))},styles:["[_nghost-%COMP%]{padding:1rem}address[_ngcontent-%COMP%]{white-space:pre-wrap}"],changeDetection:0})}}return e})();var Oe=(()=>{class e{constructor(){}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=x({type:e,selectors:[["bkd-my-profile-entry"]],inputs:{label:"label",value:"value"},decls:6,vars:4,consts:[[1,"row"],[1,"col-md-6"]],template:function(n,a){n&1&&(r(0,"dl",0)(1,"dt",1),l(2),s(3,"translate"),o(),r(4,"dd",1),l(5),o()()),n&2&&(i(2),C(d(3,2,a.label)),i(3),C(a.value))},dependencies:[D],styles:["dl[_ngcontent-%COMP%]{padding:0 1rem}dt[_ngcontent-%COMP%]{font-weight:400;color:#00000080}"],changeDetection:0})}}return e})();function Ke(e,p){if(e&1&&(r(0,"span"),l(1),o()),e&2){f(2);let t=v(0);i(),_("(",t.Gender,")")}}function Qe(e,p){if(e&1&&(r(0,"div",0)(1,"div",1),m(2,"bkd-avatar",2),r(3,"div",3),l(4),h(5,Ke,2,1,"span"),r(6,"div",4),l(7),s(8,"date"),o()()(),m(9,"bkd-reports-link",5),s(10,"async"),o(),r(11,"div",6),l(12),o()),e&2){let t=f(),n=v(0);i(2),c("studentId",n.Id),i(2),re(" ",n.LastName," ",n.FirstName," ",n.MiddleName," "),i(),y(n.Gender?5:-1),i(2),_(" ",V(8,8,n.Birthdate,"dd.MM.yyyy")," "),i(2),c("reports",d(10,11,t.reports$)),i(3),C(n.Email)}}var je=(()=>{class e{constructor(){this.reportsService=g(Fe),this.person=te(),this.personId=j(()=>this.person()?.Id??null),this.reports$=U(this.personId).pipe(T(t=>t?this.reportsService.getPersonMasterDataReports(t):$([])),X([]))}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=x({type:e,selectors:[["bkd-my-profile-header"]],inputs:{person:[1,"person"]},decls:2,vars:2,consts:[[1,"avatar-person"],[1,"d-flex"],[1,"me-3","avatar","large",3,"studentId"],[1,"person"],[1,"birthdate"],[3,"reports"],[1,"email"]],template:function(n,a){if(n&1&&(L(0),h(1,Qe,13,13)),n&2){let u=I(a.person());i(),y(u?1:-1)}},dependencies:[Re,Te,H,q],styles:[".avatar-person[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-left:1rem 1rem 1rem 0}.person[_ngcontent-%COMP%]{align-self:center}.email[_ngcontent-%COMP%]{padding:1rem 1rem 0 0}.report[_ngcontent-%COMP%]{align-self:flex-start;line-height:1}"],changeDetection:0})}}return e})();var Xe=(e,p)=>p.apprenticeshipContract.Id,et=(e,p)=>p.Id,z=()=>[];function tt(e,p){e&1&&m(0,"bkd-spinner")}function it(e,p){e&1&&(r(0,"p",7),l(1),s(2,"translate"),o()),e&2&&(i(),_(" ",d(2,1,"shared.profile.substitution-profile")," "))}function nt(e,p){if(e&1&&m(0,"bkd-my-profile-entry",11),e&2){f(2);let t=v(0);c("value",t.SocialSecurityNumber)}}function ot(e,p){if(e&1&&m(0,"bkd-my-profile-entry",12),e&2){f(2);let t=v(0);c("value",t.HomeTown||t.Nationality)}}function rt(e,p){if(e&1&&m(0,"bkd-my-profile-entry",13),e&2){f(2);let t=v(0);c("value",t.NativeLanguage)}}function at(e,p){e&1&&m(0,"bkd-spinner",14)}function lt(e,p){if(e&1&&m(0,"bkd-my-profile-entry",15),e&2){f(2);let t=v(1);c("value",t)}}function pt(e,p){if(e&1&&(m(0,"bkd-my-profile-entry",16),s(1,"date")),e&2){f(2);let t=v(0);c("value",V(1,1,t.StayPermitExpiry,"mediumDate"))}}function st(e,p){if(e&1&&(r(0,"div",24)(1,"a",25),s(2,"translate"),r(3,"i",26),l(4,"edit"),o()(),m(5,"bkd-student-dossier-address",27),o()),e&2){f(2);let t=v(0);i(),ie("aria-label",d(2,2,"my-profile.edit.title")),i(4),c("student",t)}}function dt(e,p){if(e&1&&m(0,"bkd-my-profile-address",28),e&2){f(3);let t=v(0);c("address",t.CorrespondenceAddress)}}function mt(e,p){if(e&1){let t=E();r(0,"div",18,1)(2,"div",19)(3,"bkd-student-dossier-entry-header",20),k("click",function(){M(t);let a=S(1);return w(a.toggle())}),l(4),s(5,"translate"),o()(),r(6,"div",21)(7,"div",22),h(8,dt,1,1,"ng-template"),o()()()}if(e&2){let t=S(1);i(3),c("opened",!t.collapsed),i(),_(" ",d(5,2,"shared.profile.correspondence-address")," ")}}function ct(e,p){if(e&1&&m(0,"bkd-my-profile-address",28),e&2){f(3);let t=v(0);c("address",t.BillingAddress)}}function ft(e,p){if(e&1){let t=E();r(0,"div",18,2)(2,"div",19)(3,"bkd-student-dossier-entry-header",20),k("click",function(){M(t);let a=S(1);return w(a.toggle())}),l(4),s(5,"translate"),o()(),r(6,"div",21)(7,"div",22),h(8,ct,1,1,"ng-template"),o()()()}if(e&2){let t=S(1);i(3),c("opened",!t.collapsed),i(),_(" ",d(5,2,"shared.profile.billing-address")," ")}}function ut(e,p){e&1&&m(0,"bkd-spinner",14)}function _t(e,p){if(e&1&&m(0,"bkd-student-dossier-legal-representative",29),e&2){let t=p.$implicit;c("person",t)}}function yt(e,p){if(e&1&&A(0,_t,1,1,"bkd-student-dossier-legal-representative",29,et),e&2){let t,n=f(3);B((t=n.legalRepresentatives())!==null&&t!==void 0?t:G(0,z))}}function vt(e,p){if(e&1){let t=E();r(0,"div",18,3)(2,"div",19)(3,"bkd-student-dossier-entry-header",20),k("click",function(){M(t);let a=S(1);return w(a.toggle())}),l(4),s(5,"translate"),o()(),r(6,"div",21)(7,"div",22),h(8,yt,2,1,"ng-template"),o()()()}if(e&2){let t=S(1);i(3),c("opened",!t.collapsed),i(),_(" ",d(5,2,"shared.profile.legal-representation")," ")}}function ht(e,p){e&1&&m(0,"bkd-spinner",14)}function Ct(e,p){if(e&1&&l(0),e&2){let t=f().$index;_(" ",t+1," ")}}function gt(e,p){if(e&1&&m(0,"bkd-student-dossier-apprenticeship",30),e&2){let t=f().$implicit;c("apprenticeship",t)}}function xt(e,p){if(e&1){let t=E();r(0,"div",23,4)(2,"div",19)(3,"bkd-student-dossier-entry-header",20),k("click",function(){M(t);let a=S(1);return w(a.toggle())}),l(4),s(5,"translate"),h(6,Ct,1,1),o()(),r(7,"div",21)(8,"div",22),h(9,gt,1,1,"ng-template"),o()()()}if(e&2){let t,n=S(1),a=f(2);i(3),c("opened",!n.collapsed),i(),_(" ",d(5,3,"shared.profile.apprenticeship-company")," "),i(2),y(((t=a.apprenticeships())!==null&&t!==void 0?t:G(5,z)).length>1?6:-1)}}function St(e,p){if(e&1){let t=E();m(0,"bkd-my-profile-header",8),r(1,"div",9)(2,"div",10),h(3,nt,1,1,"bkd-my-profile-entry",11)(4,ot,1,1,"bkd-my-profile-entry",12)(5,rt,1,1,"bkd-my-profile-entry",13)(6,at,1,0,"bkd-spinner",14)(7,lt,1,1,"bkd-my-profile-entry",15)(8,pt,2,4,"bkd-my-profile-entry",16),o(),r(9,"div",17)(10,"div",18,0)(12,"div",19)(13,"bkd-student-dossier-entry-header",20),k("click",function(){M(t);let a=S(11);return w(a.toggle())}),l(14),s(15,"translate"),o()(),r(16,"div",21)(17,"div",22),h(18,st,6,4,"ng-template"),o()()(),h(19,mt,9,4,"div",18)(20,ft,9,4,"div",18)(21,ut,1,0,"bkd-spinner",14)(22,vt,9,4,"div",18)(23,ht,1,0,"bkd-spinner",14),A(24,xt,10,6,"div",23,Xe),o()()}if(e&2){let t,n,a=S(11),u=f(),P=v(0),Ue=v(1);c("person",P),i(3),y(P.SocialSecurityNumber?3:-1),i(),y(P.HomeTown||P.Nationality?4:-1),i(),y(P.NativeLanguage?5:-1),i(),y(u.loadingStayPermit()?6:Ue?7:-1),i(2),y(P.StayPermitExpiry?8:-1),i(5),c("opened",!a.collapsed),i(),_(" ",d(15,12,"shared.profile.student-address")," "),i(5),y(P.CorrespondenceAddress?19:-1),i(),y(P.BillingAddress?20:-1),i(),y(u.loadingLegalRepresentatives()?21:((t=u.legalRepresentatives())!==null&&t!==void 0?t:G(14,z)).length>0?22:-1),i(2),y(u.loadingApprenticeships()?23:-1),i(),B((n=u.apprenticeships())!==null&&n!==void 0?n:G(15,z))}}var He=(()=>{class e{constructor(){this.profileService=g(R),this.person=b(this.profileService.person$,{initialValue:null}),this.loadingPerson=b(this.profileService.loadingPerson$,{requireSync:!0}),this.legalRepresentatives=b(this.profileService.legalRepresentatives$,{initialValue:null}),this.loadingLegalRepresentatives=b(this.profileService.loadingLegalRepresentatives$,{requireSync:!0}),this.apprenticeships=b(this.profileService.apprenticeships$),this.loadingApprenticeships=b(this.profileService.loadingApprenticeships$,{requireSync:!0}),this.stayPermit=b(this.profileService.stayPermit$,{initialValue:null}),this.loadingStayPermit=b(this.profileService.loadingStayPermit$,{requireSync:!0})}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=x({type:e,selectors:[["bkd-my-profile-show"]],decls:9,vars:6,consts:[["studentAddress","ngbAccordionItem"],["correspondenceAddress","ngbAccordionItem"],["billingAddress","ngbAccordionItem"],["legalRepresentativesItem","ngbAccordionItem"],["apprenticeshipCompanies","ngbAccordionItem"],[1,"bkd-container","bkd-container-limited"],["data-testid","profile-title"],["data-testid","profile-substitution"],[3,"person"],["data-testid","profile-content",1,"profile-content"],[1,"profile-entries","pt-3"],["label","my-profile.show.social-security-number",3,"value"],["label","my-profile.show.hometown-nationality",3,"value"],["label","my-profile.show.native-language",3,"value"],[1,"small"],["label","my-profile.show.stay-permit",3,"value"],["label","my-profile.show.stay-permit-expiry",3,"value"],["ngbAccordion",""],["ngbAccordionItem",""],["ngbAccordionHeader",""],[3,"click","opened"],["ngbAccordionCollapse",""],["ngbAccordionBody",""],[3,"ngbAccordionItem"],[1,"clearfix"],["routerLink","edit",1,"btn","btn-primary","btn-icon","float-end","me-2"],[1,"material-icons"],["emailProperty","Email2",1,"profile-entry",3,"student"],[1,"profile-entry",3,"address"],[1,"profile-entry",3,"person"],[1,"profile-entry",3,"apprenticeship"]],template:function(n,a){if(n&1&&(L(0)(1),r(2,"div",5)(3,"h1",6),l(4),s(5,"translate"),o(),h(6,tt,1,0,"bkd-spinner")(7,it,3,3,"p",7)(8,St,26,16),o()),n&2){let u=I(a.person());i(),I(a.stayPermit()),i(3),C(d(5,4,"my-profile.title")),i(2),y(a.loadingPerson()?6:u?8:7)}},dependencies:[je,Oe,Pe,be,Se,Ae,xe,ge,se,Be,Ge,De,Le,Ve,q,D],styles:[".profile-content[_ngcontent-%COMP%]{padding-top:1rem}.profile-entry[_ngcontent-%COMP%]{display:block;padding:0 1rem}.profile-entries[_ngcontent-%COMP%]:not(:empty){border-top:1px solid rgb(222,222,222)}"],changeDetection:0})}}return e})();var qe=(()=>{class e{constructor(){}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=x({type:e,selectors:[["bkd-my-profile"]],features:[ae([R])],decls:1,vars:0,template:function(n,a){n&1&&m(0,"router-outlet")},dependencies:[le],encapsulation:2,changeDetection:0})}}return e})();var Ti=[{path:"",component:qe,children:[{path:"",component:He},{path:"edit",component:Ne}]}];export{Ti as MY_PROFILE_ROUTES};
