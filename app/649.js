"use strict";(self.webpackChunkwebapp_schulverwaltung=self.webpackChunkwebapp_schulverwaltung||[]).push([[649],{6649:(Re,ot,r)=>{r.d(ot,{O:()=>et,f:()=>Me});var Z=r(1135),A=r(7579),p=r(6451),lt=r(9841),u=r(4004),ct=r(9300),m=r(1884),b=r(4782),S=r(9718),x=r(5026),gt=r(8372),ft=r(4351),ht=r(4813),ut=r(2722),I=r(5698),dt=r(5343);var yt=r(3858);const P=function(){try{var t=(0,yt.Z)(Object,"defineProperty");return t({},"",{}),t}catch(n){}}(),E=function Tt(t,n,e){"__proto__"==n&&P?P(t,n,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[n]=e};var At=r(3093),$t=Object.prototype.hasOwnProperty;const F=function jt(t,n,e){var s=t[n];(!$t.call(t,n)||!(0,At.Z)(s,e)||void 0===e&&!(n in t))&&E(t,n,e)},y=function Ct(t,n,e,s){var g=!e;e||(e={});for(var l=-1,i=n.length;++l<i;){var o=n[l],c=s?s(e[o],t[o],o,e,t):void 0;void 0===c&&(c=t[o]),g?E(e,o,c):F(e,o,c)}return e};var L=r(4157);var mt=r(3487),$=r(1999),U=r(1986);var Et=Object.prototype.hasOwnProperty;const Lt=function Ft(t){if(!(0,$.Z)(t))return function xt(t){var n=[];if(null!=t)for(var e in Object(t))n.push(e);return n}(t);var n=(0,U.Z)(t),e=[];for(var s in t)"constructor"==s&&(n||!Et.call(t,s))||e.push(s);return e};var Ut=r(8706);const j=function Mt(t){return(0,Ut.Z)(t)?(0,mt.Z)(t,!0):Lt(t)};var Rt=r(5946),M="object"==typeof exports&&exports&&!exports.nodeType&&exports,B=M&&"object"==typeof module&&module&&!module.nodeType&&module,D=B&&B.exports===M?Rt.Z.Buffer:void 0,R=D?D.allocUnsafe:void 0;var K=r(3976);var Ht=r(6623);const N=(0,r(5820).Z)(Object.getPrototypeOf,Object);var wt=r(3419);const G=Object.getOwnPropertySymbols?function(t){for(var n=[];t;)(0,Ht.Z)(n,(0,K.Z)(t)),t=N(t);return n}:wt.Z;var tn=r(8501),nn=r(8203);const rn=function en(t){return(0,nn.Z)(t,j,G)};var C=r(7183),an=Object.prototype.hasOwnProperty;var V=r(1630);const O=function cn(t){var n=new t.constructor(t.byteLength);return new V.Z(n).set(new V.Z(t)),n};var hn=/\w*$/;var X=r(8492),Y=X.Z?X.Z.prototype:void 0,W=Y?Y.valueOf:void 0;const Kn=function Rn(t,n,e){var s=t.constructor;switch(n){case"[object ArrayBuffer]":return O(t);case"[object Boolean]":case"[object Date]":return new s(+t);case"[object DataView]":return function gn(t,n){var e=n?O(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}(t,e);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function yn(t,n){var e=n?O(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}(t,e);case"[object Map]":case"[object Set]":return new s;case"[object Number]":case"[object String]":return new s(t);case"[object RegExp]":return function un(t){var n=new t.constructor(t.source,hn.exec(t));return n.lastIndex=t.lastIndex,n}(t);case"[object Symbol]":return function pn(t){return W?Object(W.call(t)):{}}(t)}};var H=Object.create;const Gn=function(){function t(){}return function(n){if(!(0,$.Z)(n))return{};if(H)return H(n);t.prototype=n;var e=new t;return t.prototype=void 0,e}}();var Yn=r(4177),Wn=r(5202),J=r(214);var Q=r(6932),v=r(6594),w=v.Z&&v.Z.isMap;const zn=w?(0,Q.Z)(w):function Jn(t){return(0,J.Z)(t)&&"[object Map]"==(0,C.Z)(t)};var z=v.Z&&v.Z.isSet;const ne=z?(0,Q.Z)(z):function kn(t){return(0,J.Z)(t)&&"[object Set]"==(0,C.Z)(t)};var q="[object Arguments]",k="[object Function]",_="[object Object]",a={};a[q]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object DataView]"]=a["[object Boolean]"]=a["[object Date]"]=a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Map]"]=a["[object Number]"]=a[_]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object Symbol]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Error]"]=a[k]=a["[object WeakMap]"]=!1;const xe=function T(t,n,e,s,g,l){var i,o=1&n,c=2&n,Be=4&n;if(e&&(i=g?e(t,s,g,l):e(t)),void 0!==i)return i;if(!(0,$.Z)(t))return t;var rt=(0,Yn.Z)(t);if(rt){if(i=function on(t){var n=t.length,e=new t.constructor(n);return n&&"string"==typeof t[0]&&an.call(t,"index")&&(e.index=t.index,e.input=t.input),e}(t),!o)return function Vt(t,n){var e=-1,s=t.length;for(n||(n=Array(s));++e<s;)n[e]=t[e];return n}(t,i)}else{var d=(0,C.Z)(t),st=d==k||"[object GeneratorFunction]"==d;if((0,Wn.Z)(t))return function Nt(t,n){if(n)return t.slice();var e=t.length,s=R?R(e):new t.constructor(e);return t.copy(s),s}(t,o);if(d==_||d==q||st&&!g){if(i=c||st?{}:function Vn(t){return"function"!=typeof t.constructor||(0,U.Z)(t)?{}:Gn(N(t))}(t),!o)return c?function kt(t,n){return y(t,G(t),n)}(t,function Bt(t,n){return t&&y(n,j(n),t)}(i,t)):function Yt(t,n){return y(t,(0,K.Z)(t),n)}(t,function Ot(t,n){return t&&y(n,(0,L.Z)(n),t)}(i,t))}else{if(!a[d])return g?t:{};i=Kn(t,d,o)}}l||(l=new dt.Z);var it=l.get(t);if(it)return it;l.set(t,i),ne(t)?t.forEach(function(f){i.add(T(f,n,e,f,t,l))}):zn(t)&&t.forEach(function(f,h){i.set(h,T(f,n,e,h,t,l))});var at=rt?void 0:(Be?c?rn:tn.Z:c?j:L.Z)(t);return function pt(t,n){for(var e=-1,s=null==t?0:t.length;++e<s&&!1!==n(t[e],e,t););}(at||t,function(f,h){at&&(f=t[h=f]),F(i,h,T(f,n,e,h,t,l))}),i};var tt=r(1854),Le=r(6478),Ue=r(7832),nt=r(5e3);r(8029);const et="page";let Me=(()=>{class t{constructor(e,s,g,l){this.location=e,this.loadingService=s,this.settings=g,this.loading$=this.loadingService.loading$,this.loadingPage$=this.loadingService.loading(et),this.filter$=new Z.X(this.getInitialFilter()),this.isFilterValid$=this.filter$.pipe((0,u.U)(this.isValidFilter.bind(this))),this.validFilter$=this.filter$.pipe((0,ct.h)(this.isValidFilter.bind(this)),(0,m.x)(tt.Z),(0,b.d)(1)),this.sortingSubject$=new Z.X(this.getInitialSorting()),this.sorting$=this.sortingSubject$.asObservable().pipe((0,m.x)(tt.Z),(0,b.d)(1)),this.resetEntries$=new A.x,this.nextPage$=new A.x,this.page$=(0,p.T)(this.nextPage$.pipe((0,S.h)("next")),(0,p.T)(this.resetEntries$,this.validFilter$,this.sorting$).pipe((0,S.h)("reset"))).pipe((0,x.R)((i,o)=>"next"===o?i+1:0,0)),this.offset$=this.page$.pipe((0,u.U)(i=>i*this.settings.paginationLimit)),this.pageResult$=(0,lt.a)([this.validFilter$,this.sorting$,this.offset$]).pipe((0,gt.b)(10),(0,ft.b)((0,Le.h)(this.loadEntries.bind(this))),(0,b.d)(1)),this.entries$=(0,p.T)((0,p.T)(this.resetEntries$,this.validFilter$,this.sorting$).pipe((0,S.h)({action:"reset"})),this.pageResult$.pipe((0,u.U)(i=>0===i.offset?{action:"reset",entries:i.entries}:{action:"append",entries:i.entries}))).pipe((0,x.R)(this.entriesActionReducer.bind(this),[]),(0,b.d)(1)),this.total$=this.pageResult$.pipe((0,ht.j)("total")),this.hasMore$=this.pageResult$.pipe((0,u.U)(({offset:i,total:o})=>i<o-this.settings.paginationLimit)),this.queryParams$=this.filter$.pipe((0,u.U)(this.buildParamsFromFilter.bind(this))),this.queryParamsString$=this.queryParams$.pipe((0,u.U)(Ue.tW)),this.destroy$=new A.x,this.queryParamsString$.pipe((0,ut.R)(this.destroy$)).subscribe(i=>this.location.replaceState(l,i))}ngOnDestroy(){this.destroy$.next()}setFilter(e){this.filter$.next(function Ee(t){return xe(t,5)}(e))}setSorting(e){this.sortingSubject$.next(e)}toggleSorting(e){this.sorting$.pipe((0,I.q)(1)).subscribe(s=>{this.sortingSubject$.next(s&&s.key===e?{key:e,ascending:!s.ascending}:{key:e,ascending:!0})})}nextPage(){this.hasMore$.pipe((0,I.q)(1)).subscribe(e=>{e&&this.nextPage$.next()})}resetEntries(){this.resetEntries$.next()}getInitialSorting(){return null}entriesActionReducer(e,s){switch(s.action){case"append":return[...e,...s.entries];case"reset":return s.entries?s.entries:[];default:return e}}}return t.\u0275fac=function(e){nt.$Z()},t.\u0275prov=nt.Yz7({token:t,factory:t.\u0275fac}),t})()}}]);