"use strict";(self.webpackChunkwebapp_schulverwaltung=self.webpackChunkwebapp_schulverwaltung||[]).push([[232],{2150:(W,m,s)=>{s.r(m),s.d(m,{MyGradesModule:()=>E});var p=s(6814),$=s(6486),g=s(1523),C=s(8405),t=s(5879),G=s(7328),I=s(7081),d=s(7398),v=s(2572),f=s(4664),M=s(9315),z=s(4141),c=s(3942),L=s(8173),F=s(3005),Z=s(1074),T=s(3219),U=s(4814),A=s(1760);let h=(()=>{class e{constructor(r,n,a,u,P,H,V){this.storageService=r,this.loadingService=n,this.coursesRestService=a,this.subscriptionRestService=u,this.reportsService=P,this.gradingScalesRestService=H,this.settings=V,this.studentId$=new G.t(1),this.loading$=this.loadingService.loading$,this.studentCourses$=this.loadCourses().pipe((0,I.d)(1)),this.studentCoursesSorted$=this.studentCourses$.pipe((0,d.U)(i=>i.slice().sort((o,K)=>o.Designation.localeCompare(K.Designation)))),this.studentCourseIds$=this.studentCourses$.pipe((0,d.U)(i=>i.flatMap(o=>o.Id))),this.idSubscriptions$=(0,v.a)([this.studentId$,this.studentCourseIds$]).pipe((0,f.w)(([i,o])=>this.subscriptionRestService.getIdSubscriptionsByStudentAndCourse(i,o))),this.ids$=this.idSubscriptions$.pipe((0,d.U)(i=>i.map(o=>o.Id))),this.testReports$=this.ids$.pipe((0,d.U)(i=>this.reportsService.getStudentSubscriptionReports(i))),this.tests$=this.studentCourses$.pipe((0,d.U)(i=>i.flatMap(o=>o.Tests).filter(c.Nf))),this.gradingScaleIdsFromTests$=this.tests$.pipe((0,d.U)(i=>[...i.map(o=>o.GradingScaleId)].filter(c.Nf).filter(c.Tw))),this.gradingScaleIdsFromCourses$=this.studentCourses$.pipe((0,d.U)(i=>i.flatMap(o=>o.GradingScaleId).filter(c.Nf).filter(c.Tw))),this.gradingScaleIds$=(0,v.a)([this.gradingScaleIdsFromCourses$,this.gradingScaleIdsFromTests$]).pipe((0,d.U)(([i,o])=>i.concat(o).filter(c.Tw))),this.gradingScales$=this.gradingScaleIds$.pipe((0,f.w)(i=>(0,M.D)(i.map(o=>this.gradingScalesRestService.getGradingScale(o)))));const y=this.storageService.getPayload()?.id_person;y&&this.studentId$.next(Number(y))}loadCourses(){return this.loadingService.load(this.coursesRestService.getExpandedCoursesForStudent())}static#t=this.\u0275fac=function(n){return new(n||e)(t.LFG(L.V),t.LFG(F.b),t.LFG(Z.s),t.LFG(T.o),t.LFG(U.F),t.LFG(A.R),t.LFG(z.L6))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac})}return e})();var R=s(6567),x=s(5841),B=s(59),w=s(9754),S=s(9515);const J=function(){return[]};let O=(()=>{class e{constructor(r){this.myGradesService=r}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(h))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["erz-my-grades-header"]],decls:7,vars:7,consts:[[1,"d-flex","justify-content-between","header"],[3,"reports"]],template:function(n,a){if(1&n&&(t.TgZ(0,"div",0)(1,"div"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div"),t._UZ(5,"erz-reports-link",1),t.ALo(6,"async"),t.qZA()()),2&n){let u;t.xp6(2),t.Oqu(t.lcZ(3,2,"my-grades.header")),t.xp6(3),t.Q6J("reports",null!==(u=t.lcZ(6,4,a.myGradesService.testReports$))&&void 0!==u?u:t.DdM(6,J))}},dependencies:[w.D,p.Ov,S.X$],styles:[".header[_ngcontent-%COMP%]{padding-bottom:1rem}.report[_ngcontent-%COMP%]{margin-left:1rem}"]})}return e})();function N(e,l){if(1&e&&t._UZ(0,"erz-dossier-grades-view",4),2&e){const r=t.oxw().erzLet;t.Q6J("courses",r.courses)("studentId",r.studentId)("gradingScales",r.gradingScales)("isEditable",!1)}}function Q(e,l){1&e&&(t.ynx(0),t._UZ(1,"erz-spinner"),t.BQk())}function Y(e,l){if(1&e&&(t.TgZ(0,"div",1)(1,"h1"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._UZ(4,"erz-my-grades-header"),t.YNc(5,N,1,4,"erz-dossier-grades-view",2),t.YNc(6,Q,2,0,"ng-container",3),t.qZA()),2&e){const r=l.erzLet;t.xp6(2),t.Oqu(t.lcZ(3,3,"my-grades.title")),t.xp6(3),t.Q6J("ngIf",!r.loading),t.xp6(1),t.Q6J("ngIf",r.loading)}}const D=function(e,l,r,n){return{loading:e,studentId:l,courses:r,gradingScales:n}},X=[{path:"",component:(()=>{class e{constructor(){}static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["erz-my-grades"]],features:[t._Bn([h])],decls:1,vars:0,template:function(n,a){1&n&&t._UZ(0,"router-outlet")},dependencies:[g.lC]})}return e})(),children:[{path:"",component:(()=>{class e{constructor(r){this.myGradesService=r}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(h))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["erz-my-grades-show"]],features:[t._Bn([C.S])],decls:5,vars:14,consts:[["class","erz-container erz-container-limited",4,"erzLet"],[1,"erz-container","erz-container-limited"],[3,"courses","studentId","gradingScales","isEditable",4,"ngIf"],[4,"ngIf"],[3,"courses","studentId","gradingScales","isEditable"]],template:function(n,a){1&n&&(t.YNc(0,Y,7,5,"div",0),t.ALo(1,"async"),t.ALo(2,"async"),t.ALo(3,"async"),t.ALo(4,"async")),2&n&&t.Q6J("erzLet",t.l5B(9,D,t.lcZ(1,1,a.myGradesService.loading$),t.lcZ(2,3,a.myGradesService.studentId$),t.lcZ(3,5,a.myGradesService.studentCoursesSorted$),t.lcZ(4,7,a.myGradesService.gradingScales$)))},dependencies:[p.O5,R.e,x.d,B.O,O,p.Ov,S.X$]})}return e})()}]}];let j=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#s=this.\u0275inj=t.cJS({imports:[g.Bz.forChild(X),g.Bz]})}return e})(),E=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#s=this.\u0275inj=t.cJS({imports:[p.ez,j,$.m]})}return e})()}}]);