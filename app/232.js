"use strict";(self.webpackChunkwebapp_schulverwaltung=self.webpackChunkwebapp_schulverwaltung||[]).push([[232],{2150:(b,h,s)=>{s.r(h),s.d(h,{MyGradesModule:()=>E});var g=s(6814),p=s(1523),f=s(7328),y=s(7081),d=s(7398),m=s(2572),v=s(4664),C=s(9315),$=s(4141),c=s(3942),t=s(5879),G=s(8173),I=s(3005),M=s(1074),z=s(3219),L=s(6016),F=s(1760);let u=(()=>{class e{constructor(r,n,o,P,X,D,H){this.storageService=r,this.loadingService=n,this.coursesRestService=o,this.subscriptionRestService=P,this.reportsService=X,this.gradingScalesRestService=D,this.settings=H,this.studentId$=new f.t(1),this.loading$=this.loadingService.loading$,this.studentCourses$=this.loadCourses().pipe((0,y.d)(1)),this.studentCoursesSorted$=this.studentCourses$.pipe((0,d.U)(i=>i.slice().sort((a,V)=>a.Designation.localeCompare(V.Designation)))),this.studentCourseIds$=this.studentCourses$.pipe((0,d.U)(i=>i.flatMap(a=>a.Id))),this.idSubscriptions$=(0,m.a)([this.studentId$,this.studentCourseIds$]).pipe((0,v.w)(([i,a])=>this.subscriptionRestService.getIdSubscriptionsByStudentAndCourse(i,a))),this.ids$=this.idSubscriptions$.pipe((0,d.U)(i=>i.map(a=>a.Id))),this.testReportUrl$=this.ids$.pipe((0,d.U)(i=>this.reportsService.getSubscriptionReportUrl(this.settings.testsBySubscriptionReportIdStudent,i))),this.tests$=this.studentCourses$.pipe((0,d.U)(i=>i.flatMap(a=>a.Tests).filter(c.Nf))),this.gradingScaleIdsFromTests$=this.tests$.pipe((0,d.U)(i=>[...i.map(a=>a.GradingScaleId)].filter(c.Nf).filter(c.Tw))),this.gradingScaleIdsFromCourses$=this.studentCourses$.pipe((0,d.U)(i=>i.flatMap(a=>a.GradingScaleId).filter(c.Nf).filter(c.Tw))),this.gradingScaleIds$=(0,m.a)([this.gradingScaleIdsFromCourses$,this.gradingScaleIdsFromTests$]).pipe((0,d.U)(([i,a])=>i.concat(a).filter(c.Tw))),this.gradingScales$=this.gradingScaleIds$.pipe((0,v.w)(i=>(0,C.D)(i.map(a=>this.gradingScalesRestService.getGradingScale(a)))));const S=this.storageService.getPayload()?.id_person;S&&this.studentId$.next(Number(S))}loadCourses(){return this.loadingService.load(this.coursesRestService.getExpandedCoursesForStudent())}static#t=this.\u0275fac=function(n){return new(n||e)(t.LFG(G.V),t.LFG(I.b),t.LFG(M.s),t.LFG(z.o),t.LFG(L.F),t.LFG(F.R),t.LFG($.L6))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac})}return e})(),U=(()=>{class e{constructor(){}static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["erz-my-grades"]],features:[t._Bn([u])],decls:1,vars:0,template:function(n,o){1&n&&t._UZ(0,"router-outlet")},dependencies:[p.lC]})}return e})();var Z=s(8405),T=s(6567),x=s(59),R=s(5841),A=s(9515);let B=(()=>{class e{constructor(r){this.myGradesService=r}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(u))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["erz-my-grades-header"]],decls:9,vars:6,consts:[[1,"d-flex","justify-content-between","header"],["target","_blank",1,"report","btn","btn-primary",3,"href"],[1,"material-icons"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div")(5,"a",1),t.ALo(6,"async"),t.TgZ(7,"i",2),t._uU(8,"description"),t.qZA()()()()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,2,"my-grades.header")),t.xp6(3),t.Q6J("href",t.lcZ(6,4,o.myGradesService.testReportUrl$),t.LSH))},dependencies:[g.Ov,A.X$],styles:[".header[_ngcontent-%COMP%]{padding-left:1.5rem;padding-bottom:1.5rem}@media (max-width: 750px){.header[_ngcontent-%COMP%]{padding-right:1.5rem}}.report[_ngcontent-%COMP%]{margin-left:1.5rem}"]})}return e})();function w(e,l){if(1&e&&t._UZ(0,"erz-dossier-grades-view",4),2&e){const r=t.oxw().erzLet;t.Q6J("courses",r.courses)("studentId",r.studentId)("gradingScales",r.gradingScales)("isEditable",!1)}}function J(e,l){1&e&&(t.ynx(0),t._UZ(1,"erz-spinner"),t.BQk())}function O(e,l){if(1&e&&(t.ynx(0),t._UZ(1,"erz-my-grades-header"),t.YNc(2,w,1,4,"erz-dossier-grades-view",2),t.YNc(3,J,2,0,"ng-container",3),t.BQk()),2&e){const r=l.erzLet;t.xp6(2),t.Q6J("ngIf",!r.loading),t.xp6(1),t.Q6J("ngIf",r.loading)}}const N=function(e,l,r,n){return{loading:e,studentId:l,courses:r,gradingScales:n}},Q=[{path:"",component:U,children:[{path:"",component:(()=>{class e{constructor(r){this.myGradesService=r}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(u))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["erz-my-grades-show"]],features:[t._Bn([Z.S])],decls:6,vars:14,consts:[[1,"erz-container","erz-container-limited","erz-container-padding-y","erz-container-padding-x-responsive"],[4,"erzLet"],[3,"courses","studentId","gradingScales","isEditable",4,"ngIf"],[4,"ngIf"],[3,"courses","studentId","gradingScales","isEditable"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t.YNc(1,O,4,2,"ng-container",1),t.ALo(2,"async"),t.ALo(3,"async"),t.ALo(4,"async"),t.ALo(5,"async"),t.qZA()),2&n&&(t.xp6(1),t.Q6J("erzLet",t.l5B(9,N,t.lcZ(2,1,o.myGradesService.loading$),t.lcZ(3,3,o.myGradesService.studentId$),t.lcZ(4,5,o.myGradesService.studentCoursesSorted$),t.lcZ(5,7,o.myGradesService.gradingScales$))))},dependencies:[g.O5,T.e,x.O,R.d,B,g.Ov]})}return e})()}]}];let Y=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#s=this.\u0275inj=t.cJS({imports:[p.Bz.forChild(Q),p.Bz]})}return e})();var j=s(6486);let E=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#s=this.\u0275inj=t.cJS({imports:[g.ez,Y,j.m]})}return e})()}}]);