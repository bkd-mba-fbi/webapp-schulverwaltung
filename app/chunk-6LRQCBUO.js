import{a as ge}from"./chunk-USF5QQBL.js";import{c as _e}from"./chunk-QWYAXZZX.js";import{a as pe,m as ce,q as he,r as ue,u as fe}from"./chunk-DVBPCEX4.js";import{Q as me}from"./chunk-RYYQAFJB.js";import{$b as F,B as M,Ba as G,Ca as X,Fb as g,Fc as de,Hb as O,Ja as J,Jb as B,Ka as Y,Ma as m,Mb as re,Nb as se,O as N,Ob as A,Pb as c,Q as j,Qb as _,S as U,V as $,Z as Q,ac as R,ba as q,bc as h,cb as ee,cd as le,dc as w,fb as p,ga as Z,gc as P,h as b,ha as y,ic as C,j as K,jc as D,kb as te,lb as ne,ma as s,pc as d,rc as v,sa as T,t as H,ta as I,tc as ae,ub as oe,wb as l,xa as z,ya as W,z as V,zb as ie}from"./chunk-CHBP6U4G.js";var S="default",Oe=(()=>{class o{constructor(){this.action$=new b,this.loadingCounts$=V(this.action$.pipe($((e,{action:n,context:t})=>{switch(n){case"increment":return e[t]=(e[t]||0)+1,e;case"decrement":return e[t]=Math.max(0,(e[t]||0)-1),e;default:return e}},{}),Q({})),{connector:()=>new K(1)}),this.loading$=this.loading(),this.loadingCountsSub=this.loadingCounts$.connect()}ngOnDestroy(){this.loadingCountsSub.unsubscribe()}loading(e=S){return this.loadingCounts$.pipe(H(n=>n[e]),H(De),j())}load(e,n=S){let t=typeof n=="string"?n:n.context||S,r=typeof n=="object"&&n.stopOnFirstValue||!1,i=this.decrementLoadingCount(t),f=!0;function a(){f&&(i(),f=!1)}return e.pipe(_e(this.incrementLoadingCount(t)),r?q(a):U(i))}incrementLoadingCount(e){return()=>this.action$.next({action:"increment",context:e})}decrementLoadingCount(e){return()=>this.action$.next({action:"decrement",context:e})}static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275prov=y({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function De(o){return(o||0)!==0}var ve=(()=>{class o{constructor(){this.autoClose=!0,this.placement=["bottom-start","bottom-end","top-start","top-end"],this.popperOptions=e=>e,this.container=null}static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275prov=y({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})(),E=(()=>{class o{constructor(){this._disabled=!1,this.nativeElement=s(m).nativeElement,this.tabindex=0}set disabled(e){this._disabled=e===""||e===!0}get disabled(){return this._disabled}static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275dir=l({type:o,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:3,hostBindings:function(n,t){n&2&&(R("tabIndex",t.disabled?-1:t.tabindex),d("disabled",t.disabled))},inputs:{tabindex:"tabindex",disabled:"disabled"}})}}return o})(),be=(()=>{class o{constructor(){this.item=s(E)}static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275dir=l({type:o,selectors:[["button","ngbDropdownItem",""]],hostVars:1,hostBindings:function(n,t){n&2&&R("disabled",t.item.disabled)}})}}return o})(),x=(()=>{class o{constructor(){this.dropdown=s(k),this.nativeElement=s(m).nativeElement}static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275dir=l({type:o,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(n,t,r){if(n&1&&P(r,E,4),n&2){let i;C(i=D())&&(t.menuItems=i)}},hostAttrs:[1,"dropdown-menu"],hostVars:2,hostBindings:function(n,t){n&1&&h("keydown.ArrowUp",function(i){return t.dropdown.onKeyDown(i)})("keydown.ArrowDown",function(i){return t.dropdown.onKeyDown(i)})("keydown.Home",function(i){return t.dropdown.onKeyDown(i)})("keydown.End",function(i){return t.dropdown.onKeyDown(i)})("keydown.Enter",function(i){return t.dropdown.onKeyDown(i)})("keydown.Space",function(i){return t.dropdown.onKeyDown(i)})("keydown.Tab",function(i){return t.dropdown.onKeyDown(i)})("keydown.Shift.Tab",function(i){return t.dropdown.onKeyDown(i)}),n&2&&d("show",t.dropdown.isOpen())}})}}return o})(),L=(()=>{class o{constructor(){this.dropdown=s(k),this.nativeElement=s(m).nativeElement}static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275dir=l({type:o,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:3,hostBindings:function(n,t){n&2&&(g("aria-expanded",t.dropdown.isOpen()),d("show",t.dropdown.isOpen()))}})}}return o})(),ye=(()=>{class o extends L{static{this.\u0275fac=(()=>{let e;return function(t){return(e||(e=Y(o)))(t||o)}})()}static{this.\u0275dir=l({type:o,selectors:[["","ngbDropdownToggle",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:3,hostBindings:function(n,t){n&1&&h("click",function(){return t.dropdown.toggle()})("keydown.ArrowUp",function(i){return t.dropdown.onKeyDown(i)})("keydown.ArrowDown",function(i){return t.dropdown.onKeyDown(i)})("keydown.Home",function(i){return t.dropdown.onKeyDown(i)})("keydown.End",function(i){return t.dropdown.onKeyDown(i)})("keydown.Tab",function(i){return t.dropdown.onKeyDown(i)})("keydown.Shift.Tab",function(i){return t.dropdown.onKeyDown(i)}),n&2&&(g("aria-expanded",t.dropdown.isOpen()),d("show",t.dropdown.isOpen()))},features:[de([{provide:L,useExisting:Z(()=>o)}]),ie]})}}return o})(),k=(()=>{class o{constructor(){this._changeDetector=s(le),this._config=s(ve),this._document=s(W),this._injector=s(z),this._ngZone=s(X),this._nativeElement=s(m).nativeElement,this._destroyCloseHandlers$=new b,this._bodyContainer=null,this._positioning=pe(),this.autoClose=this._config.autoClose,this._open=!1,this.placement=this._config.placement,this.popperOptions=this._config.popperOptions,this.container=this._config.container,this.openChange=new G}ngOnInit(){this.display||(this.display=this._nativeElement.closest(".navbar")?"static":"dynamic")}ngAfterContentInit(){ne({write:()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()}},{injector:this._injector})}ngOnChanges(e){if(e.container&&this._open&&this._applyContainer(this.container),e.placement&&!e.placement.firstChange&&(this._positioning.setOptions({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement}),this._applyPlacementClasses()),e.dropdownClass){let{currentValue:n,previousValue:t}=e.dropdownClass;this._applyCustomDropdownClass(n,t)}e.autoClose&&this._open&&(this.autoClose=e.autoClose.currentValue,this._setCloseHandlers())}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers(),this._anchor&&(this._anchor.nativeElement.focus(),this.display==="dynamic"&&this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,updatePopperOptions:e=>this.popperOptions(fe([0,2])(e))}),this._applyPlacementClasses(),this._afterRenderRef=te({write:()=>{this._positionMenu()}},{injector:this._injector})})))}_setCloseHandlers(){this._destroyCloseHandlers$.next(),he(this._ngZone,this._document,this.autoClose,e=>{this.close(),e===0&&this._anchor.nativeElement.focus()},this._destroyCloseHandlers$,this._menu?[this._menu.nativeElement]:[],this._anchor?[this._anchor.nativeElement]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._resetContainer(),this._positioning.destroy(),this._afterRenderRef?.destroy(),this._destroyCloseHandlers$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this.close()}onKeyDown(e){let{key:n}=e,t=this._getMenuElements(),r=-1,i=null,f=this._isEventFromToggle(e);if(!f&&t.length&&t.forEach((a,Ce)=>{a.contains(e.target)&&(i=a),a===ce(this._document)&&(r=Ce)}),n===" "||n==="Enter"){i&&(this.autoClose===!0||this.autoClose==="inside")&&M(i,"click").pipe(N(1)).subscribe(()=>this.close());return}if(n==="Tab"){if(e.target&&this.isOpen()&&this.autoClose)if(this._anchor.nativeElement===e.target){this.container==="body"&&!e.shiftKey?(this._menu.nativeElement.setAttribute("tabindex","0"),this._menu.nativeElement.focus(),this._menu.nativeElement.removeAttribute("tabindex")):e.shiftKey&&this.close();return}else if(this.container==="body"){let a=this._menu.nativeElement.querySelectorAll(ue);e.shiftKey&&e.target===a[0]?(this._anchor.nativeElement.focus(),e.preventDefault()):!e.shiftKey&&e.target===a[a.length-1]&&(this._anchor.nativeElement.focus(),this.close())}else M(e.target,"focusout").pipe(N(1)).subscribe(({relatedTarget:a})=>{this._nativeElement.contains(a)||this.close()});return}if(f||i){if(this.open(),t.length){switch(n){case"ArrowDown":r=Math.min(r+1,t.length-1);break;case"ArrowUp":if(this._isDropup()&&r===-1){r=t.length-1;break}r=Math.max(r-1,0);break;case"Home":r=0;break;case"End":r=t.length-1;break}t[r].focus()}e.preventDefault()}}_isDropup(){return this._nativeElement.classList.contains("dropup")}_isEventFromToggle(e){return this._anchor.nativeElement.contains(e.target)}_getMenuElements(){return this._menu?this._menu.menuItems.filter(({disabled:e})=>!e).map(({nativeElement:e})=>e):[]}_positionMenu(){let e=this._menu;this.isOpen()&&e&&(this.display==="dynamic"?(this._positioning.update(),this._applyPlacementClasses()):this._applyPlacementClasses(this._getFirstPlacement(this.placement)))}_getFirstPlacement(e){return Array.isArray(e)?e[0]:e.split(" ")[0]}_resetContainer(){this._menu&&this._nativeElement.appendChild(this._menu.nativeElement),this._bodyContainer&&(this._document.body.removeChild(this._bodyContainer),this._bodyContainer=null)}_applyContainer(e=null){if(this._resetContainer(),e==="body"){let n=this._menu.nativeElement,t=this._bodyContainer=this._bodyContainer||this._document.createElement("div");t.style.position="absolute",n.style.position="static",t.style.zIndex="1055",t.appendChild(n),this._document.body.appendChild(t)}this._applyCustomDropdownClass(this.dropdownClass)}_applyCustomDropdownClass(e,n){let t=this.container==="body"?this._bodyContainer:this._nativeElement;t&&(n&&t.classList.remove(n),e&&t.classList.add(e))}_applyPlacementClasses(e){if(this._menu){e||(e=this._getFirstPlacement(this.placement)),this._nativeElement.classList.remove("dropup","dropdown"),this.display==="static"?this._menu.nativeElement.setAttribute("data-bs-popper","static"):this._menu.nativeElement.removeAttribute("data-bs-popper");let n=e.search("^top")!==-1?"dropup":"dropdown";this._nativeElement.classList.add(n),this._bodyContainer&&(this._bodyContainer.classList.remove("dropup","dropdown"),this._bodyContainer.classList.add(n))}}static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275dir=l({type:o,selectors:[["","ngbDropdown",""]],contentQueries:function(n,t,r){if(n&1&&P(r,x,5)(r,L,5),n&2){let i;C(i=D())&&(t._menu=i.first),C(i=D())&&(t._anchor=i.first)}},hostVars:2,hostBindings:function(n,t){n&2&&d("show",t.isOpen())},inputs:{autoClose:"autoClose",dropdownClass:"dropdownClass",_open:[0,"open","_open"],placement:"placement",popperOptions:"popperOptions",container:"container",display:"display"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],features:[J]})}}return o})();var Ee=(o,u)=>u.id;function ke(o,u){if(o&1){let e=F();c(0,"a",2),h("click",function(t){T(e);let r=w();return t.preventDefault(),I(r.reports.length>0&&r.openReport(r.reports[0]))}),c(1,"i",3),v(2,"description"),_()()}if(o&2){let e=w();d("disabled",e.disableIfUnavailable&&e.reports.length===0),A("href",e.reports.length>0?e.reports[0].url:"",ee)}}function He(o,u){if(o&1){let e=F();c(0,"button",7),h("click",function(){let t=T(e).$implicit,r=w(2);return I(r.openReport(t))}),v(1),_()}if(o&2){let e=u.$implicit;p(),ae(" ",e.title," ")}}function Me(o,u){if(o&1&&(c(0,"div",1)(1,"a",4)(2,"i",3),v(3,"description"),_()(),c(4,"div",5),re(5,He,2,1,"button",6,Ee),_()()),o&2){let e=w();p(),A("id",e.dropdownId),p(3),g("aria-labelledby",e.dropdownId),p(),se(e.reports)}}var Ye=(()=>{class o{constructor(){this.reports=[],this.disableIfUnavailable=!1,this.storageService=s(ge),this.dropdownId=me("reports-link-dropdown")}openReport(e){window.open(this.addTokenToUrl(e),"_blank")}addTokenToUrl(e){let n=new URL(e.url);return n.searchParams.set("token",this.storageService.getAccessToken()??""),n}static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275cmp=oe({type:o,selectors:[["bkd-reports-link"]],inputs:{reports:"reports",disableIfUnavailable:"disableIfUnavailable"},decls:2,vars:2,consts:[["target","_blank",1,"btn","btn-primary","btn-icon",3,"href","disabled"],["ngbDropdown","",1,"d-inline-block"],["target","_blank",1,"btn","btn-primary","btn-icon",3,"click","href"],[1,"material-icons"],["ngbDropdownToggle","",1,"btn","btn-primary","btn-icon","d-flex","align-items-center",3,"id"],["ngbDropdownMenu",""],["ngbDropdownItem",""],["ngbDropdownItem","",3,"click"]],template:function(n,t){n&1&&(O(0,ke,3,3,"a",0),O(1,Me,7,2,"div",1)),n&2&&(B(t.reports.length===1||t.reports.length===0&&t.disableIfUnavailable?0:-1),p(),B(t.reports.length>1?1:-1))},dependencies:[k,ye,x,be,E],styles:["a[_ngcontent-%COMP%]{text-decoration:none;color:#fff}"]})}}return o})();export{E as a,x as b,ye as c,k as d,Oe as e,Ye as f};
