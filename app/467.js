"use strict";(self.webpackChunkwebapp_schulverwaltung=self.webpackChunkwebapp_schulverwaltung||[]).push([[467],{9960:(S,O,t)=>{t.d(O,{h:()=>_});var m=t(3601),f=t(4903);class _{constructor(h){if(this.absences=h,0===h.length)throw new Error("Absences array is empty");this.date=(0,m.o)(this.absences[0].LessonDateTimeFrom),this.dateString=(0,f.GP)(this.date,"yyyy-MM-dd"),this.studentId=this.absences[0].StudentRef.Id,this.studentFullName=this.absences[0].StudentFullName,this.studyClassNumber=this.absences[0].StudyClassNumber,this.lessonsCount=this.absences.length}}},916:(S,O,t)=>{t.d(O,{fJ:()=>y,p5:()=>l,Ak:()=>o,Xv:()=>u,B7:()=>T});var m=t(4903),f=t(5042),_=t(7233);class E extends Error{constructor(c,P){super(`TypeScript thought we could never end up here\n${P}`)}}var h=t(9960);function y(d){const c=function D(d){return d.reduce((c,P)=>{const I=(0,m.GP)(P.LessonDateTimeFrom,"yyyy-MM-dd"),M=P.StudentRef.Id;return c[I]||(c[I]={}),c[I][M]||(c[I][M]=[]),c[I][M].push(P),c},{})}(d);return Object.keys(c).reduce((P,I)=>(Object.keys(c[I]).forEach(M=>{P=[...P,new h.h(c[I][M].sort(_.qZ))]}),P),[])}function T(d,c){return[...d].sort(function p(d){return(c,P)=>{switch(d.primarySortKey){case"date":{const I=c.date.getTime(),M=P.date.getTime();return I===M?c.studentFullName.localeCompare(P.studentFullName):d.ascending?I-M:M-I}case"name":{const I=d.ascending?c.studentFullName.localeCompare(P.studentFullName):P.studentFullName.localeCompare(c.studentFullName);return 0===I?P.date.getTime()-c.date.getTime():I}default:throw new E(d.primarySortKey,"Unhandled sort criteria")}}}(c))}function l(d){return d.reduce((c,P)=>c.concat(P.absences),[])}function u(d,c){return d.filter(P=>!c.some(({lessonIds:I,personId:M})=>I.includes(P.LessonRef.Id)&&M===P.StudentRef.Id))}function o(d,c){return(0,f.A)([...d,...c],"Id")}},5314:(S,O,t)=>{t.d(O,{Jt:()=>E,Rb:()=>_,wf:()=>f});var m=t(2055),f=function(h){return h.Present="present",h.Unapproved="unapproved",h.Absent="absent",h}(f||{});function _(h){switch(h){case f.Absent:return"cancel";case f.Unapproved:return"help";default:return"check_circle"}}class E{constructor(y,T,l,u){this.lessonPresence=y,this.presenceType=T,this.precedingAbsences=l,this.confirmationState=u,this.studentFullName=y.StudentFullName}get presenceCategory(){return(0,m.sr)(this.settings,this.confirmationState&&Number(this.confirmationState.Key))?f.Unapproved:(0,m.W0)(this.presenceType)?f.Absent:f.Present}get nextPresenceCategory(){return this.presenceCategory===f.Absent?f.Present:f.Absent}getNextPresenceType(y){return this.nextPresenceCategory===f.Absent?this.presenceCategory===f.Unapproved?this.presenceType:y.find(T=>(0,m.tW)(T,this.settings))||null:null}get canChangePresenceType(){return(0,m.ED)(this.lessonPresence,this.presenceType,this.settings)}get canChangeIncident(){return!(0,m.W0)(this.presenceType)}get showDesignation(){return!this.canChangePresenceType||this.presenceCategory===f.Absent&&!(0,m.tW)(this.presenceType,this.settings)||this.presenceCategory===f.Unapproved}get presenceCategoryIcon(){return _(this.presenceCategory)}get settings(){return window.schulverwaltung.settings}}},7233:(S,O,t)=>{t.d(O,{FO:()=>l,aW:()=>T,ib:()=>_,qZ:()=>u});var m=t(5042),f=t(5314);function _(D,d){return null===D&&null===d||null!==D&&null!==d&&D.LessonRef.Id===d.LessonRef.Id&&D.EventDesignation===d.EventDesignation&&D.StudyClassNumber===d.StudyClassNumber&&D.TeacherInformation===d.TeacherInformation&&D.LessonDateTimeFrom.getTime()===d.LessonDateTimeFrom.getTime()&&D.LessonDateTimeTo.getTime()===d.LessonDateTimeTo.getTime()}function T(D,d,c,P,I){return function h(D,d){return D?d.filter(c=>D.lessons.map(P=>P.LessonRef.Id).indexOf(c.LessonRef.Id)>=0).sort(o):[]}(D,d).map(M=>l(D,M,c,P,I))}function l(D,d,c,P,I){let M=null;d.TypeRef.Id&&(M=c.find(k=>k.Id===d.TypeRef.Id)||null);const C=function y(D,d,c){return(0,m.A)(D.filter(P=>P.StudentRef.Id===d.StudentRef.Id&&P.LessonRef.From&&P.LessonRef.From.toDateString()===c?.LessonDateTimeFrom.toDateString()&&P.LessonRef.From<c?.LessonDateTimeFrom),"Id").sort(p)}(I,d,D);let w;return d.ConfirmationStateId&&(w=P.find(k=>k.Key===d.ConfirmationStateId)),new f.Jt(d,M,C,w)}function u(D,d){const c=D.LessonDateTimeFrom.getTime(),P=d.LessonDateTimeFrom.getTime();return c-P==0?D.LessonDateTimeTo.getTime()-d.LessonDateTimeTo.getTime():c-P}function o(D,d){return D.StudentFullName.localeCompare(d.StudentFullName)}function p(D,d){return D.LessonRef.From&&D.LessonRef.To&&d.LessonRef.From&&d.LessonRef.To?D.LessonRef.From.getTime()-d.LessonRef.From.getTime()==0?D.LessonRef.To.getTime()-d.LessonRef.To.getTime():D.LessonRef.From.getTime()-d.LessonRef.From.getTime():0}},2055:(S,O,t)=>{function f(o){return!(!o||!o.IsComment)}function _(o){return!(!o||!o.IsIncident)}function E(o){return!(!o||!(o.IsAbsence||o.IsDispensation||o.IsHalfDay))}function h(o,p){return!(!o||!p||o.Id!==p.absencePresenceTypeId)}function y(o,p){return!(!o||!p||p!==o.checkableAbsenceStateId)}function l(o,p,D){return!!(function m(o){return!o}(p)&&null===o.ConfirmationStateId||f(p)||_(p)||E(p)&&o.ConfirmationStateId===D.unconfirmedAbsenceStateId||y(D,o.ConfirmationStateId))}function u(o,p){return o?.IsAbsence?p.unconfirmedAbsenceStateId:null}t.d(O,{Cn:()=>f,ED:()=>l,Eu:()=>u,W0:()=>E,sr:()=>y,tW:()=>h,x1:()=>_})},2637:(S,O,t)=>{t.d(O,{P:()=>h});var m=t(5539),f=t(3955),_=t(4438);const E=["*"];let h=(()=>{class y{constructor(){this.link=[]}static#e=this.\u0275fac=function(u){return new(u||y)};static#t=this.\u0275cmp=_.VBU({type:y,selectors:[["bkd-backlink"]],inputs:{link:"link",params:"params"},standalone:!0,features:[_.aNF],ngContentSelectors:E,decls:8,vars:5,consts:[[1,"d-flex","align-items-start","justify-content-between","w-100","mb-3"],[3,"routerLink","queryParams"],[1,"material-icons"],[1,"label"]],template:function(u,o){1&u&&(_.NAR(),_.j41(0,"div",0)(1,"a",1)(2,"span",2),_.EFF(3,"arrow_back"),_.k0s(),_.j41(4,"span",3),_.EFF(5),_.nI1(6,"translate"),_.k0s()(),_.SdG(7),_.k0s()),2&u&&(_.R7$(),_.Y8G("routerLink",o.link)("queryParams",o.params),_.R7$(4),_.JRh(_.bMT(6,3,"global.back")))},dependencies:[m.Wk,f.h,f.D9],styles:["[_nghost-%COMP%]{display:flex}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{height:calc(var(--bs-body-font-size) * var(--bs-body-line-height))}a[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.3rem}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover, a[_ngcontent-%COMP%]:focus{text-decoration:none}a[_ngcontent-%COMP%]:hover   .label[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:focus   .label[_ngcontent-%COMP%]{text-decoration:underline;text-decoration-color:#ea161f}"]})}return y})()},235:(S,O,t)=>{t.d(O,{A:()=>n});var m=t(177),f=t(5539),_=t(3955),E=t(2771),h=t(4412),y=t(4572),T=t(7673),l=t(7799),u=t(9172),o=t(4668),p=t(6354),D=t(5964),d=t(5558),c=t(6697),P=t(7887),I=t(5063),M=t(5421),C=t(9728),w=t(8667),k=t(1517),e=t(4438),N=t(8413);const H=["checkbox"];function Q(i,v){if(1&i&&e.nrm(0,"bkd-reports-link",17),2&i){const g=e.XpG(4);e.Y8G("reports",g.reports)("disableIfUnavailable",!0)}}function W(i,v){if(1&i&&(e.j41(0,"a",18),e.nI1(1,"async"),e.j41(2,"i",13),e.EFF(3,"mail"),e.k0s()()),2&i){const g=e.XpG(4);e.Mz_("href","mailto:",e.bMT(1,2,g.mailTo$),"",e.B4B)}}function x(i,v){if(1&i&&(e.j41(0,"div",19),e.EFF(1),e.k0s()),2&i){const g=e.XpG(4);e.R7$(),e.SpI(" ",g.defaultAbsenceSelectionMessage," ")}}function F(i,v){if(1&i){const g=e.RV6();e.j41(0,"div",7),e.bIt("click",function(A){e.eBV(g);const L=e.sdS(3),R=e.XpG(3);return e.Njj(R.onRowClick(A,L))}),e.j41(1,"div",8)(2,"input",9,2),e.nI1(4,"async"),e.bIt("change",function(A){e.eBV(g);const L=e.XpG(3);return e.Njj(L.toggleAll(null==A.target?null:A.target.checked))}),e.k0s()(),e.j41(5,"div",10),e.EFF(6),e.nI1(7,"translate"),e.k0s(),e.j41(8,"div",11)(9,"a",12),e.nI1(10,"async"),e.j41(11,"i",13),e.EFF(12,"edit"),e.k0s()(),e.DNE(13,Q,1,2,"bkd-reports-link",14)(14,W,4,4,"a",15),e.k0s(),e.DNE(15,x,2,1,"div",16),e.nI1(16,"async"),e.k0s()}if(2&i){let g,b;const A=e.XpG(3);e.R7$(2),e.Y8G("checked",e.bMT(4,8,A.allSelected$)),e.R7$(4),e.JRh(e.bMT(7,10,"open-absences.detail.all")),e.R7$(3),e.AVh("disabled",0===(null==(g=e.bMT(10,12,null==A.selectionService?null:A.selectionService.selection$))?null:g.length)),e.FS9("routerLink",A.confirmLink),e.R7$(4),e.Y8G("ngIf",A.reports),e.R7$(),e.Y8G("ngIf",A.displayEmail),e.R7$(),e.Y8G("ngIf",A.defaultAbsenceSelectionMessage&&(null==(b=e.bMT(16,14,null==A.selectionService?null:A.selectionService.selectedWithoutPresenceType$))?null:b.length)||!1)}}function B(i,v){if(1&i){const g=e.RV6();e.j41(0,"div",8)(1,"input",9,3),e.nI1(3,"async"),e.bIt("change",function(){e.eBV(g);const A=e.XpG().$implicit,L=e.XpG(3);return e.Njj(null==L.selectionService?null:L.selectionService.toggle(A))}),e.k0s()()}if(2&i){const g=e.XpG().$implicit,b=e.XpG(3);e.R7$(),e.Y8G("checked",e.bMT(3,1,null==b.selectionService?null:b.selectionService.isSelected$(g)))}}function j(i,v){if(1&i&&(e.qex(0),e.EFF(1),e.bVm()),2&i){const g=e.XpG().$implicit;e.R7$(),e.SpI(", ",g.StudyClassNumber,"")}}function $(i,v){if(1&i&&(e.j41(0,"div",32),e.EFF(1),e.k0s()),2&i){const g=e.XpG().bkdLet;e.R7$(),e.SpI(" ",g," ")}}function G(i,v){1&i&&(e.j41(0,"div",33),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"my-absences.show.confirm-presence-type")," "))}function Y(i,v){if(1&i&&(e.qex(0),e.DNE(1,$,2,1,"div",30)(2,G,3,3,"div",31),e.bVm()),2&i){const g=v.bkdLet,b=e.XpG(4);e.R7$(),e.Y8G("ngIf",g),e.R7$(),e.Y8G("ngIf",b.displayPresenceType&&!g&&b.defaultAbsenceSelectionMessage)}}function K(i,v){if(1&i){const g=e.RV6();e.j41(0,"div",20),e.bIt("click",function(A){const L=e.eBV(g).index,R=e.XpG(3);return e.Njj(R.onRowClick(A,L))}),e.DNE(1,B,4,3,"div",21),e.nI1(2,"async"),e.j41(3,"div",22),e.EFF(4),e.DNE(5,j,2,1,"ng-container",23),e.k0s(),e.j41(6,"div",24),e.EFF(7),e.nI1(8,"date"),e.nI1(9,"date"),e.k0s(),e.j41(10,"div",25),e.EFF(11),e.k0s(),e.DNE(12,Y,3,2,"ng-container",26),e.nI1(13,"async"),e.j41(14,"div",27),e.EFF(15),e.nI1(16,"date"),e.k0s(),e.j41(17,"div",28),e.EFF(18),e.nI1(19,"bkdDaysDifference"),e.k0s(),e.j41(20,"div",29),e.EFF(21),e.nI1(22,"date"),e.nI1(23,"bkdDaysDifference"),e.k0s()()}if(2&i){const g=v.$implicit,b=e.XpG(3);e.R7$(),e.Y8G("ngIf",e.bMT(2,11,b.editable$)),e.R7$(3),e.SpI(" ",g.EventDesignation,""),e.R7$(),e.Y8G("ngIf",g.StudyClassNumber),e.R7$(2),e.Lme(" ",e.i5U(8,13,g.LessonDateTimeFrom,"HH:mm"),"\u2013",e.i5U(9,16,g.LessonDateTimeTo,"HH:mm")," "),e.R7$(4),e.SpI(" ",g.TeacherInformation," "),e.R7$(),e.Y8G("bkdLet",e.bMT(13,19,b.getPresenceTypeDesignation(g))),e.R7$(3),e.SpI(" ",e.i5U(16,21,g.LessonDateTimeFrom,"dd.MM.yyyy")," "),e.R7$(3),e.SpI(" ",e.bMT(19,24,g.LessonDateTimeFrom)," "),e.R7$(3),e.Lme(" ",e.i5U(22,26,g.LessonDateTimeFrom,"dd.MM.yyyy"),", ",e.bMT(23,29,g.LessonDateTimeFrom)," ")}}function V(i,v){if(1&i&&(e.qex(0),e.DNE(1,F,17,16,"div",5),e.nI1(2,"async"),e.DNE(3,K,24,31,"div",6),e.nI1(4,"async"),e.bVm()),2&i){const g=e.XpG(2);e.R7$(),e.Y8G("ngIf",e.bMT(2,2,g.editable$)),e.R7$(2),e.Y8G("ngForOf",e.bMT(4,4,g.lessonPresences$))}}function s(i,v){1&i&&(e.j41(0,"p",34),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.JRh(e.bMT(2,1,"shared.profile.no-absences")))}function a(i,v){if(1&i&&(e.qex(0),e.DNE(1,V,5,6,"ng-container",4),e.nI1(2,"async"),e.DNE(3,s,3,3,"ng-template",null,1,e.C5r),e.bVm()),2&i){let g;const b=e.sdS(4),A=e.XpG();e.R7$(),e.Y8G("ngIf",(null!==(g=null==(g=e.bMT(2,2,A.lessonPresences$))?null:g.length)&&void 0!==g?g:0)>0)("ngIfElse",b)}}function r(i,v){1&i&&e.nrm(0,"bkd-spinner",35)}let n=(()=>{class i{constructor(g){this.presenceTypesService=g,this.selectionService=null,this.displayPresenceType=!0,this.defaultAbsenceSelectionMessage=null,this.reports=null,this.confirmLink="confirm",this.displayEmail=!1,this.lessonPresences$$=new E.m(1),this.lessonPresences$=this.lessonPresences$$.pipe((0,l.w)(),(0,u.Z)(null),(0,o.t)(1)),this.loading$=this.lessonPresences$.pipe((0,p.T)((0,C.AU)(M.cy))),this.selectionService$=new E.m(1),this.editable$=this.selectionService$.pipe((0,p.T)(()=>!0),(0,u.Z)(!1)),this.displayPresenceType$=new h.t(!0),this.allSelected$=(0,y.z)([this.lessonPresences$.pipe((0,D.p)(C.TM)),this.selectionService$.pipe((0,d.n)(b=>b.selection$))]).pipe((0,p.T)(([b,A])=>b.length===A.length))}ngOnChanges(g){g.absences$&&this.lessonPresences$$.next(g.absences$.currentValue),g.selectionService&&g.selectionService.currentValue&&(g.selectionService.currentValue.clear(),this.selectionService$.next(g.selectionService.currentValue)),g.displayPresenceType&&this.displayPresenceType$.next(g.displayPresenceType.currentValue)}toggleAll(g){g?this.lessonPresences$.pipe((0,c.s)(1)).subscribe(b=>this.selectionService?.clear(b)):this.selectionService?.clear()}onRowClick(g,b){if(0===this.checkboxes.length)return;let A;A="number"==typeof b?this.checkboxes.toArray()[b].nativeElement:b,g.target!==A&&!g.target.closest(".buttons")&&A.click()}getPresenceTypeDesignation(g){return this.displayPresenceType$.pipe((0,d.n)(b=>b?this.presenceTypesService.displayedTypes$:(0,T.of)([])),(0,p.T)(b=>g.TypeRef.Id&&b.find(A=>A.Id===g.TypeRef.Id)?.Designation||null))}static#e=this.\u0275fac=function(b){return new(b||i)(e.rXU(N._))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["bkd-student-dossier-absences"]],viewQuery:function(b,A){if(1&b&&e.GBs(H,5),2&b){let L;e.mGM(L=e.lsd())&&(A.checkboxes=L)}},inputs:{absences$:"absences$",selectionService:"selectionService",displayPresenceType:"displayPresenceType",defaultAbsenceSelectionMessage:"defaultAbsenceSelectionMessage",reports:"reports",confirmLink:"confirmLink",displayEmail:"displayEmail",mailTo$:"mailTo$"},standalone:!0,features:[e.OA$,e.aNF],decls:4,vars:4,consts:[["loading",""],["noAbsences",""],["allCheckbox",""],["checkbox",""],[4,"ngIf","ngIfElse"],["class","absence-all",3,"click",4,"ngIf"],["class","absence-entry",3,"click",4,"ngFor","ngForOf"],[1,"absence-all",3,"click"],[1,"checkbox"],["type","checkbox",1,"form-check-input",3,"change","checked"],[1,"all"],[1,"buttons"],[1,"edit","btn","btn-primary","btn-icon","me-2",3,"routerLink"],[1,"material-icons"],["class","me-2",3,"reports","disableIfUnavailable",4,"ngIf"],["class","mail btn btn-primary btn-icon me-2","target","_blank",3,"href",4,"ngIf"],["class","validation",4,"ngIf"],[1,"me-2",3,"reports","disableIfUnavailable"],["target","_blank",1,"mail","btn","btn-primary","btn-icon","me-2",3,"href"],[1,"validation"],[1,"absence-entry",3,"click"],["class","checkbox",4,"ngIf"],[1,"lesson-class"],[4,"ngIf"],[1,"time","pe-2"],[1,"teacher"],[4,"bkdLet"],[1,"date"],[1,"days-ago"],[1,"date-days-ago"],["class","presence-type",4,"ngIf"],["class","presence-type confirm",4,"ngIf"],[1,"presence-type"],[1,"presence-type","confirm"],[1,"mx-3"],[1,"inline","d-block","mb-3"]],template:function(b,A){if(1&b&&(e.DNE(0,a,5,4,"ng-container",4),e.nI1(1,"async"),e.DNE(2,r,1,0,"ng-template",null,0,e.C5r)),2&b){const L=e.sdS(3);e.Y8G("ngIf",!1===e.bMT(1,2,A.loading$))("ngIfElse",L)}},dependencies:[m.bT,f.Wk,w.Z,m.pM,P.N,k.t,m.Jj,m.vh,_.h,_.D9,I.j],styles:['.absence-all[_ngcontent-%COMP%]{padding:0 0 .5rem 1rem;border-bottom:1px solid #dee2e6;display:grid;grid-template-areas:"checkbox all buttons" "validation validation validation";grid-template-columns:min-content 1fr min-content}.absence-entry[_ngcontent-%COMP%]{padding:1rem;border-bottom:1px solid #dee2e6;display:grid;grid-template-areas:"checkbox lesson-class time teacher" "checkbox presence-type date days-ago";grid-template-columns:min-content 2fr 1fr 2fr}.absence-entry[_ngcontent-%COMP%]:first-child{padding-top:0}.absence-all[_ngcontent-%COMP%] + .absence-entry[_ngcontent-%COMP%]{padding-top:1rem}.checkbox[_ngcontent-%COMP%]{grid-area:checkbox;margin:0;padding:.3rem 1rem 0 0}.checkbox[_ngcontent-%COMP%]   input.form-check-input[_ngcontent-%COMP%]{position:static!important;margin:0!important;display:block}.all[_ngcontent-%COMP%]{grid-area:all}.buttons[_ngcontent-%COMP%]{grid-area:buttons;display:flex}.validation[_ngcontent-%COMP%]{grid-area:validation}.validation[_ngcontent-%COMP%], .presence-type.confirm[_ngcontent-%COMP%]{color:#ea161f}.lesson-class[_ngcontent-%COMP%]{grid-area:lesson-class;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.time[_ngcontent-%COMP%]{grid-area:time}.teacher[_ngcontent-%COMP%]{grid-area:teacher}.presence-type[_ngcontent-%COMP%]{color:#adb5bd;grid-area:presence-type}.date[_ngcontent-%COMP%]{grid-area:date}.days-ago[_ngcontent-%COMP%]{color:#adb5bd;grid-area:days-ago}.date-days-ago[_ngcontent-%COMP%]{grid-area:date-days-ago;display:none}@media (max-width: 750px){.absence-entry[_ngcontent-%COMP%]{grid-template-areas:"checkbox lesson-class" "checkbox teacher" "checkbox date-days-ago" "checkbox time" "checkbox presence-type";grid-template-columns:min-content 1fr}.date-days-ago[_ngcontent-%COMP%]{display:block}.date[_ngcontent-%COMP%], .days-ago[_ngcontent-%COMP%]{display:none}}'],changeDetection:0})}return i})()},5063:(S,O,t)=>{t.d(O,{j:()=>E});var m=t(2510),f=t(4438),_=t(3955);let E=(()=>{class h{constructor(T){this.translate=T}transform(T){if(!T)return"";const l=(0,m.m)(T,new Date);return this.translate.instant(`shared.daysDifference.${this.getKey(l)}`,{count:Math.abs(l)})}getKey(T){return 0===T?"today":1===T?"tomorrow":-1===T?"yesterday":T>0?"in":"ago"}static#e=this.\u0275fac=function(l){return new(l||h)(f.rXU(_.c$,16))};static#t=this.\u0275pipe=f.EJ8({name:"bkdDaysDifference",type:h,pure:!0,standalone:!0})}return h})()},9366:(S,O,t)=>{t.d(O,{s:()=>D});var m=t(5212),f=t(6354),_=t(4668),E=t(6697),h=t(9960),y=t(916),T=t(2809),l=t(8268),u=t(9728),o=t(4125),p=t(4438);let D=(()=>{class c extends l.A{constructor(I){super(),this.settings=I,this.selectedIds$=this.selection$.pipe((0,f.T)(d),(0,f.T)(({openAbsencesEntries:M,lessonPresences:C})=>(0,o.BG)([...(0,y.p5)(M),...C])),(0,_.t)(1)),this.selectedLessons$=this.selection$.pipe((0,f.T)(d),(0,f.T)(({openAbsencesEntries:M,lessonPresences:C})=>[...(0,y.p5)(M),...C]),(0,_.t)(1)),this.selectedWithoutPresenceType$=this.selection$.pipe((0,f.T)(d),(0,f.T)(({openAbsencesEntries:M,lessonPresences:C})=>[...(0,y.p5)(M),...C].filter(w=>w.TypeRef.Id===this.settings.absencePresenceTypeId)))}clearNonOpenAbsencesEntries(){this.selection$.pipe((0,E.s)(1),(0,f.T)(d)).subscribe(({openAbsencesEntries:I})=>this.clear(I))}clearNonLessonPresences(){this.selection$.pipe((0,E.s)(1),(0,f.T)(d)).subscribe(({lessonPresences:I})=>this.clear(I))}static#e=this.\u0275fac=function(M){return new(M||c)(p.KVO(T.yy))};static#t=this.\u0275prov=p.jDH({token:c,factory:c.\u0275fac})}return c})();function d(c){return{openAbsencesEntries:c.filter((0,u.tH)(h.h)),lessonPresences:c.filter((0,m.AU)((0,u.tH)(h.h)))}}},9946:(S,O,t)=>{t.d(O,{T:()=>h});var m=t(6354),f=t(2809),_=t(4438),E=t(1626);let h=(()=>{class y{constructor(l,u){this.http=l,this.settings=u}editLessonPresences(l,u,o,p,D){const d={LessonIds:l,PersonIds:u};return void 0!==o&&(d.PresenceTypeId=o),void 0!==p&&(d.ConfirmationValue=p),this.http.put(`${this.settings.apiUrl}/LessonPresences/Edit`,d,D).pipe((0,m.T)(()=>{}))}removeLessonPresences(l,u,o){return this.http.put(`${this.settings.apiUrl}/LessonPresences/Reset`,{LessonIds:l,PersonIds:u,WithComment:!0},o).pipe((0,m.T)(()=>{}))}confirmLessonPresences(l,u,o,p){return this.http.put(`${this.settings.apiUrl}/LessonAbsences/Confirm`,{LessonIds:l,PersonIds:u,AbsenceTypeId:o,ConfirmationValue:p}).pipe((0,m.T)(()=>{}))}static#e=this.\u0275fac=function(u){return new(u||y)(_.KVO(E.Qq),_.KVO(f.yy))};static#t=this.\u0275prov=_.jDH({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})()},8413:(S,O,t)=>{t.d(O,{_:()=>c});var m=t(4668),f=t(6354),_=t(9172),E=t(3294),h=t(2809),y=t(5359),T=t(4438),l=t(5783),u=t(5306);const o=l.NW({Id:l.ai,Active:l.zM,Designation:(0,u.c$)(l.Yj),IsAbsence:l.zM,IsComment:l.zM,IsDispensation:l.zM,IsIncident:l.zM,IsHalfDay:l.zM,NeedsConfirmation:l.zM,Sort:l.ai});var p=t(6952),D=t(1626);let d=(()=>{class P extends p.G{constructor(M,C){super(M,C,o,"PresenceTypes")}static#e=this.\u0275fac=function(C){return new(C||P)(T.KVO(D.Qq),T.KVO(h.yy))};static#t=this.\u0275prov=T.jDH({token:P,factory:P.\u0275fac,providedIn:"root"})}return P})(),c=(()=>{class P{constructor(M,C){this.restService=M,this.settings=C,this.presenceTypes$=this.loadPresenceTypes().pipe((0,m.t)(1)),this.activePresenceTypes$=this.presenceTypes$.pipe((0,f.T)(this.filterActiveTypes.bind(this)),(0,m.t)(1)),this.confirmationTypes$=this.presenceTypes$.pipe((0,f.T)(this.filterConfirmationTypes.bind(this)),(0,m.t)(1)),this.incidentTypes$=this.presenceTypes$.pipe((0,f.T)(this.filterIncidentTypes.bind(this)),(0,m.t)(1)),this.displayedTypes$=this.presenceTypes$.pipe((0,f.T)(this.filterDisplayedTypes.bind(this)),(0,m.t)(1)),this.halfDayActive$=this.presenceTypes$.pipe((0,f.T)(this.isHalfDayActive.bind(this)),(0,_.Z)(!1),(0,E.F)(),(0,m.t)(1))}getPresenceType(M){return this.presenceTypes$.pipe((0,f.T)(C=>{const w=C.find(k=>k.Id===M);if(!w)throw new Error("presence type not found");return w}))}loadPresenceTypes(){return this.restService.getList().pipe((0,f.T)(y.Tj))}filterActiveTypes(M){return M.filter(C=>C.Active)}filterConfirmationTypes(M){return M.filter(C=>C.NeedsConfirmation&&C.Active&&C.Id!==this.settings.absencePresenceTypeId)}filterIncidentTypes(M){return M.filter(C=>C.IsIncident&&C.Active)}filterDisplayedTypes(M){return M.filter(C=>C.Id!==this.settings.absencePresenceTypeId)}isHalfDayActive(M){return!!M.find(C=>C.Id===this.settings.halfDayPresenceTypeId)?.Active}static#e=this.\u0275fac=function(C){return new(C||P)(T.KVO(d),T.KVO(h.yy))};static#t=this.\u0275prov=T.jDH({token:P,factory:P.\u0275fac,providedIn:"root"})}return P})()},8268:(S,O,t)=>{t.d(O,{A:()=>o});var m=t(1413),f=t(3984),_=t(2771),E=t(2816),h=t(9172),y=t(6354),T=t(3294),l=t(4438),u=function(p){return p.ToggleSelection="TOGGLE",p.ClearSelection="CLEAR",p}(u||{});let o=(()=>{class p{constructor(){this.action$=new m.B,this.selection$=(0,f.x)(this.action$.pipe((0,E.S)(this.reduceSelection.bind(this),[]),(0,h.Z)([])),{connector:()=>new _.m(1)}),this.selectionSub=this.selection$.connect()}ngOnDestroy(){this.selectionSub.unsubscribe()}toggle(d){this.action$.next({type:u.ToggleSelection,payload:d})}clear(d=null){this.action$.next({type:u.ClearSelection,payload:d})}isSelected$(d){return this.selection$.pipe((0,y.T)(c=>c.includes(d)),(0,T.F)())}reduceSelection(d,c){switch(c.type){case u.ToggleSelection:return d.includes(c.payload)?d.filter(P=>P!==c.payload):[...d,c.payload];case u.ClearSelection:return c.payload||[];default:return d}}static#e=this.\u0275fac=function(c){return new(c||p)};static#t=this.\u0275prov=l.jDH({token:p,factory:p.\u0275fac})}return p})()},5421:(S,O,t)=>{function h(l){return 0===l.length}function T(l){return Array.isArray(l)}t.d(O,{VP:()=>h,cy:()=>T})},8156:(S,O,t)=>{t.d(O,{IK:()=>p,Oi:()=>o,v:()=>u});var m=t(4572),f=t(7673),_=t(983),E=t(5964),h=t(5558),y=t(9172),T=t(6354),l=t(4668);function u(d,c,P){return(0,m.z)([d,c]).pipe((0,E.p)(([I,M])=>M),(0,h.n)(([I,M])=>{const C=P?I?.get(P)||null:I;return C?C.statusChanges.pipe((0,y.Z)(C.status),(0,T.T)(()=>function D(d){return d?Object.keys(d.errors||{}).map(c=>({error:c,params:d.errors&&d.errors[c]instanceof Object?d.errors[c]:null})):[]}(C))):(0,f.of)([])}),(0,y.Z)([]),(0,l.t)(1))}function o(d,c){return d.pipe((0,T.T)(P=>P.get(c)||null))}function p(d,c){return o(d,c).pipe((0,h.n)(P=>P?P.valueChanges:_.w))}},3382:(S,O,t)=>{function m(f){return _=>f(..._)}t.d(O,{i:()=>m})},4125:(S,O,t)=>{t.d(O,{BG:()=>_,Jr:()=>f,L0:()=>y,wB:()=>h});var m=t(4903);function f(T){const l=T.reduce((u,o)=>(u[o.StudentRef.Id]||(u[o.StudentRef.Id]=[]),u[o.StudentRef.Id].push(o.LessonRef.Id),u),{});return Object.keys(l).map(u=>({personIds:[Number(u)],lessonIds:l[u]}))}function _(T){const l={};return T.forEach(u=>{l[u.StudentRef.Id]||(l[u.StudentRef.Id]={}),l[u.StudentRef.Id][String(u.TypeRef.Id)]||(l[u.StudentRef.Id][String(u.TypeRef.Id)]=[]),l[u.StudentRef.Id][String(u.TypeRef.Id)].push(u.LessonRef.Id)}),Object.keys(l).reduce((u,o)=>[...u,...Object.keys(l[o]).map(p=>({personId:Number(o),presenceTypeId:"null"===p?null:Number(p),lessonIds:l[o][String(p)]}))],[])}function h(T){return T.slice().sort((l,u)=>l.LessonDateTimeFrom.getTime()-u.LessonDateTimeFrom.getTime())}function y(T){return`${T.EventDesignation}, ${(0,m.GP)(T.LessonDateTimeFrom,"dd.MM.yyyy")}, ${(0,m.GP)(T.LessonDateTimeFrom,"HH:mm")}-${(0,m.GP)(T.LessonDateTimeTo,"HH:mm")}`}},5359:(S,O,t)=>{function m(E){return E.slice().sort((h,y)=>h.Sort-y.Sort)}function f(E){return E.map(h=>({Key:h.Id,Value:h.Designation||""}))}function _(E,h){return E.map(y=>Object.assign(y,{Group:h}))}t.d(O,{Tj:()=>m,Wk:()=>_,mC:()=>f})},5212:(S,O,t)=>{t.d(O,{AU:()=>o}),t(8633);var o=function(d){return function(c){return!d(c)}}},7799:(S,O,t)=>{t.d(O,{w:()=>_});var m=t(5558),f=t(3669);function _(){return(0,m.n)(f.D)}},1666:(S,O,t)=>{t.d(O,{q:()=>f});let m={};function f(){return m}},8488:(S,O,t)=>{t.d(O,{m:()=>E});const m=(h,y)=>{switch(h){case"P":return y.date({width:"short"});case"PP":return y.date({width:"medium"});case"PPP":return y.date({width:"long"});default:return y.date({width:"full"})}},f=(h,y)=>{switch(h){case"p":return y.time({width:"short"});case"pp":return y.time({width:"medium"});case"ppp":return y.time({width:"long"});default:return y.time({width:"full"})}},E={p:f,P:(h,y)=>{const T=h.match(/(P+)(p+)?/)||[],l=T[1],u=T[2];if(!u)return m(h,y);let o;switch(l){case"P":o=y.dateTime({width:"short"});break;case"PP":o=y.dateTime({width:"medium"});break;case"PPP":o=y.dateTime({width:"long"});break;default:o=y.dateTime({width:"full"})}return o.replace("{{date}}",m(l,y)).replace("{{time}}",f(u,y))}}},5872:(S,O,t)=>{t.d(O,{G:()=>f});var m=t(4273);function f(_){const E=(0,m.a)(_),h=new Date(Date.UTC(E.getFullYear(),E.getMonth(),E.getDate(),E.getHours(),E.getMinutes(),E.getSeconds(),E.getMilliseconds()));return h.setUTCFullYear(E.getFullYear()),+_-+h}},7195:(S,O,t)=>{t.d(O,{Ss:()=>y,ef:()=>E,xM:()=>h});const m=/^D+$/,f=/^Y+$/,_=["D","DD","YY","YYYY"];function E(l){return m.test(l)}function h(l){return f.test(l)}function y(l,u,o){const p=function T(l,u,o){const p="Y"===l[0]?"years":"days of the month";return`Use \`${l.toLowerCase()}\` instead of \`${l}\` (in \`${u}\`) for formatting ${p} to the input \`${o}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(l,u,o);if(console.warn(p),_.includes(l))throw new RangeError(p)}},906:(S,O,t)=>{t.d(O,{f:()=>_});var m=t(4273),f=t(7729);function _(h,y){const T=(0,m.a)(h);return isNaN(y)?(0,f.w)(h,NaN):(y&&T.setDate(T.getDate()+y),T)}},9857:(S,O,t)=>{t.d(O,{Cg:()=>T,_m:()=>u,my:()=>h,s0:()=>l,w4:()=>y}),Math.pow(10,8);const h=6048e5,y=864e5,T=6e4,l=36e5,u=1e3},7729:(S,O,t)=>{function m(_,E){return _ instanceof Date?new _.constructor(E):new Date(E)}t.d(O,{w:()=>m})},2510:(S,O,t)=>{t.d(O,{m:()=>E});var m=t(9857),f=t(3601),_=t(5872);function E(y,T){const l=(0,f.o)(y),u=(0,f.o)(T),o=+l-(0,_.G)(l),p=+u-(0,_.G)(u);return Math.round((o-p)/m.w4)}},4903:(S,O,t)=>{t.d(O,{GP:()=>Y});var m=t(3501),f=t(1666),_=t(2510),E=t(4273),h=t(7729);var o=t(6453),p=t(910),D=t(7012),d=t(6045);function c(s,a){return(s<0?"-":"")+Math.abs(s).toString().padStart(a,"0")}const P={y(s,a){const r=s.getFullYear(),n=r>0?r:1-r;return c("yy"===a?n%100:n,a.length)},M(s,a){const r=s.getMonth();return"M"===a?String(r+1):c(r+1,2)},d:(s,a)=>c(s.getDate(),a.length),a(s,a){const r=s.getHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return"am"===r?"a.m.":"p.m."}},h:(s,a)=>c(s.getHours()%12||12,a.length),H:(s,a)=>c(s.getHours(),a.length),m:(s,a)=>c(s.getMinutes(),a.length),s:(s,a)=>c(s.getSeconds(),a.length),S(s,a){const r=a.length,n=s.getMilliseconds();return c(Math.trunc(n*Math.pow(10,r-3)),a.length)}},M={G:function(s,a,r){const n=s.getFullYear()>0?1:0;switch(a){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});default:return r.era(n,{width:"wide"})}},y:function(s,a,r){if("yo"===a){const n=s.getFullYear();return r.ordinalNumber(n>0?n:1-n,{unit:"year"})}return P.y(s,a)},Y:function(s,a,r,n){const i=(0,d.h)(s,n),v=i>0?i:1-i;return"YY"===a?c(v%100,2):"Yo"===a?r.ordinalNumber(v,{unit:"year"}):c(v,a.length)},R:function(s,a){return c((0,p.p)(s),a.length)},u:function(s,a){return c(s.getFullYear(),a.length)},Q:function(s,a,r){const n=Math.ceil((s.getMonth()+1)/3);switch(a){case"Q":return String(n);case"QQ":return c(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(s,a,r){const n=Math.ceil((s.getMonth()+1)/3);switch(a){case"q":return String(n);case"qq":return c(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(s,a,r){const n=s.getMonth();switch(a){case"M":case"MM":return P.M(s,a);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(s,a,r){const n=s.getMonth();switch(a){case"L":return String(n+1);case"LL":return c(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(s,a,r,n){const i=(0,D.N)(s,n);return"wo"===a?r.ordinalNumber(i,{unit:"week"}):c(i,a.length)},I:function(s,a,r){const n=(0,o.s)(s);return"Io"===a?r.ordinalNumber(n,{unit:"week"}):c(n,a.length)},d:function(s,a,r){return"do"===a?r.ordinalNumber(s.getDate(),{unit:"date"}):P.d(s,a)},D:function(s,a,r){const n=function l(s){const a=(0,E.a)(s);return(0,_.m)(a,function y(s){const a=(0,E.a)(s),r=(0,h.w)(s,0);return r.setFullYear(a.getFullYear(),0,1),r.setHours(0,0,0,0),r}(a))+1}(s);return"Do"===a?r.ordinalNumber(n,{unit:"dayOfYear"}):c(n,a.length)},E:function(s,a,r){const n=s.getDay();switch(a){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(s,a,r,n){const i=s.getDay(),v=(i-n.weekStartsOn+8)%7||7;switch(a){case"e":return String(v);case"ee":return c(v,2);case"eo":return r.ordinalNumber(v,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(s,a,r,n){const i=s.getDay(),v=(i-n.weekStartsOn+8)%7||7;switch(a){case"c":return String(v);case"cc":return c(v,a.length);case"co":return r.ordinalNumber(v,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(s,a,r){const n=s.getDay(),i=0===n?7:n;switch(a){case"i":return String(i);case"ii":return c(i,a.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(s,a,r){const i=s.getHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(s,a,r){const n=s.getHours();let i;switch(i=12===n?"noon":0===n?"midnight":n/12>=1?"pm":"am",a){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(s,a,r){const n=s.getHours();let i;switch(i=n>=17?"evening":n>=12?"afternoon":n>=4?"morning":"night",a){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(s,a,r){if("ho"===a){let n=s.getHours()%12;return 0===n&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return P.h(s,a)},H:function(s,a,r){return"Ho"===a?r.ordinalNumber(s.getHours(),{unit:"hour"}):P.H(s,a)},K:function(s,a,r){const n=s.getHours()%12;return"Ko"===a?r.ordinalNumber(n,{unit:"hour"}):c(n,a.length)},k:function(s,a,r){let n=s.getHours();return 0===n&&(n=24),"ko"===a?r.ordinalNumber(n,{unit:"hour"}):c(n,a.length)},m:function(s,a,r){return"mo"===a?r.ordinalNumber(s.getMinutes(),{unit:"minute"}):P.m(s,a)},s:function(s,a,r){return"so"===a?r.ordinalNumber(s.getSeconds(),{unit:"second"}):P.s(s,a)},S:function(s,a){return P.S(s,a)},X:function(s,a,r){const n=s.getTimezoneOffset();if(0===n)return"Z";switch(a){case"X":return w(n);case"XXXX":case"XX":return k(n);default:return k(n,":")}},x:function(s,a,r){const n=s.getTimezoneOffset();switch(a){case"x":return w(n);case"xxxx":case"xx":return k(n);default:return k(n,":")}},O:function(s,a,r){const n=s.getTimezoneOffset();switch(a){case"O":case"OO":case"OOO":return"GMT"+C(n,":");default:return"GMT"+k(n,":")}},z:function(s,a,r){const n=s.getTimezoneOffset();switch(a){case"z":case"zz":case"zzz":return"GMT"+C(n,":");default:return"GMT"+k(n,":")}},t:function(s,a,r){return c(Math.trunc(s.getTime()/1e3),a.length)},T:function(s,a,r){return c(s.getTime(),a.length)}};function C(s,a=""){const r=s>0?"-":"+",n=Math.abs(s),i=Math.trunc(n/60),v=n%60;return 0===v?r+String(i):r+String(i)+a+c(v,2)}function w(s,a){return s%60==0?(s>0?"-":"+")+c(Math.abs(s)/60,2):k(s,a)}function k(s,a=""){const r=s>0?"-":"+",n=Math.abs(s);return r+c(Math.trunc(n/60),2)+a+c(n%60,2)}var e=t(8488),N=t(7195);const F=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,B=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,j=/^'([^]*?)'?$/,$=/''/g,G=/[a-zA-Z]/;function Y(s,a,r){const n=(0,f.q)(),i=r?.locale??n.locale??m.c,v=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,g=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,b=(0,E.a)(s);if(!function W(s){if(!function H(s){return s instanceof Date||"object"==typeof s&&"[object Date]"===Object.prototype.toString.call(s)}(s)&&"number"!=typeof s)return!1;const a=(0,E.a)(s);return!isNaN(Number(a))}(b))throw new RangeError("Invalid time value");let A=a.match(B).map(R=>{const U=R[0];return"p"===U||"P"===U?(0,e.m[U])(R,i.formatLong):R}).join("").match(F).map(R=>{if("''"===R)return{isToken:!1,value:"'"};const U=R[0];if("'"===U)return{isToken:!1,value:K(R)};if(M[U])return{isToken:!0,value:R};if(U.match(G))throw new RangeError("Format string contains an unescaped latin alphabet character `"+U+"`");return{isToken:!1,value:R}});i.localize.preprocessor&&(A=i.localize.preprocessor(b,A));const L={firstWeekContainsDate:v,weekStartsOn:g,locale:i};return A.map(R=>{if(!R.isToken)return R.value;const U=R.value;return(!r?.useAdditionalWeekYearTokens&&(0,N.xM)(U)||!r?.useAdditionalDayOfYearTokens&&(0,N.ef)(U))&&(0,N.Ss)(U,a,String(s)),(0,M[U[0]])(b,U,i.localize,L)}).join("")}function K(s){const a=s.match(j);return a?a[1].replace($,"'"):s}},6453:(S,O,t)=>{t.d(O,{s:()=>l});var m=t(9857),f=t(8152),_=t(910),E=t(7729),T=t(4273);function l(o){const p=(0,T.a)(o),D=+(0,f.b)(p)-+function h(o){const p=(0,_.p)(o),D=(0,E.w)(o,0);return D.setFullYear(p,0,4),D.setHours(0,0,0,0),(0,f.b)(D)}(p);return Math.round(D/m.my)+1}},910:(S,O,t)=>{t.d(O,{p:()=>E});var m=t(7729),f=t(8152),_=t(4273);function E(y){const T=(0,_.a)(y),l=T.getFullYear(),u=(0,m.w)(y,0);u.setFullYear(l+1,0,4),u.setHours(0,0,0,0);const o=(0,f.b)(u),p=(0,m.w)(y,0);p.setFullYear(l,0,4),p.setHours(0,0,0,0);const D=(0,f.b)(p);return T.getTime()>=o.getTime()?l+1:T.getTime()>=D.getTime()?l:l-1}},7012:(S,O,t)=>{t.d(O,{N:()=>u});var m=t(9857),f=t(7793),_=t(7729),E=t(6045),h=t(1666),l=t(4273);function u(p,D){const d=(0,l.a)(p),c=+(0,f.k)(d,D)-+function y(p,D){const d=(0,h.q)(),c=D?.firstWeekContainsDate??D?.locale?.options?.firstWeekContainsDate??d.firstWeekContainsDate??d.locale?.options?.firstWeekContainsDate??1,P=(0,E.h)(p,D),I=(0,_.w)(p,0);return I.setFullYear(P,0,c),I.setHours(0,0,0,0),(0,f.k)(I,D)}(d,D);return Math.round(c/m.my)+1}},6045:(S,O,t)=>{t.d(O,{h:()=>h});var m=t(7729),f=t(7793),_=t(4273),E=t(1666);function h(T,l){const u=(0,_.a)(T),o=u.getFullYear(),p=(0,E.q)(),D=l?.firstWeekContainsDate??l?.locale?.options?.firstWeekContainsDate??p.firstWeekContainsDate??p.locale?.options?.firstWeekContainsDate??1,d=(0,m.w)(T,0);d.setFullYear(o+1,0,D),d.setHours(0,0,0,0);const c=(0,f.k)(d,l),P=(0,m.w)(T,0);P.setFullYear(o,0,D),P.setHours(0,0,0,0);const I=(0,f.k)(P,l);return u.getTime()>=c.getTime()?o+1:u.getTime()>=I.getTime()?o:o-1}},3501:(S,O,t)=>{t.d(O,{c:()=>a});const m={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function _(n){return(i={})=>{const v=i.width?String(i.width):n.defaultWidth;return n.formats[v]||n.formats[n.defaultWidth]}}const T={date:_({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:_({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:_({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},l={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function o(n){return(i,v)=>{let b;if("formatting"===(v?.context?String(v.context):"standalone")&&n.formattingValues){const L=n.defaultFormattingWidth||n.defaultWidth,R=v?.width?String(v.width):L;b=n.formattingValues[R]||n.formattingValues[L]}else{const L=n.defaultWidth,R=v?.width?String(v.width):n.defaultWidth;b=n.values[R]||n.values[L]}return b[n.argumentCallback?n.argumentCallback(i):i]}}function w(n){return(i,v={})=>{const g=v.width,A=i.match(g&&n.matchPatterns[g]||n.matchPatterns[n.defaultMatchWidth]);if(!A)return null;const L=A[0],R=g&&n.parsePatterns[g]||n.parsePatterns[n.defaultParseWidth],U=Array.isArray(R)?function e(n,i){for(let v=0;v<n.length;v++)if(i(n[v]))return v}(R,J=>J.test(L)):function k(n,i){for(const v in n)if(Object.prototype.hasOwnProperty.call(n,v)&&i(n[v]))return v}(R,J=>J.test(L));let X;return X=n.valueCallback?n.valueCallback(U):U,X=v.valueCallback?v.valueCallback(X):X,{value:X,rest:i.slice(L.length)}}}const a={code:"en-US",formatDistance:(n,i,v)=>{let g;const b=m[n];return g="string"==typeof b?b:1===i?b.one:b.other.replace("{{count}}",i.toString()),v?.addSuffix?v.comparison&&v.comparison>0?"in "+g:g+" ago":g},formatLong:T,formatRelative:(n,i,v,g)=>l[n],localize:{ordinalNumber:(n,i)=>{const v=Number(n),g=v%100;if(g>20||g<10)switch(g%10){case 1:return v+"st";case 2:return v+"nd";case 3:return v+"rd"}return v+"th"},era:o({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:o({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:n=>n-1}),month:o({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:o({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:o({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:function N(n){return(i,v={})=>{const g=i.match(n.matchPattern);if(!g)return null;const b=g[0],A=i.match(n.parsePattern);if(!A)return null;let L=n.valueCallback?n.valueCallback(A[0]):A[0];return L=v.valueCallback?v.valueCallback(L):L,{value:L,rest:i.slice(b.length)}}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:n=>parseInt(n,10)}),era:w({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:w({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:n=>n+1}),month:w({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:w({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:w({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}}},3601:(S,O,t)=>{t.d(O,{o:()=>f});var m=t(4273);function f(E){const h=(0,m.a)(E);return h.setHours(0,0,0,0),h}},8152:(S,O,t)=>{t.d(O,{b:()=>f});var m=t(7793);function f(E){return(0,m.k)(E,{weekStartsOn:1})}},7793:(S,O,t)=>{t.d(O,{k:()=>_});var m=t(4273),f=t(1666);function _(h,y){const T=(0,f.q)(),l=y?.weekStartsOn??y?.locale?.options?.weekStartsOn??T.weekStartsOn??T.locale?.options?.weekStartsOn??0,u=(0,m.a)(h),o=u.getDay(),p=(o<l?7:0)+o-l;return u.setDate(u.getDate()-p),u.setHours(0,0,0,0),u}},7165:(S,O,t)=>{t.d(O,{e:()=>f});var m=t(906);function f(E,h){return(0,m.f)(E,-h)}},4273:(S,O,t)=>{function m(_){const E=Object.prototype.toString.call(_);return _ instanceof Date||"object"==typeof _&&"[object Date]"===E?new _.constructor(+_):"number"==typeof _||"[object Number]"===E||"string"==typeof _||"[object String]"===E?new Date(_):new Date(NaN)}t.d(O,{a:()=>m})},7672:(S,O,t)=>{t.d(O,{A:()=>Q});var m=t(8587);const h=function E(W){return W!=W},p=function o(W,x){return!(null==W||!W.length)&&function l(W,x,F){return x==x?function y(W,x,F){for(var B=F-1,j=W.length;++B<j;)if(W[B]===x)return B;return-1}(W,x,F):function f(W,x,F,B){for(var j=W.length,$=F+(B?1:-1);B?$--:++$<j;)if(x(W[$],$,W))return $;return-1}(W,h,F)}(W,x,0)>-1},d=function D(W,x,F){for(var B=-1,j=null==W?0:W.length;++B<j;)if(F(x,W[B]))return!0;return!1};var c=t(5934),P=t(4226);var C=t(3998);const e=P.A&&1/(0,C.A)(new P.A([,-0]))[1]==1/0?function(W){return new P.A(W)}:function I(){},Q=function H(W,x,F){var B=-1,j=p,$=W.length,G=!0,Y=[],K=Y;if(F)G=!1,j=d;else if($>=200){var V=x?null:e(W);if(V)return(0,C.A)(V);G=!1,j=c.A,K=new m.A}else K=x?[]:Y;e:for(;++B<$;){var s=W[B],a=x?x(s):s;if(s=F||0!==s?s:0,G&&a==a){for(var r=K.length;r--;)if(K[r]===a)continue e;x&&K.push(a),Y.push(s)}else j(K,a,F)||(K!==Y&&K.push(a),Y.push(s))}return Y}},5042:(S,O,t)=>{t.d(O,{A:()=>E});var m=t(5405),f=t(7672);const E=function _(h,y){return h&&h.length?(0,f.A)(h,(0,m.A)(y,2)):[]}}}]);