import{f as ce,g as ue}from"./chunk-T3RXR53P.js";import{a as pe}from"./chunk-OPBS6UPJ.js";import{a as me}from"./chunk-BEUB5I56.js";import{g as H,h as z}from"./chunk-2QS7YZBA.js";import{a as se}from"./chunk-EM4LGRAI.js";import{b as q}from"./chunk-RQ4AUPQL.js";import{d as le}from"./chunk-BUXIO2ZG.js";import{a as j,b as Z}from"./chunk-GKIJ2K7S.js";import{b as de}from"./chunk-DQAQYQ7K.js";import{f as J,h as B,t as re,z as E}from"./chunk-C3LYZ6LV.js";import{Ad as w,Cb as y,Ec as u,Fc as v,Fd as U,Gc as R,Ib as ee,Ka as M,Kb as te,Ob as s,Od as x,Pd as k,Rc as X,Tb as l,Ub as c,Vb as d,ac as p,ba as $,dd as ne,ec as g,gb as C,gd as oe,ja as D,jb as o,mc as r,nc as b,oc as _,pa as f,pc as S,q as F,v as L,va as Q,vc as ie,w as N,wb as I,wc as O,xc as h,xe as ae,zb as W,zd as m}from"./chunk-6PRZEEKG.js";function Ae(t,a){if(t&1&&(r(0),d(1,"br")),t&2){let e=p();_(" ",e.student().AddressLine2,"")}}function Le(t,a){if(t&1&&(l(0,"a",0),r(1),c(),d(2,"br")),t&2){let e=p();g("href","tel:",e.student().PhonePrivate,"",C),o(),_(" ",e.student().PhonePrivate," ")}}function De(t,a){if(t&1&&(l(0,"a",0),r(1),c(),d(2,"br")),t&2){let e=p();g("href","tel:",e.student().PhoneMobile,"",C),o(),_(" ",e.student().PhoneMobile," ")}}function Ee(t,a){if(t&1&&(l(0,"a",0),r(1),c()),t&2){let e=p();g("href","mailto:",e.email(),"",C),o(),_(" ",e.email()," ")}}var it=(()=>{class t{constructor(){this.student=M.required(),this.emailProperty=M("DisplayEmail"),this.postalCode=X(()=>{let e=this.student();return"PostalCode"in e?e.PostalCode:e.Zip}),this.email=X(()=>{let e=this.student();return this.emailProperty()==="Email2"&&"Email2"in e?e.Email2||null:e.DisplayEmail})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=I({type:t,selectors:[["bkd-student-dossier-address"]],inputs:{student:[1,"student"],emailProperty:[1,"emailProperty"]},decls:9,vars:7,consts:[[3,"href"]],template:function(i,n){i&1&&(l(0,"address"),r(1),d(2,"br"),y(3,Ae,2,1),r(4),d(5,"br"),y(6,Le,3,3)(7,De,3,3)(8,Ee,2,3,"a",0),c()),i&2&&(o(),_(" ",n.student().AddressLine1,""),o(2),s(n.student().AddressLine2?3:-1),o(),S(" ",n.postalCode()||""," ",n.student().Location,""),o(2),s(n.student().PhonePrivate?6:-1),o(),s(n.student().PhoneMobile?7:-1),o(),s(n.email()?8:-1))},styles:["address[_ngcontent-%COMP%]{padding-left:1rem}"],changeDetection:0})}}return t})();var G=(()=>{class t{transform(e){return e?.DisplayEmail||e?.Email||e?.Email2||null}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275pipe=W({name:"bkdPersonEmail",type:t,pure:!0})}}return t})();function Te(t,a){if(t&1&&(r(0),d(1,"br")),t&2){p(2);let e=h(0);_(" ",e.CompanyName,"")}}function Me(t,a){if(t&1&&(r(0),d(1,"br")),t&2){p(2);let e=h(0);_(" ",e.CompanyNameAddition,"")}}function Re(t,a){if(t&1&&(r(0),d(1,"br")),t&2){p(2);let e=h(0);S(" ",e.Lastname||""," ",e.Firstname||"","")}}function ke(t,a){if(t&1&&(r(0),d(1,"br")),t&2){p(2);let e=h(0);_(" ",e.AddressLine1,"")}}function Fe(t,a){if(t&1&&(r(0),d(1,"br")),t&2){p(2);let e=h(0);_(" ",e.AddressLine2,"")}}function Ne(t,a){if(t&1&&(r(0),d(1,"br")),t&2){p(2);let e=h(0);S(" ",e.PostalCode," ",e.Location,"")}}function Oe(t,a){if(t&1&&(l(0,"a",1),r(1),d(2,"br"),c()),t&2){p(2);let e=h(0);g("href","tel:",e.PhoneBusiness,"",C),o(),b(e.PhoneBusiness)}}function Be(t,a){if(t&1&&(l(0,"a",1),u(1,"bkdPersonEmail"),r(2),u(3,"bkdPersonEmail"),c()),t&2){p(2);let e=h(0);g("href","mailto:",v(1,3,e),"",C),o(2),b(v(3,5,e))}}function we(t,a){if(t&1&&(l(0,"address"),y(1,Te,2,1)(2,Me,2,1)(3,Re,2,2)(4,ke,2,1)(5,Fe,2,1)(6,Ne,2,2)(7,Oe,3,3,"a",1)(8,Be,4,7,"a",1),u(9,"bkdPersonEmail"),c()),t&2){p();let e=h(0);o(),s(e.CompanyName?1:-1),o(),s(e.CompanyNameAddition?2:-1),o(),s(e.Lastname||e.Firstname?3:-1),o(),s(e.AddressLine1?4:-1),o(),s(e.AddressLine2?5:-1),o(),s(e.PostalCode&&e.Location?6:-1),o(),s(e.PhoneBusiness?7:-1),o(),s(v(9,8,e)?8:-1)}}function Ue(t,a){if(t&1&&(l(0,"div",0),r(1),u(2,"translate"),u(3,"addSpace"),d(4,"br"),r(5),u(6,"date"),u(7,"date"),c()),t&2){p();let e=h(1);o(),S(" ",v(2,4,"shared.profile.apprenticeship-period"),"",R(3,6,":",":"),""),o(4),S(" ",R(6,9,e.ContractDateFrom,"dd.MM.yyyy"),"\u2013",R(7,12,e.ContractDateTo,"dd.MM.yyyy")," ")}}function je(t,a){if(t&1&&(r(0),d(1,"br")),t&2){p(2);let e=h(2);S(" ",e.Lastname||""," ",e.Firstname||"","")}}function ze(t,a){if(t&1&&(l(0,"a",1),r(1),d(2,"br"),c()),t&2){p(2);let e=h(2);g("href","tel:",e.PhoneBusiness,"",C),o(),b(e.PhoneBusiness)}}function Ge(t,a){if(t&1&&(l(0,"a",1),r(1),d(2,"br"),c()),t&2){p(2);let e=h(2);g("href","tel:",e.PhoneMobile,"",C),o(),b(e.PhoneMobile)}}function Ye(t,a){if(t&1&&(l(0,"a",1),u(1,"bkdPersonEmail"),r(2),u(3,"bkdPersonEmail"),c()),t&2){p(2);let e=h(2);g("href","mailto:",v(1,3,e),"",C),o(2),b(v(3,5,e))}}function $e(t,a){if(t&1&&(l(0,"div",0),r(1),u(2,"translate"),u(3,"addSpace"),l(4,"address"),y(5,je,2,2)(6,ze,3,3,"a",1)(7,Ge,3,3,"a",1)(8,Ye,4,7,"a",1),u(9,"bkdPersonEmail"),c()()),t&2){p();let e=h(2);o(),S(" ",v(2,6,"shared.profile.job-trainer"),"",R(3,8,":",":")," "),o(4),s(e.Lastname||e.Firstname?5:-1),o(),s(e.PhoneBusiness?6:-1),o(),s(e.PhoneMobile?7:-1),o(),s(v(9,11,e)?8:-1)}}var mt=(()=>{class t{constructor(){this.apprenticeship=M.required()}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=I({type:t,selectors:[["bkd-student-dossier-apprenticeship"]],inputs:{apprenticeship:[1,"apprenticeship"]},decls:6,vars:6,consts:[[1,"subentry"],[3,"href"]],template:function(i,n){if(i&1&&(ie(0)(1)(2),y(3,we,10,10,"address")(4,Ue,8,15,"div",0)(5,$e,10,13,"div",0)),i&2){let P=O(n.apprenticeship().apprenticeshipManager);o();let T=O(n.apprenticeship().apprenticeshipContract);o();let Y=O(n.apprenticeship().jobTrainer);o(),s(P?3:-1),o(),s(T.ContractDateFrom?4:-1),o(),s(Y?5:-1)}},dependencies:[oe,ae,ue,G],styles:[".subentry[_ngcontent-%COMP%]{padding-bottom:1rem}"],changeDetection:0})}}return t})();function Xe(t,a){if(t&1&&(r(0),d(1,"br")),t&2){let e=p();_(" ",e.person.AddressLine1,"")}}function Je(t,a){if(t&1&&(r(0),d(1,"br")),t&2){let e=p();_(" ",e.person.AddressLine2,"")}}function He(t,a){if(t&1&&(r(0),d(1,"br")),t&2){let e=p();S(" ",e.person.Zip," ",e.person.Location,"")}}function Ze(t,a){if(t&1&&(l(0,"a",0),r(1),d(2,"br"),c()),t&2){let e=p();g("href","tel:",e.person.PhonePrivate,"",C),o(),b(e.person.PhonePrivate)}}function qe(t,a){if(t&1&&(l(0,"a",0),r(1),d(2,"br"),c()),t&2){let e=p();g("href","tel:",e.person.PhoneMobile,"",C),o(),b(e.person.PhoneMobile)}}function Ve(t,a){if(t&1&&(l(0,"a",0),u(1,"bkdPersonEmail"),r(2),u(3,"bkdPersonEmail"),c()),t&2){let e=p();g("href","mailto:",v(1,3,e.person),"",C),o(2),b(v(3,5,e.person))}}var ht=(()=>{class t{constructor(){}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=I({type:t,selectors:[["bkd-student-dossier-legal-representative"]],inputs:{person:"person"},decls:10,vars:10,consts:[[3,"href"]],template:function(i,n){i&1&&(l(0,"address"),r(1),d(2,"br"),y(3,Xe,2,1)(4,Je,2,1)(5,He,2,2)(6,Ze,3,3,"a",0)(7,qe,3,3,"a",0)(8,Ve,4,7,"a",0),u(9,"bkdPersonEmail"),c()),i&2&&(o(),S(" ",n.person.LastName," ",n.person.FirstName,""),o(2),s(n.person.AddressLine1?3:-1),o(),s(n.person.AddressLine2?4:-1),o(),s(n.person.Zip&&n.person.Zip?5:-1),o(),s(n.person.PhonePrivate?6:-1),o(),s(n.person.PhoneMobile?7:-1),o(),s(v(9,8,n.person)?8:-1))},dependencies:[G],encapsulation:2,changeDetection:0})}}return t})();var fe=U({Email:x(m),Email2:x(m),PhoneBusiness:x(m),CompanyName:k(m),CompanyNameAddition:k(m),Firstname:x(m),Lastname:x(m),AddressLine1:k(m),AddressLine2:k(m),PostalCode:x(m),Location:x(m),Id:w});var he=(()=>{class t extends j{constructor(){let e=f(B),i=f(E);super(e,i,fe,"ApprenticeshipManagers")}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var xe=U({Email:x(m),Email2:x(m),PhoneBusiness:x(m),PhoneMobile:x(m),Firstname:x(m),Lastname:x(m),Id:w});var Ce=(()=>{class t extends j{constructor(){let e=f(B),i=f(E);super(e,i,xe,"JobTrainers")}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function V(t,a){let e=+H(t)-+H(a);return e<0?-1:e>0?1:e}function ge(t,a,e){let[i,n]=z(e?.in,t,a);return i.getFullYear()-n.getFullYear()}function _e(t,a,e){let[i,n]=z(e?.in,t,a),P=V(i,n),T=Math.abs(ge(i,n));i.setFullYear(1584),n.setFullYear(1584);let Y=V(i,n)===-P,K=P*(T-+Y);return K===0?0:K}var Qe=18;function ve(t){return _e(new Date,t.Birthdate||new Date)>=Qe}var Se="dossier-myself",Pe="dossier-student",be="dossier-legal-reps",ye="dossier-apprenticeships",Ie="dossier-stay-permit",ai=(()=>{class t{constructor(){this.studentService=f(ce),this.personsService=f(le),this.apprenticeshipManagersService=f(he),this.jobTrainersService=f(Ce),this.dropDownItemsService=f(pe),this.loadingService=f(me),this.IGNORE_404_CONTEXT=new J().set(q,{disableErrorHandlingForStatus:[404]}),this.loadingStudent$=this.loadingService.loading(Pe),this.loadingMyself$=this.loadingService.loading(Se),this.loadingLegalRepresentatives$=this.loadingService.loading(be),this.loadingApprenticeships$=this.loadingService.loading(ye),this.loadingStayPermit$=this.loadingService.loading(Ie)}getStudent(e){return this.loadingService.load(this.personsService.get(e,{context:this.IGNORE_404_CONTEXT}).pipe(L(i=>this.createStudentFromPerson(i)),Z()),Pe)}createStudentFromPerson(e){return{Id:e.Id,AddressLine1:e.AddressLine1,AddressLine2:e.AddressLine2,Birthdate:e.Birthdate,DisplayEmail:e.DisplayEmail,FirstName:e.FirstName??"",FullName:e.FullName??"",Gender:e.Gender??"X",LastName:e.LastName??"",Location:e.Location,PhoneMobile:e.PhoneMobile,PhonePrivate:e.PhonePrivate,PostalCode:e.Zip}}getMyself(){return this.loadingService.load(this.personsService.getMyself({context:new J().set(q,{disableErrorHandlingForStatus:[403]})}),Se)}getLegalRepresentatives(e){return this.loadingService.load(this.loadLegalRepresentatives(e).pipe($(i=>this.loadLegalRepresentativePersons(i).pipe(L(n=>i.map(P=>this.findPerson(P.RepresentativeId,n)).filter(de))))),be)}getApprenticeships(e){return this.loadingService.load(this.loadApprenticeshipContracts(e).pipe($(i=>N([this.loadApprenticeshipManagers(i),this.loadJobTrainers(i)]).pipe(L(([n,P])=>i.map(T=>this.createApprenticeshipCompany(T,n,P)))))),ye)}getStayPermitValue(e){return this.loadingService.load(this.dropDownItemsService.getStayPermits().pipe(L(i=>i.find(n=>n.Key===e)?.Value||null)),Ie)}loadLegalRepresentatives(e){return this.studentService.getLegalRepresentatives(e.Id).pipe(L(i=>{let n=ve(e);return i.filter(P=>!n||P.RepresentativeAfterMajority)}))}loadLegalRepresentativePersons(e){return e.length===0?F([]):this.personsService.getListForIds(e.map(i=>i.RepresentativeId))}loadApprenticeshipContracts(e){return this.studentService.getCurrentApprenticeshipContracts(e,{context:this.IGNORE_404_CONTEXT}).pipe(Z([]))}loadJobTrainers(e){let i=e.map(n=>n.JobTrainer).filter(n=>typeof n=="number");return i.length===0?F([]):N(i.map(n=>this.jobTrainersService.get(n)))}loadApprenticeshipManagers(e){let i=e.map(n=>n.ApprenticeshipManagerId);return i.length===0?F([]):N(i.map(n=>this.apprenticeshipManagersService.get(n)))}createApprenticeshipCompany(e,i,n){return{apprenticeshipContract:e,jobTrainer:this.findPerson(e.JobTrainer,n),apprenticeshipManager:this.findPerson(e.ApprenticeshipManagerId,i)}}findPerson(e,i){return e&&i.find(n=>n.Id===e)||null}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var hi=(()=>{class t{constructor(){this.settings=f(E),this.storageService=f(se),this.avatarStyles={}}ngOnChanges(e){e.studentId&&(this.avatarStyles=this.buildAvatarStyles(this.studentId))}buildAvatarStyles(e){return{"background-image":[this.buildAvatarUrl(e),this.fallbackAvatarUrl].map(i=>`url(${i})`).join(", ")}}buildAvatarUrl(e){let i=this.storageService.getAccessToken()||"";return`${this.settings.apiUrl}/Files/personPictures/${e}?token=${i}`}get fallbackAvatarUrl(){return`${this.settings.scriptsAndAssetsPath}/assets/images/avatar-placeholder.png`}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=I({type:t,selectors:[["bkd-avatar"]],inputs:{studentId:"studentId",link:"link",linkParams:"linkParams"},features:[Q],decls:1,vars:5,consts:[[1,"avatar",3,"routerLink","queryParams","ngStyle"]],template:function(i,n){i&1&&d(0,"a",0),i&2&&(te("disabled",!n.link),ee("routerLink",n.link)("queryParams",n.linkParams)("ngStyle",n.avatarStyles))},dependencies:[re,ne],styles:["[_nghost-%COMP%]{display:flex}.small[_nghost-%COMP%]{width:40px;min-width:40px;height:50px}.medium[_nghost-%COMP%]{width:58px;min-width:58px;height:75px}.large[_nghost-%COMP%]{width:100px;min-width:100px;height:130px}.avatar[_ngcontent-%COMP%]{flex:1;border:1px solid rgba(0,0,0,.25);background-repeat:no-repeat;background-size:cover;background-position:center}a.disabled[_ngcontent-%COMP%]{pointer-events:none;cursor:default}"]})}}return t})();export{ai as a,it as b,mt as c,ht as d,hi as e};
