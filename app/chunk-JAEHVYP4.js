import{a as Ve,b as De,c as Fe,d as Ne,e as Ge}from"./chunk-E4SARKOR.js";import"./chunk-RDNZARDR.js";import{a as me,b as fe,c as ue,d as _e,e as ye,h as Le,i as Re}from"./chunk-XWISOVKN.js";import"./chunk-6A3MULQJ.js";import"./chunk-C4EQUSNO.js";import{a as J}from"./chunk-WORSXEGE.js";import{f as Be}from"./chunk-6LRQCBUO.js";import{b as W,c as b}from"./chunk-RXV77OBQ.js";import{A as we,c as ve,e as he,f as Ce,g as ge,k as xe,p as Se,q as be,y as Pe,z as Me}from"./chunk-M3VKTN3S.js";import{a as Ie}from"./chunk-USF5QQBL.js";import"./chunk-D2H555EG.js";import"./chunk-KZWEGXU2.js";import{d as Te}from"./chunk-KFP6476W.js";import{i as Ae}from"./chunk-QWYAXZZX.js";import"./chunk-KKDVS2NL.js";import"./chunk-WNZFLLQC.js";import"./chunk-DVBPCEX4.js";import{b as $e}from"./chunk-GH7I4V3C.js";import{a as ke}from"./chunk-M732YBIP.js";import{s as de,t as se,u as ce}from"./chunk-RYYQAFJB.js";import{$b as k,Ab as V,Ac as L,Bc as E,Cc as v,F as Q,Fb as ne,Fc as le,Gc as j,Hb as _,J as X,Jb as y,Lb as Z,Lc as d,Mb as A,Mc as s,Nb as B,Nc as T,Ob as m,Pb as a,Qb as r,Rb as c,S as ee,Sb as G,Sc as q,Tb as O,Wc as pe,X as H,Z as te,_ as $,bc as w,dc as f,fb as i,ha as ie,i as R,ie as Ee,je as D,ma as g,nc as S,o as I,p as K,pc as oe,rc as l,sa as P,sc as C,ta as M,tc as u,td as U,ub as x,uc as re,ud as z,vc as ae}from"./chunk-CHBP6U4G.js";var N=(()=>{class e{constructor(){this.storageService=g(Ie),this.profileService=g(Ve),this.reloadStudent$=new R(void 0),this.person$=this.reloadStudent$.pipe($(()=>this.loadPerson()),H(1)),this.loadingPerson$=this.profileService.loadingMyself$,this.legalRepresentatives$=this.person$.pipe($(t=>t&&this.isStudent()?this.profileService.getLegalRepresentatives(t):I(null)),H(1)),this.loadingLegalRepresentatives$=this.profileService.loadingLegalRepresentatives$,this.apprenticeships$=this.person$.pipe($(t=>t&&this.isStudent()?this.profileService.getApprenticeships(t.Id):I(null)),H(1)),this.loadingApprenticeships$=this.profileService.loadingApprenticeships$,this.stayPermit$=this.person$.pipe($(t=>t?this.profileService.getStayPermitValue(t.StayPermit):I(null))),this.loadingStayPermit$=this.profileService.loadingStayPermit$}reloadStudent(){this.reloadStudent$.next()}loadPerson(){return this.profileService.getMyself().pipe(X(t=>t.status===403?I(null):K(()=>t)))}isStudent(){return(this.storageService.getPayload()?.roles?.split(";")??[]).includes("StudentRole")}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=ie({token:e,factory:e.\u0275fac})}}return e})();function Ye(e,p){if(e&1&&(a(0,"div"),l(1),r()),e&2){f(2);let t=v(1);i(),u(" ",t.AddressLine2," ")}}function Ze(e,p){if(e&1&&(a(0,"div",5),l(1),d(2,"translate"),r()),e&2){let t=p.$implicit;i(),u(" ",T(2,1,"global.validation-errors."+t.error,t.params)," ")}}function Je(e,p){if(e&1&&(a(0,"div",13),l(1),d(2,"translate"),r()),e&2){let t=p.$implicit;i(),u(" ",T(2,1,"global.validation-errors."+t.error,t.params)," ")}}function Ke(e,p){e&1&&(a(0,"div",18)(1,"span",19),l(2,"Loading..."),r()())}function Qe(e,p){if(e&1){let t=k();a(0,"form",2),w("ngSubmit",function(){P(t);let o=f();return M(o.onSubmit())}),a(1,"div",3)(2,"p"),l(3),d(4,"translate"),r(),a(5,"address",4)(6,"div"),l(7),r(),_(8,Ye,2,1,"div"),a(9,"div"),l(10),r()()(),A(11,Ze,3,4,"div",5,Z),d(13,"async"),a(14,"div",3)(15,"label",6),l(16),d(17,"translate"),r(),c(18,"input",7),r(),a(19,"div",3)(20,"label",8),l(21),d(22,"translate"),r(),c(23,"input",9),a(24,"small",10),l(25),d(26,"translate"),r()(),a(27,"div",3)(28,"label",11),l(29),d(30,"translate"),r(),c(31,"input",12),d(32,"async"),A(33,Je,3,4,"div",13,Z),d(35,"async"),a(36,"small",14),l(37),d(38,"translate"),r()(),a(39,"div",15)(40,"button",16),d(41,"async"),w("click",function(){P(t);let o=f();return M(o.cancel())}),l(42),d(43,"translate"),r(),a(44,"button",17),d(45,"async"),l(46),d(47,"translate"),_(48,Ke,3,0,"div",18),d(49,"async"),r()()()}if(e&2){let t,n=f(),o=v(0),h=v(1);m("formGroup",o),i(3),C(s(4,18,"my-profile.edit.address-changes-remark")),i(4),C(h.AddressLine1),i(),y(h.AddressLine2?8:-1),i(2),re("",h.Zip||""," ",h.Location),i(),B(s(13,20,n.formErrors$)),i(5),u(" ",s(17,22,"my-profile.edit.fields.phone-private")," "),i(5),u(" ",s(22,24,"my-profile.edit.fields.phone-mobile")," "),i(4),C(s(26,26,"my-profile.edit.fields.phone-mobile-hint")),i(4),u(" ",s(30,28,"my-profile.edit.fields.email2")," "),i(2),oe("is-invalid",(((t=s(32,30,n.email2Errors$))==null?null:t.length)??0)>0),i(2),B(s(35,32,n.email2Errors$)),i(4),C(s(38,34,"my-profile.edit.fields.email2-hint")),i(3),m("disabled",s(41,36,n.saving$)),i(2),u(" ",s(43,38,"my-profile.edit.cancel")," "),i(2),m("disabled",s(45,40,n.saving$)),i(2),u(" ",s(47,42,"my-profile.edit.save")," "),i(2),y(s(49,44,n.saving$)?48:-1)}}var Oe=(()=>{class e{constructor(){this.fb=g(Pe),this.router=g(se),this.toastService=g(ke),this.translate=g(Ee),this.profileService=g(N),this.personsService=g(Te),this.person=b(this.profileService.person$,{initialValue:null}),this.formGroup=q(()=>this.createFormGroup(this.person())),this.formGroup$=W(this.formGroup).pipe(Q($e)),this.saving$=new R(!1),this.submitted$=new R(!1),this.formErrors$=J(this.formGroup$,this.submitted$),this.email2Errors$=J(this.formGroup$,this.submitted$,"email2")}cancel(){this.navigateBack()}onSubmit(){this.submitted$.next(!0);let t=this.formGroup();if(t?.valid){let{phonePrivate:n,phoneMobile:o,email2:h}=t.value;this.save(n?.trim()||null,o?.trim()||null,h||null)}}createFormGroup(t){return t?this.fb.group({phonePrivate:[t.PhonePrivate],phoneMobile:[t.PhoneMobile],email2:[t.Email2,he.email]}):null}save(t,n,o){let h=this.person();h&&(this.saving$.next(!0),this.personsService.update(h.Id,t,n,o).pipe(ee(()=>this.saving$.next(!1))).subscribe(this.onSaveSuccess.bind(this)))}onSaveSuccess(){this.profileService.reloadStudent(),this.toastService.success(this.translate.instant("my-profile.edit.save-success")),this.navigateBack()}navigateBack(){this.router.navigate(["/my-profile"])}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=x({type:e,selectors:[["bkd-my-profile-edit"]],decls:7,vars:6,consts:[[1,"bkd-container","bkd-container-limited"],[3,"formGroup"],[3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"text-muted"],[1,"alert","alert-danger"],["id","my-profile-phone-private",1,"form-label"],["id","my-profile-phone-private","formControlName","phonePrivate","type","tel",1,"form-control"],["id","my-profile-phone-mobile",1,"form-label"],["id","my-profile-phone-mobile","formControlName","phoneMobile","type","tel","aria-describedby","my-profile-phone-mobile-hint",1,"form-control"],["id","my-profile-phone-mobile-hint",1,"form-text"],["for","my-profile-email2",1,"form-label"],["id","my-profile-email2","formControlName","email2","type","email","aria-describedby","my-profile-email2-hint",1,"form-control"],[1,"invalid-feedback"],["id","my-profile-email2-hint",1,"form-text"],[1,"d-flex","justify-content-end"],["type","button",1,"btn","btn-outline-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary","ms-2",3,"disabled"],["role","status",1,"spinner-border","spinner-border-sm","align-middle"],[1,"visually-hidden"]],template:function(n,o){if(n&1&&(L(0)(1),a(2,"div",0)(3,"h1"),l(4),d(5,"translate"),r(),_(6,Qe,50,46,"form",1),r()),n&2){let h=E(o.formGroup());i();let We=E(o.person());i(3),C(s(5,4,"my-profile.edit.title")),i(2),y(h&&We?6:-1)}},dependencies:[Me,xe,ve,Ce,ge,we,be,Se,U,D],encapsulation:2,changeDetection:0})}}return e})();var je=(()=>{class e{constructor(){}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=x({type:e,selectors:[["bkd-my-profile-address"]],inputs:{address:"address"},decls:2,vars:1,template:function(n,o){n&1&&(G(0,"address"),l(1),O()),n&2&&(i(),C(o.address))},styles:["[_nghost-%COMP%]{padding:1rem}address[_ngcontent-%COMP%]{white-space:pre-wrap}"],changeDetection:0})}}return e})();var He=(()=>{class e{constructor(){}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=x({type:e,selectors:[["bkd-my-profile-entry"]],inputs:{label:"label",value:"value"},decls:6,vars:4,consts:[[1,"row"],[1,"col-md-6"]],template:function(n,o){n&1&&(G(0,"dl",0)(1,"dt",1),l(2),d(3,"translate"),O(),G(4,"dd",1),l(5),O()()),n&2&&(i(2),C(s(3,2,o.label)),i(3),C(o.value))},dependencies:[D],styles:["dl[_ngcontent-%COMP%]{padding:0 1rem}dt[_ngcontent-%COMP%]{font-weight:400;color:#00000080}"],changeDetection:0})}}return e})();function Xe(e,p){if(e&1&&(a(0,"span"),l(1),r()),e&2){f(2);let t=v(0);i(),u("(",t.Gender,")")}}function et(e,p){if(e&1&&(a(0,"div",0)(1,"div",1),c(2,"bkd-avatar",2),a(3,"div",3),l(4),_(5,Xe,2,1,"span"),a(6,"div",4),l(7),d(8,"date"),r()()(),c(9,"bkd-reports-link",5),d(10,"async"),r(),a(11,"div",6),l(12),r()),e&2){let t=f(),n=v(0);i(2),m("studentId",n.Id),i(2),ae(" ",n.LastName," ",n.FirstName," ",n.MiddleName," "),i(),y(n.Gender?5:-1),i(2),u(" ",T(8,8,n.Birthdate,"dd.MM.yyyy")," "),i(2),m("reports",s(10,11,t.reports$)),i(3),C(n.Email)}}var qe=(()=>{class e{constructor(){this.reportsService=g(Re),this.person=pe(),this.personId=q(()=>this.person()?.Id??null),this.reports$=W(this.personId).pipe($(t=>t?this.reportsService.getPersonMasterDataReports(t):I([])),te([]))}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=x({type:e,selectors:[["bkd-my-profile-header"]],inputs:{person:[1,"person"]},decls:2,vars:2,consts:[[1,"avatar-person"],[1,"d-flex"],[1,"me-3","avatar","large",3,"studentId"],[1,"person"],[1,"birthdate"],[3,"reports"],[1,"email"]],template:function(n,o){if(n&1&&(L(0),_(1,et,13,13)),n&2){let h=E(o.person());i(),y(h?1:-1)}},dependencies:[Ge,Be,U,z],styles:[".avatar-person[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-left:1rem 1rem 1rem 0}.person[_ngcontent-%COMP%]{align-self:center}.email[_ngcontent-%COMP%]{padding:1rem 1rem 0 0}.report[_ngcontent-%COMP%]{align-self:flex-start;line-height:1}"],changeDetection:0})}}return e})();var Y=()=>[],tt=(e,p)=>p.apprenticeshipContract.Id,it=(e,p)=>p.Id;function nt(e,p){e&1&&c(0,"bkd-spinner")}function ot(e,p){e&1&&(a(0,"p",7),l(1),d(2,"translate"),r()),e&2&&(i(),u(" ",s(2,1,"shared.profile.substitution-profile")," "))}function rt(e,p){if(e&1&&c(0,"bkd-my-profile-entry",11),e&2){f(2);let t=v(0);m("value",t.SocialSecurityNumber)}}function at(e,p){if(e&1&&c(0,"bkd-my-profile-entry",12),e&2){f(2);let t=v(0);m("value",t.HomeTown||t.Nationality)}}function lt(e,p){if(e&1&&c(0,"bkd-my-profile-entry",13),e&2){f(2);let t=v(0);m("value",t.NativeLanguage)}}function pt(e,p){e&1&&c(0,"bkd-spinner",14)}function dt(e,p){if(e&1&&c(0,"bkd-my-profile-entry",15),e&2){f(2);let t=v(1);m("value",t)}}function st(e,p){if(e&1&&(c(0,"bkd-my-profile-entry",16),d(1,"date")),e&2){f(2);let t=v(0);m("value",T(1,1,t.StayPermitExpiry,"mediumDate"))}}function ct(e,p){if(e&1&&(a(0,"div",24)(1,"a",25),d(2,"translate"),a(3,"i",26),l(4,"edit"),r()(),c(5,"bkd-student-dossier-address",27),r()),e&2){f(2);let t=v(0);i(),ne("aria-label",s(2,2,"my-profile.edit.title")),i(4),m("student",t)}}function mt(e,p){if(e&1&&c(0,"bkd-my-profile-address",28),e&2){f(3);let t=v(0);m("address",t.CorrespondenceAddress)}}function ft(e,p){if(e&1){let t=k();a(0,"div",18,1)(2,"div",19)(3,"bkd-student-dossier-entry-header",20),w("click",function(){P(t);let o=S(1);return M(o.toggle())}),l(4),d(5,"translate"),r()(),a(6,"div",21)(7,"div",22),V(8,mt,1,1,"ng-template"),r()()()}if(e&2){let t=S(1);i(3),m("opened",!t.collapsed),i(),u(" ",s(5,2,"shared.profile.correspondence-address")," ")}}function ut(e,p){if(e&1&&c(0,"bkd-my-profile-address",28),e&2){f(3);let t=v(0);m("address",t.BillingAddress)}}function _t(e,p){if(e&1){let t=k();a(0,"div",18,2)(2,"div",19)(3,"bkd-student-dossier-entry-header",20),w("click",function(){P(t);let o=S(1);return M(o.toggle())}),l(4),d(5,"translate"),r()(),a(6,"div",21)(7,"div",22),V(8,ut,1,1,"ng-template"),r()()()}if(e&2){let t=S(1);i(3),m("opened",!t.collapsed),i(),u(" ",s(5,2,"shared.profile.billing-address")," ")}}function yt(e,p){e&1&&c(0,"bkd-spinner",14)}function vt(e,p){if(e&1&&c(0,"bkd-student-dossier-legal-representative",29),e&2){let t=p.$implicit;m("person",t)}}function ht(e,p){if(e&1&&A(0,vt,1,1,"bkd-student-dossier-legal-representative",29,it),e&2){let t=f(3);B(t.legalRepresentatives()??j(0,Y))}}function Ct(e,p){if(e&1){let t=k();a(0,"div",18,3)(2,"div",19)(3,"bkd-student-dossier-entry-header",20),w("click",function(){P(t);let o=S(1);return M(o.toggle())}),l(4),d(5,"translate"),r()(),a(6,"div",21)(7,"div",22),V(8,ht,2,1,"ng-template"),r()()()}if(e&2){let t=S(1);i(3),m("opened",!t.collapsed),i(),u(" ",s(5,2,"shared.profile.legal-representation")," ")}}function gt(e,p){e&1&&c(0,"bkd-spinner",14)}function xt(e,p){if(e&1&&l(0),e&2){let t=f().$index;u(" ",t+1," ")}}function St(e,p){if(e&1&&c(0,"bkd-student-dossier-apprenticeship",30),e&2){let t=f().$implicit;m("apprenticeship",t)}}function bt(e,p){if(e&1){let t=k();a(0,"div",23,4)(2,"div",19)(3,"bkd-student-dossier-entry-header",20),w("click",function(){P(t);let o=S(1);return M(o.toggle())}),l(4),d(5,"translate"),_(6,xt,1,1),r()(),a(7,"div",21)(8,"div",22),V(9,St,1,1,"ng-template"),r()()()}if(e&2){let t=S(1),n=f(2);i(3),m("opened",!t.collapsed),i(),u(" ",s(5,3,"shared.profile.apprenticeship-company")," "),i(2),y((n.apprenticeships()??j(5,Y)).length>1?6:-1)}}function Pt(e,p){if(e&1){let t=k();c(0,"bkd-my-profile-header",8),a(1,"div",9)(2,"div",10),_(3,rt,1,1,"bkd-my-profile-entry",11),_(4,at,1,1,"bkd-my-profile-entry",12),_(5,lt,1,1,"bkd-my-profile-entry",13),_(6,pt,1,0,"bkd-spinner",14)(7,dt,1,1,"bkd-my-profile-entry",15),_(8,st,2,4,"bkd-my-profile-entry",16),r(),a(9,"div",17)(10,"div",18,0)(12,"div",19)(13,"bkd-student-dossier-entry-header",20),w("click",function(){P(t);let o=S(11);return M(o.toggle())}),l(14),d(15,"translate"),r()(),a(16,"div",21)(17,"div",22),V(18,ct,6,4,"ng-template"),r()()(),_(19,ft,9,4,"div",18),_(20,_t,9,4,"div",18),_(21,yt,1,0,"bkd-spinner",14)(22,Ct,9,4,"div",18),_(23,gt,1,0,"bkd-spinner",14),A(24,bt,10,6,"div",23,tt),r()()}if(e&2){let t=S(11),n=f(),o=v(0),h=v(1);m("person",o),i(3),y(o.SocialSecurityNumber?3:-1),i(),y(o.HomeTown||o.Nationality?4:-1),i(),y(o.NativeLanguage?5:-1),i(),y(n.loadingStayPermit()?6:h?7:-1),i(2),y(o.StayPermitExpiry?8:-1),i(5),m("opened",!t.collapsed),i(),u(" ",s(15,12,"shared.profile.student-address")," "),i(5),y(o.CorrespondenceAddress?19:-1),i(),y(o.BillingAddress?20:-1),i(),y(n.loadingLegalRepresentatives()?21:(n.legalRepresentatives()??j(14,Y)).length>0?22:-1),i(2),y(n.loadingApprenticeships()?23:-1),i(),B(n.apprenticeships()??j(15,Y))}}var Ue=(()=>{class e{constructor(){this.profileService=g(N),this.person=b(this.profileService.person$,{initialValue:null}),this.loadingPerson=b(this.profileService.loadingPerson$,{requireSync:!0}),this.legalRepresentatives=b(this.profileService.legalRepresentatives$,{initialValue:null}),this.loadingLegalRepresentatives=b(this.profileService.loadingLegalRepresentatives$,{requireSync:!0}),this.apprenticeships=b(this.profileService.apprenticeships$),this.loadingApprenticeships=b(this.profileService.loadingApprenticeships$,{requireSync:!0}),this.stayPermit=b(this.profileService.stayPermit$,{initialValue:null}),this.loadingStayPermit=b(this.profileService.loadingStayPermit$,{requireSync:!0})}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=x({type:e,selectors:[["bkd-my-profile-show"]],decls:9,vars:6,consts:[["studentAddress","ngbAccordionItem"],["correspondenceAddress","ngbAccordionItem"],["billingAddress","ngbAccordionItem"],["legalRepresentativesItem","ngbAccordionItem"],["apprenticeshipCompanies","ngbAccordionItem"],[1,"bkd-container","bkd-container-limited"],["data-testid","profile-title"],["data-testid","profile-substitution"],[3,"person"],["data-testid","profile-content",1,"profile-content"],[1,"profile-entries","pt-3"],["label","my-profile.show.social-security-number",3,"value"],["label","my-profile.show.hometown-nationality",3,"value"],["label","my-profile.show.native-language",3,"value"],[1,"small"],["label","my-profile.show.stay-permit",3,"value"],["label","my-profile.show.stay-permit-expiry",3,"value"],["ngbAccordion",""],["ngbAccordionItem",""],["ngbAccordionHeader",""],[3,"click","opened"],["ngbAccordionCollapse",""],["ngbAccordionBody",""],[3,"ngbAccordionItem"],[1,"clearfix"],["routerLink","edit",1,"btn","btn-primary","btn-icon","float-end","me-2"],[1,"material-icons"],["emailProperty","Email2",1,"profile-entry",3,"student"],[1,"profile-entry",3,"address"],[1,"profile-entry",3,"person"],[1,"profile-entry",3,"apprenticeship"]],template:function(n,o){if(n&1&&(L(0)(1),a(2,"div",5)(3,"h1",6),l(4),d(5,"translate"),r(),_(6,nt,1,0,"bkd-spinner")(7,ot,3,3,"p",7)(8,Pt,26,16),r()),n&2){let h=E(o.person());i(),E(o.stayPermit()),i(3),C(s(5,4,"my-profile.title")),i(2),y(o.loadingPerson()?6:h?8:7)}},dependencies:[qe,He,ye,_e,ue,Le,fe,me,ce,De,je,Ne,Fe,Ae,z,D],styles:[".profile-content[_ngcontent-%COMP%]{padding-top:1rem}.profile-entry[_ngcontent-%COMP%]{display:block;padding:0 1rem}.profile-entries[_ngcontent-%COMP%]:not(:empty){border-top:1px solid rgb(222,222,222)}"],changeDetection:0})}}return e})();var ze=(()=>{class e{constructor(){}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=x({type:e,selectors:[["bkd-my-profile"]],features:[le([N])],decls:1,vars:0,template:function(n,o){n&1&&c(0,"router-outlet")},dependencies:[de],encapsulation:2,changeDetection:0})}}return e})();var Ai=[{path:"",component:ze,children:[{path:"",component:Ue},{path:"edit",component:Oe}]}];export{Ai as MY_PROFILE_ROUTES};
