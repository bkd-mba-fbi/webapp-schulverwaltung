import{a as I}from"./chunk-DQZMQ4YX.js";import{a as N}from"./chunk-EFJ6WEH7.js";import{A as B,F as G,h as F,z as E}from"./chunk-ZXUJZ6KS.js";import{Cd as o,Dd as f,Fd as R,Hd as L,Id as b,Ld as k,Nb as M,Ob as g,Pb as h,Qb as D,Rd as p,Sd as w,Xd as O,Yb as T,Zb as U,a as v,b as y,ba as P,db as d,ic as $,ja as x,jc as j,oa as m,ob as u,q as S,v as A,w as C}from"./chunk-GP622B77.js";var H=(()=>{let s=class s{constructor(){this.expanded=!1}};s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=u({type:s,selectors:[["bkd-caret"]],inputs:{expanded:"expanded"},decls:2,vars:1,consts:[["role","button",1,"d-flex","material-icons"]],template:function(e,r){e&1&&(g(0,"i",0),$(1),h()),e&2&&(d(),j(r.expanded?"expand_less":"expand_more"))},styles:["i[_ngcontent-%COMP%]:hover{color:#ea161f}"]});let a=s;return a})();var J=["*"],Y=(()=>{let s=class s{constructor(){this.opened=!1}};s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=u({type:s,selectors:[["bkd-student-dossier-entry-header"]],inputs:{opened:"opened"},ngContentSelectors:J,decls:3,vars:1,consts:[[1,"m-0"],[1,"d-flex","align-items-center",3,"expanded"]],template:function(e,r){e&1&&(T(),g(0,"h5",0),U(1),h(),D(2,"bkd-caret",1)),e&2&&(d(2),M("expanded",r.opened))},dependencies:[H],styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem;border-top:1px solid #dee2e6;cursor:pointer}button[_ngcontent-%COMP%]{color:#000;text-decoration:none}.btn-link[_ngcontent-%COMP%]:hover{text-decoration:none}"],changeDetection:0});let a=s;return a})();var Q=b({Id:f,Title:o}),X=p(L(Q));var mt=(()=>{let s=class s{constructor(){this.settings=m(E),this.storageService=m(I),this.http=m(F)}getPersonMasterDataReports(t){return this.getAvailableReports("Person",this.settings.personMasterDataReports,[t])}getStudentConfirmationReports(t){return this.getAvailableReports("Praesenzinformation",this.settings.studentConfirmationReports,t)}getEvaluateAbsencesReports(t){return this.getAvailableReports("Praesenzinformation",this.settings.evaluateAbsencesReports,t)}getMyAbsencesReports(t){return this.getAvailableReports("Praesenzinformation",this.settings.myAbsencesReports,t)}getCourseTestsReports(t){return this.getAvailableReports("Anlass",this.settings.testsByCourseReports,[t])}getEvaluationReports(t){return this.getAvailableReports("Anlass",this.settings.evaluationReports,[t])}getStudentSubscriptionGradesReports(t){return this.settings.testsBySubscriptionStudentReports.map((r,i)=>{let n=this.getReportUrl(r.type,"Anmeldung",r.id,t);return y(v({},r),{title:`Report ${i+1}`,url:n})})}getTeacherSubscriptionGradesReports(t){return this.settings.testsBySubscriptionTeacherReports.map((r,i)=>{let n=this.getReportUrl(r.type,"Anmeldung",r.id,t);return y(v({},r),{title:`Report ${i+1}`,url:n})})}getStudyClassStudentsReports(t){return this.getAvailableReports("Anlass",this.settings.studyClassStudentsReports,[t])}getCourseStudentsReports(t){return this.getAvailableReports("Anlass",this.settings.courseStudentsReports,[t])}getAvailableReports(t,e,r){let i=G(e,l=>l.type),n=C(Object.keys(i).map(l=>this.getAvailableReportsForType(l,t,i[l].map(({id:c})=>c),r)));return this.mergeAvailableReports(n,e)}getAvailableReportsForType(t,e,r,i){return i.length===0?S([]):this.http.get(this.getReportAvailabilityUrl(t,e,r,i)).pipe(P(N(X)),A(n=>n?n.map(({Id:l,Title:c})=>({type:t,id:l,title:c,url:this.getReportUrl(t,e,l,i)})):[]))}mergeAvailableReports(t,e){return t.pipe(A(r=>{let i=B(r);return e.reduce((n,l)=>{let c=i.find(({id:q})=>q===l.id);return c?[...n,c]:n},[])}))}getReportUrl(t,e,r,i){let n=new URL(`${this.settings.apiUrl}/Files/${this.getReportTypePathPart(t)}/${e}/${r}`);return n.searchParams.set("ids",i.join(",")),n.toString()}getReportAvailabilityUrl(t,e,r,i){let n=new URL(`${this.settings.apiUrl}/${this.getReportTypePathPart(t)}/AvailableReports/${e}`);return n.searchParams.set("ids",Array.isArray(r)?r.join(","):String(r)),n.searchParams.set("keys",i.join(",")),n.toString()}getReportTypePathPart(t){return`${t[0].toUpperCase()+t.slice(1)}Reports`}};s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=x({token:s,factory:s.\u0275fac,providedIn:"root"});let a=s;return a})();var ht=b({Id:f,AddressLine1:p(o),AddressLine2:w(o),Birthdate:p(O),DisplayEmail:p(o),FirstName:o,FullName:o,Gender:k([R("M"),R("F"),R("X")]),LastName:o,Location:p(o),PhoneMobile:p(o),PhonePrivate:p(o),PostalCode:p(o)});export{ht as a,H as b,Y as c,mt as d};
