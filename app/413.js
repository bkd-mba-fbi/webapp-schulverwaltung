"use strict";(self.webpackChunkwebapp_schulverwaltung=self.webpackChunkwebapp_schulverwaltung||[]).push([[413],{2413:(P,Z,r)=>{r.r(Z),r.d(Z,{EventsModule:()=>vn});var C=r(9415),g=r(5357),y=r(634),f=r(1135),h=r(9841),m=r(4004),b=r(8029),A=r(6478),x=r(5255),t=r(5e3),u=r(3900),a=r(9928),p=r(5030),K=r(8210);const V=a.dt({TestId:a.pk,GradeId:a.pk,GradeValue:(0,p.Wx)(a.pk),GradeDesignation:a.Z_,Points:(0,p.Wx)(a.pk),StudentId:a.pk,Id:a.Z_}),tt=a.dt({Id:a.pk,CourseId:a.pk,Date:p.L9,Designation:a.Z_,Weight:a.pk,WeightPercent:a.pk,IsPointGrading:a.O7,MaxPoints:(0,p.Wx)(a.pk),MaxPointsAdjusted:(0,p.Wx)(a.pk),IsPublished:a.O7,IsOwner:a.O7,Owner:(0,p.Wx)(a.Z_),Creation:a.Z_,GradingScaleId:a.pk,GradingScale:a.Z_,Results:(0,p.Wx)(a.IX(V))});var et=r(803);const q=a.dt({Id:a.pk}),k=a.r$({HRef:(0,p.Wx)(a.Z_)}),nt=a.r$({HasEvaluationStarted:a.O7,EvaluationUntil:(0,p.Wx)(p.L9),HasReviewOfEvaluationStarted:a.O7,HasTestGrading:a.O7,Id:a.pk}),st=a.jV([q,k,nt]),ot=a.r$({Id:a.pk,StudentCount:a.pk}),it=a.jV([q,k,ot]),E=a.dt({HRef:a.Z_,Id:a.pk,Number:a.Z_,Designation:a.Z_,DateFrom:(0,p.Wx)(p.L9),DateTo:(0,p.Wx)(p.L9),Tests:(0,p.Wx)(a.IX(tt)),EvaluationStatusRef:st,AttendanceRef:it,ParticipatingStudents:(0,p.Wx)(a.IX(et.Z)),Classes:(0,p.Wx)(a.IX(K.y))});var F=r(2786),rt=r(2671),at=r(520);let z=(()=>{class e extends rt.v{constructor(n,s){super(n,s,E,"Courses")}getExpandedCourses(){return this.http.get(`${this.baseUrl}/?expand=EvaluationStatusRef,AttendanceRef,Classes&filter.StatusId=;${this.settings.eventlist.statusfilter}`,{headers:{"X-Role-Restriction":"TeacherRole"}}).pipe((0,u.w)((0,F.Y0)(E)))}getExpandedCourse(n){return this.http.get(`${this.baseUrl}/${n}?expand=ParticipatingStudents,EvaluationStatusRef,Tests,Gradings,FinalGrades`).pipe((0,u.w)((0,F.Jx)(E)))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(at.eN),t.LFG(b.L))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var ct=r(7283),N=r(2024),dt=r(1303),v=r(8995),T=(()=>{return(e=T||(T={})).Rating="rating",e.RatingUntil="rating-until",e.IntermediateRating="intermediate-rating",e.Tests="add-tests",T;var e})();let G=(()=>{class e{constructor(n,s,i,c,d,_){this.coursesRestService=n,this.studyClassRestService=s,this.loadingService=i,this.storage=c,this.translate=d,this.settings=_,this.loading$=this.loadingService.loading$,this.search$=new f.X(""),this.courses$=this.coursesRestService.getExpandedCourses(),this.formativeAssessments$=this.studyClassRestService.getActiveFormativeAssessments(),this.studyClasses$=this.studyClassRestService.getActive(),this.events$=this.loadEvents(),this.filteredEvents$=(0,h.a)([this.events$,this.search$]).pipe((0,m.U)((0,A.h)(x.P)))}loadEvents(){return this.loadingService.load(this.hasClassTeacherRole()?(0,h.a)([this.courses$,this.formativeAssessments$,this.studyClasses$]).pipe((0,m.U)((0,A.h)(this.createAndSortEvents.bind(this)))):this.courses$.pipe((0,m.U)(n=>this.createAndSortEvents(n))))}createAndSortEvents(n,s=[],i=[]){const c=i.filter(d=>!s.map(_=>_.Id).includes(d.Id));return[...this.createFromCourses(n),...this.createFromAssessments(s),...this.createFromStudyClasses(c)].sort((d,_)=>d.Designation.localeCompare(_.Designation))}createFromStudyClasses(n){return n.map(s=>({id:s.Id,Designation:s.Designation,detailLink:this.buildLink(s.Id,"eventdetail"),studentCount:s.StudentCount,state:null}))}createFromAssessments(n){return this.createFromStudyClasses(n).map(i=>Object.assign(Object.assign({},i),{state:T.Rating,evaluationText:this.translate.instant("events.state.rating"),evaluationLink:this.buildLink(i.id,"evaluation")}))}createFromCourses(n){return n.map(s=>{const i=this.getState(s);return{id:s.Id,Designation:this.getDesignation(s),detailLink:this.buildLink(s.Id,"eventdetail"),studentCount:s.AttendanceRef.StudentCount||0,dateFrom:s.DateFrom,dateTo:s.DateTo,state:i,evaluationText:this.getEvaluationText(i,s.EvaluationStatusRef.EvaluationUntil),evaluationLink:this.getEvaluationLink(s,i)}})}getDesignation(n){const s=n.Classes?n.Classes.map(i=>i.Number).join(", "):null;return s?n.Designation+", "+s:n.Designation}getState(n){const s=n.EvaluationStatusRef;if(!0===s.HasTestGrading)return T.Tests;if(!0===s.HasEvaluationStarted){if(null==s.EvaluationUntil)return T.IntermediateRating;if(s.EvaluationUntil>=new Date)return T.RatingUntil}return null}getEvaluationText(n,s){return null===n?"":this.translate.instant(`events.state.${n}`)+(n===T.RatingUntil?` ${s?(0,y.Z)(s,"dd.MM.yyyy"):""}`:"")}getEvaluationLink(n,s){return null===s||s===T.Tests?null:this.buildLink(n.Id,"evaluation")}buildLink(n,s){return`${this.settings.eventlist[s]}=${n}`}hasClassTeacherRole(){const n=this.storage.getPayload();return!!n&&n.roles.indexOf("ClassTeacherRole")>=0}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(z),t.LFG(ct.R),t.LFG(N.b),t.LFG(dt.V),t.LFG(v.sK),t.LFG(b.L))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})(),lt=(()=>{class e{constructor(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["erz-events"]],features:[t._Bn([G])],decls:1,vars:0,template:function(n,s){1&n&&t._UZ(0,"router-outlet")},directives:[g.lC],styles:[""]}),e})(),M=(()=>{class e{constructor(n,s){this.coursesRestService=n,this.loadingService=s,this.loading$=this.loadingService.loading$,this.search$=new f.X("")}getCourse(n){return this.loadingService.load(this.coursesRestService.getExpandedCourse(n))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(z),t.LFG(N.b))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})(),gt=(()=>{class e{constructor(n){this.state=n}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(M))},e.\u0275cmp=t.Xpm({type:e,selectors:[["erz-tests"]],features:[t._Bn([M])],decls:1,vars:0,template:function(n,s){1&n&&t._UZ(0,"router-outlet")},directives:[g.lC],styles:[""]}),e})();var pt=r(7579),ut=r(4782),_t=r(6451),O=r(1884),L=r(1104),l=r(9808),mt=r(6401);const ft=function(e){return{count:e}};function vt(e,o){if(1&e&&(t.TgZ(0,"div",9),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.hij(" ",t.xi3(2,1,1===n.course.ParticipatingStudents.length?"courses.registration":"courses.registrations",t.VKq(4,ft,n.course.ParticipatingStudents.length))," ")}}const ht=function(){return["/events"]};let xt=(()=>{class e{constructor(n){this.reportsService=n}loadReportUrl(){return this.reportsService.getEventReportUrl(this.course.Id)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(mt.F))},e.\u0275cmp=t.Xpm({type:e,selectors:[["erz-tests-header"]],inputs:{course:"course"},decls:16,vars:5,consts:[[1,"d-flex","align-items-center","justify-content-between","header"],["type","button",1,"back","btn","btn-link","py-0","px-0",3,"routerLink"],[1,"d-flex"],[1,"material-icons","btn"],[1,"text-justify"],["class","font-color-light-gray",4,"ngIf"],["routerLink","add",1,"edit","btn","btn-primary","ml-2"],[1,"material-icons"],[1,"edit","btn","btn-primary","ml-2",3,"href"],[1,"font-color-light-gray"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"button",1),t.TgZ(2,"div",2),t.TgZ(3,"i",3),t._uU(4,"navigate_before"),t.qZA(),t.TgZ(5,"div",4),t.TgZ(6,"div"),t._uU(7),t.qZA(),t.YNc(8,vt,3,6,"div",5),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"div",2),t.TgZ(10,"a",6),t.TgZ(11,"i",7),t._uU(12,"add"),t.qZA(),t.qZA(),t.TgZ(13,"a",8),t.TgZ(14,"i",7),t._uU(15,"description"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(1),t.Q6J("routerLink",t.DdM(4,ht)),t.xp6(6),t.Oqu(s.course.Designation),t.xp6(1),t.Q6J("ngIf",s.course.ParticipatingStudents),t.xp6(5),t.Q6J("href",s.loadReportUrl(),t.LSH))},directives:[g.rH,l.O5,g.yS],pipes:[v.X$],styles:[".back[_ngcontent-%COMP%]{color:#33333d;text-decoration:none}.font-color-light-gray[_ngcontent-%COMP%]{color:#adb5bd}.header[_ngcontent-%COMP%]{padding-bottom:1.5rem;border-bottom:1px solid #e9ecef}@media (max-width: 750px){.header[_ngcontent-%COMP%]{padding-right:1.5rem}}"]}),e})();var Tt=r(9092);function yt(e,o){return o.map(n=>{var s,i;if(void 0===n.Results||0===(null===(s=n.Results)||void 0===s?void 0:s.length))return{kind:"no-result",TestId:n.Id};const c=null===(i=n.Results)||void 0===i?void 0:i.find(d=>d.StudentId===e.Id);return void 0!==c?{kind:"grade",result:c,test:n}:{kind:"no-result",TestId:n.Id}})}function J(e){return"grade"===e.kind}var bt=r(4379);let Mt=(()=>{class e{constructor(n){this.sortService=n,this.filter$=new f.X("all-tests"),this.expandedHeader$=new f.X(!1),this.tests$=this.filter$.pipe((0,m.U)(s=>{var i;return null===(i=this.course.Tests)||void 0===i?void 0:i.filter(c=>"all-tests"===s||c.IsOwner)})),this.sorting$=this.sortService.sorting$,this.studentGrades$=(0,h.a)([this.tests$,this.sorting$]).pipe((0,m.U)((0,A.h)(this.toStudentGrades.bind(this))))}toStudentGrades(n=[],s){var i;return function Ct(e,o){return null==e?void 0:e.map(n=>({student:n,grades:yt(n,o)}))}(null!==(i=this.course.ParticipatingStudents)&&void 0!==i?i:[],n).sort((({key:e,ascending:o})=>(n,s)=>{const i=o?1:-1;return"FullName"===e?i*n.student.FullName.localeCompare(s.student.FullName):i*((e,o,n)=>{var s,i,c,d,_,w;const S=o.grades.filter(J).find($=>$.test.Id===e.Id),U=n.grades.filter(J).find($=>$.test.Id===e.Id);return(null!==(c=null===(i=null===(s=null==U?void 0:U.result)||void 0===s?void 0:s.GradeValue)||void 0===i?void 0:i.valueOf())&&void 0!==c?c:0)-(null!==(w=null===(_=null===(d=null==S?void 0:S.result)||void 0===d?void 0:d.GradeValue)||void 0===_?void 0:_.valueOf())&&void 0!==w?w:0)})(e,n,s)})(s))}setSorting(n){this.sortService.setSorting(n)}getSortingChar$(n){return this.sortService.getSortingChar$(n)}sortBy(n){this.sortService.toggleSorting(n)}toggleHeader(n){this.expandedHeader$.next(n)}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(bt.K))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Lt=(()=>{class e{constructor(n){this.translate=n}transform(n){return`${n.Weight} (${n.WeightPercent}%)${this.getPoints(n)}`}getPoints(n){var s;return n.IsPointGrading?`, ${null!==(s=n.MaxPointsAdjusted)&&void 0!==s?s:n.MaxPoints} ${this.translate.instant("tests.points")}`:""}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(v.sK,16))},e.\u0275pipe=t.Yjl({name:"testSummaryShort",type:e,pure:!0}),e})();function Pt(e,o){1&e&&(t.TgZ(0,"i",13),t._uU(1,"edit"),t.qZA())}function Et(e,o){if(1&e&&(t.TgZ(0,"div",8),t.TgZ(1,"div",9),t.TgZ(2,"div"),t._uU(3),t.ALo(4,"date"),t.qZA(),t.TgZ(5,"a",10),t.YNc(6,Pt,2,0,"i",11),t.qZA(),t.qZA(),t.TgZ(7,"div"),t._uU(8),t.ALo(9,"testSummaryShort"),t.qZA(),t.TgZ(10,"div",12),t._uU(11),t.qZA(),t.qZA()),2&e){const n=t.oxw();t.xp6(3),t.Oqu(t.xi3(4,4,n.test.Date,"dd.MM.yyyy")),t.xp6(3),t.Q6J("ngIf",n.test.IsOwner&&!1===n.test.IsPublished),t.xp6(2),t.hij(" ",t.lcZ(9,7,n.test)," "),t.xp6(3),t.Oqu(n.test.Owner)}}function It(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",14),t.TgZ(1,"a",15),t.ALo(2,"translate"),t.TgZ(3,"i",16),t._uU(4,"lock"),t.qZA(),t.TgZ(5,"span"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.qZA(),t.TgZ(8,"i",17),t.NdJ("click",function(){return t.CHM(n),t.oxw().toggleHeader()}),t._uU(9),t.qZA(),t.qZA()}if(2&e){const n=t.oxw();t.xp6(1),t.s9C("title",t.lcZ(2,3,"tests.edit")),t.xp6(5),t.Oqu(t.lcZ(7,5,"tests.published")),t.xp6(3),t.Oqu(n.expanded?"expand_more":"expand_less")}}function wt(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",14),t.TgZ(1,"a",18),t.ALo(2,"translate"),t.TgZ(3,"i",16),t._uU(4,"lock_open"),t.qZA(),t.TgZ(5,"span"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.qZA(),t.TgZ(8,"i",19),t.NdJ("click",function(){return t.CHM(n),t.oxw().toggleHeader()}),t._uU(9),t.qZA(),t.qZA()}if(2&e){const n=t.oxw();t.xp6(1),t.s9C("title",t.lcZ(2,3,"tests.publish")),t.xp6(5),t.Oqu(t.lcZ(7,5,"tests.not-published")),t.xp6(3),t.Oqu(n.expanded?"expand_more":"expand_less")}}let St=(()=>{class e{constructor(){this.toggle=new t.vpe}toggleHeader(){this.toggle.emit(!this.expanded)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["erz-test-table-header"]],inputs:{test:"test",expanded:"expanded"},outputs:{toggle:"toggle"},decls:11,vars:6,consts:[[1,"d-flex","flex-column","h-100","justify-content-between"],["role","button",1,"test-designation","d-flex","flex-row","my-3","align-items-end","justify-content-between",3,"click"],[3,"ngClass"],[1,"material-icons","align-self-start"],[1,"d-flex","flex-column"],["class","d-flex flex-column mb-3",4,"ngIf"],["class","d-flex align-items-center justify-content-between test-status",4,"ngIf","ngIfElse"],["notPublished",""],[1,"d-flex","flex-column","mb-3"],[1,"d-flex","flex-row","justify-content-between"],[1,"btn","btn-link","p-0","edit"],["class","material-icons",4,"ngIf"],[1,"test-owner"],[1,"material-icons"],[1,"d-flex","align-items-center","justify-content-between","test-status"],[1,"d-flex","btn","btn-link","pl-0","edit",3,"title"],[1,"material-icons","mr-1"],["role","button",1,"material-icons","expand-mobile",3,"click"],[1,"d-flex","btn","btn-link","pl-0",3,"title"],[1,"material-icons","expand-mobile",3,"click"]],template:function(n,s){if(1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.NdJ("click",function(){return s.toggleHeader()}),t.TgZ(2,"div",2),t._uU(3),t.qZA(),t.TgZ(4,"i",3),t._uU(5),t.qZA(),t.qZA(),t.TgZ(6,"div",4),t.YNc(7,Et,12,9,"div",5),t.YNc(8,It,10,7,"div",6),t.YNc(9,wt,10,7,"ng-template",null,7,t.W1O),t.qZA(),t.qZA()),2&n){const i=t.MAs(10);t.xp6(2),t.Q6J("ngClass",s.expanded?"expanded":"collapsed"),t.xp6(1),t.hij(" ",s.test.Designation," "),t.xp6(2),t.Oqu(s.expanded?"expand_more":"expand_less"),t.xp6(2),t.Q6J("ngIf",s.expanded),t.xp6(1),t.Q6J("ngIf",s.test.IsPublished)("ngIfElse",i)}},directives:[l.mk,l.O5],pipes:[l.uU,Lt,v.X$],styles:[".test-owner[_ngcontent-%COMP%], .collapsed[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.test-designation[_ngcontent-%COMP%]{display:none!important}.test-status[_ngcontent-%COMP%]{order:-1;padding-bottom:1.5rem}.edit[_ngcontent-%COMP%]{color:#33333d80}@media (min-width: 750px){.test-designation[_ngcontent-%COMP%]{display:inherit!important}.test-status[_ngcontent-%COMP%]{order:initial}.expand-mobile[_ngcontent-%COMP%]{display:none!important}}"]}),e})();function Ut(e,o){if(1&e&&(t.TgZ(0,"div",3),t._uU(1),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.hij(" ",n.grade.result.Points," ")}}function $t(e,o){if(1&e&&(t.TgZ(0,"div",1),t.YNc(1,Ut,2,1,"div",2),t.TgZ(2,"div"),t._uU(3),t.qZA(),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.grade.test.IsPointGrading),t.xp6(2),t.hij(" ",n.grade.result.GradeValue," ")}}let qt=(()=>{class e{constructor(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["erz-grade"]],inputs:{grade:"grade"},decls:1,vars:1,consts:[["class","d-flex flex-row w-100",4,"ngIf"],[1,"d-flex","flex-row","w-100"],["class","w-25",4,"ngIf"],[1,"w-25"]],template:function(n,s){1&n&&t.YNc(0,$t,4,2,"div",0),2&n&&t.Q6J("ngIf","grade"===s.grade.kind)},directives:[l.O5],styles:[""]}),e})();function kt(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"th",22),t.TgZ(1,"erz-test-table-header",23),t.NdJ("toggle",function(i){return t.CHM(n),t.oxw(2).state.toggleHeader(i)}),t.qZA(),t.qZA()}if(2&e){const n=o.$implicit,s=t.oxw().erzLet,i=t.oxw();t.Q6J("ngClass",n.Id===i.selectedTest.Id?"selected":""),t.xp6(1),t.Q6J("test",n)("expanded",s.expanded)}}function Ft(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"th",24),t.TgZ(1,"erz-test-table-header",23),t.NdJ("toggle",function(i){return t.CHM(n),t.oxw(2).state.toggleHeader(i)}),t.qZA(),t.qZA()}if(2&e){const n=o.$implicit,s=t.oxw().erzLet,i=t.oxw();t.Q6J("ngClass",n.Id===i.selectedTest.Id?"selected":""),t.xp6(1),t.Q6J("test",n)("expanded",s.expanded)}}function zt(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",28),t.TgZ(1,"span",27),t.NdJ("click",function(){t.CHM(n);const i=t.oxw().$implicit;return t.oxw(2).state.sortBy(i)}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()}2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"tests.points")))}function Nt(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"th",25),t.TgZ(1,"div",11),t.YNc(2,zt,4,3,"div",26),t.TgZ(3,"div",12),t.TgZ(4,"span",27),t.NdJ("click",function(){const c=t.CHM(n).$implicit;return t.oxw(2).state.sortBy(c)}),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t.TgZ(7,"div",13),t._uU(8),t.ALo(9,"async"),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=o.$implicit,s=t.oxw(2);t.Q6J("ngClass",n.Id===s.selectedTest.Id?"selected":""),t.xp6(2),t.Q6J("ngIf",n.IsPointGrading),t.xp6(3),t.Oqu(t.lcZ(6,4,"tests.grade")),t.xp6(3),t.hij(" ",t.lcZ(9,6,s.state.getSortingChar$(n))," ")}}function Gt(e,o){if(1&e&&(t.TgZ(0,"td",34),t._UZ(1,"erz-grade",35),t.qZA()),2&e){const n=o.$implicit,s=t.oxw(3);t.Q6J("ngClass",(null==n.result?null:n.result.TestId)===s.selectedTest.Id||n.TestId===s.selectedTest.Id?"selected":""),t.xp6(1),t.Q6J("grade",n)}}function Jt(e,o){if(1&e&&(t.TgZ(0,"tr"),t.TgZ(1,"td",29),t.TgZ(2,"a",30),t._uU(3),t.qZA(),t.TgZ(4,"a",31),t._uU(5," Mittelwert: 5.15 "),t.qZA(),t.qZA(),t._UZ(6,"td",32),t._UZ(7,"td",33),t.YNc(8,Gt,2,2,"td",21),t.qZA()),2&e){const n=o.$implicit;t.xp6(2),t.Q6J("routerLink","#"),t.xp6(1),t.hij(" ",n.student.FullName," "),t.xp6(5),t.Q6J("ngForOf",n.grades)}}function Rt(e,o){1&e&&(t.TgZ(0,"span",38),t._uU(1,"20.16"),t.qZA())}function Qt(e,o){if(1&e&&(t.TgZ(0,"td",34),t.TgZ(1,"div",36),t.YNc(2,Rt,2,0,"span",37),t.TgZ(3,"span"),t._uU(4,"4.733"),t.qZA(),t.qZA(),t.qZA()),2&e){const n=o.$implicit,s=t.oxw(2);t.Q6J("ngClass",n.Id===s.selectedTest.Id||n.Id===s.selectedTest.Id?"selected":""),t.xp6(2),t.Q6J("ngIf",n.IsPointGrading)}}const R=function(e,o){return{"btn-primary":e,"btn-outline-primary":o}};function Ht(e,o){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",1),t.TgZ(2,"table",2),t.TgZ(3,"thead",3),t.TgZ(4,"tr",4),t.TgZ(5,"th",5),t.TgZ(6,"button",6),t.NdJ("click",function(){return t.CHM(n),t.oxw().changeFilter("all-tests")}),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"button",7),t.NdJ("click",function(){return t.CHM(n),t.oxw().changeFilter("my-tests")}),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.qZA(),t.YNc(12,kt,2,3,"th",8),t.YNc(13,Ft,2,3,"th",9),t.qZA(),t.TgZ(14,"tr"),t.TgZ(15,"th",10),t.NdJ("click",function(){return t.CHM(n),t.oxw().state.sortBy("FullName")}),t.TgZ(16,"div",11),t.TgZ(17,"div",12),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"div",13),t._uU(21),t.ALo(22,"async"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(23,"th",14),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"th",15),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.YNc(29,Nt,10,8,"th",16),t.qZA(),t.qZA(),t.TgZ(30,"tbody"),t.YNc(31,Jt,9,3,"tr",17),t.TgZ(32,"tr"),t.TgZ(33,"td",18),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"td",19),t._uU(37,"4.75"),t.qZA(),t.TgZ(38,"td",20),t._uU(39,"4.805"),t.qZA(),t.YNc(40,Qt,5,2,"td",21),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&e){const n=o.erzLet,s=t.oxw();t.xp6(6),t.Q6J("ngClass",t.WLB(28,R,"all-tests"===n.filter,"all-tests"!==n.filter)),t.xp6(1),t.hij(" ",t.lcZ(8,14,"tests.all-tests")," "),t.xp6(2),t.Q6J("ngClass",t.WLB(31,R,"my-tests"===n.filter,"my-tests"!==n.filter)),t.xp6(1),t.hij(" ",t.lcZ(11,16,"tests.owned-tests")," "),t.xp6(2),t.Q6J("ngForOf",n.tests),t.xp6(1),t.Q6J("ngForOf",n.tests),t.xp6(5),t.hij(" ",t.lcZ(19,18,"tests.student.name")," "),t.xp6(3),t.hij(" ",t.lcZ(22,20,s.state.getSortingChar$("FullName"))," "),t.xp6(3),t.hij(" ",t.lcZ(25,22,"tests.grade")," "),t.xp6(3),t.hij(" ",t.lcZ(28,24,"tests.average")," "),t.xp6(2),t.Q6J("ngForOf",n.tests),t.xp6(2),t.Q6J("ngForOf",n.studentGrades),t.xp6(3),t.Oqu(t.lcZ(35,26,"tests.average")),t.xp6(6),t.Q6J("ngForOf",n.tests)}}const Yt=function(e,o,n,s){return{tests:e,studentGrades:o,filter:n,expanded:s}};let jt=(()=>{class e{constructor(n){this.state=n}ngOnInit(){this.state.course=this.course,this.state.setSorting({key:"FullName",ascending:!0})}changeFilter(n){this.state.filter$.next(n)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(Mt))},e.\u0275cmp=t.Xpm({type:e,selectors:[["erz-test-edit-grades"]],inputs:{course:"course",selectedTest:"selectedTest"},decls:5,vars:14,consts:[[4,"erzLet"],[1,"table-responsive-wrapper"],[1,"table","table-hover","h-100"],[1,"h-100"],[1,"h-100","header-collapsible"],["colspan","3",1,"desktop","pt-3","sticky"],["type","button",1,"btn","desktop",3,"ngClass","click"],["type","button",1,"btn","ml-2","desktop",3,"ngClass","click"],["container","body","class","grade h-100 test-info-desktop",3,"ngClass",4,"ngFor","ngForOf"],["container","body","class","grade h-100 header-mobile test-info-mobile","colspan","3",3,"ngClass",4,"ngFor","ngForOf"],[1,"primary-column-width","sticky",3,"click"],[1,"d-flex"],[1,"column-title"],[1,"sort-direction","ml-1"],[1,"secondary-column-width","sticky","sticky-col-2","desktop"],[1,"secondary-column-width","border-right","sticky","sticky-col-3","desktop"],["container","body","class","grade h-100",3,"ngClass",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"sticky"],[1,"desktop","sticky","sticky","sticky-col-2"],[1,"desktop","border-right","sticky","sticky-col-3"],["class","grade",3,"ngClass",4,"ngFor","ngForOf"],["container","body",1,"grade","h-100","test-info-desktop",3,"ngClass"],[3,"test","expanded","toggle"],["container","body","colspan","3",1,"grade","h-100","header-mobile","test-info-mobile",3,"ngClass"],["container","body",1,"grade","h-100",3,"ngClass"],["class","w-25 column-title",4,"ngIf"],[3,"click"],[1,"w-25","column-title"],[1,"primary-column-width","sticky"],[3,"routerLink"],["href","",1,"mobile"],[1,"grade","sticky","sticky-col-2"],[1,"grade","border-right","sticky","sticky-col-3"],[1,"grade",3,"ngClass"],[3,"grade"],[1,"d-flex","flex-row","w-100"],["class","w-25",4,"ngIf"],[1,"w-25"]],template:function(n,s){1&n&&(t.YNc(0,Ht,41,34,"ng-container",0),t.ALo(1,"async"),t.ALo(2,"async"),t.ALo(3,"async"),t.ALo(4,"async")),2&n&&t.Q6J("erzLet",t.l5B(9,Yt,t.lcZ(1,1,s.state.tests$),t.lcZ(2,3,s.state.studentGrades$),t.lcZ(3,5,s.state.filter$),t.lcZ(4,7,s.state.expandedHeader$)))},directives:[L.e,l.mk,l.sg,St,l.O5,g.yS,qt],pipes:[l.Ov,v.X$],styles:[".filter-hover[_ngcontent-%COMP%]:hover{background-color:#8a8a8a}table[_ngcontent-%COMP%]   th.grade.selected[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td.grade.selected[_ngcontent-%COMP%]{display:table-cell!important}table[_ngcontent-%COMP%]   th.grade[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td.grade[_ngcontent-%COMP%], .desktop[_ngcontent-%COMP%]{display:none!important}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-top:none;vertical-align:top}.header-collapsible[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:1px solid #dee2e6;padding:0 1.5rem}.mobile[_ngcontent-%COMP%]{display:block!important}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th.test-info-desktop[_ngcontent-%COMP%]{display:none!important}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1.5rem}@media (min-width: 576px){.table-responsive-wrapper[_ngcontent-%COMP%]{display:block;overflow-x:auto}table[_ngcontent-%COMP%]{border-collapse:separate;border-spacing:0}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th.test-info-mobile[_ngcontent-%COMP%]{display:none!important}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th.test-info-desktop[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th.grade[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td.grade[_ngcontent-%COMP%], .desktop[_ngcontent-%COMP%]{display:table-cell!important}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-top:none;padding-top:.375rem;padding-bottom:.375rem;border-top:initial;min-width:100px;max-width:100px}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th.grade[_ngcontent-%COMP%]{min-width:300px;max-width:300px}.mobile[_ngcontent-%COMP%]{display:none!important}.primary-column-width[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;min-width:200px;max-width:200px}.secondary-column-width[_ngcontent-%COMP%]{min-width:100px;max-width:100px}table[_ngcontent-%COMP%]   .sticky[_ngcontent-%COMP%]{position:sticky;left:0;background-color:#fff}table[_ngcontent-%COMP%]   .sticky.sticky-col-2[_ngcontent-%COMP%]{left:200px}table[_ngcontent-%COMP%]   .sticky.sticky-col-3[_ngcontent-%COMP%]{left:300px}}"]}),e})();var I=r(2925);function Dt(e,o){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"erz-select",6),t.NdJ("valueChange",function(i){return t.CHM(n),t.oxw(3).testSelected(i)}),t.qZA(),t._UZ(2,"erz-test-edit-grades",7),t.BQk()}if(2&e){const n=t.oxw(2).erzLet;t.xp6(1),t.Q6J("options",n.testOptions)("value",n.selectedTestId)("allowEmpty",!1),t.xp6(1),t.Q6J("course",n.course)("selectedTest",n.selectedTest)}}function Wt(e,o){if(1&e&&(t.ynx(0),t._UZ(1,"erz-tests-header",5),t.YNc(2,Dt,3,5,"ng-container",4),t.BQk()),2&e){const n=t.oxw().erzLet;t.oxw();const s=t.MAs(8);t.xp6(1),t.Q6J("course",n.course),t.xp6(1),t.Q6J("ngIf",n.tests.length>0)("ngIfElse",s)}}function Bt(e,o){if(1&e&&(t.ynx(0),t.YNc(1,Wt,3,3,"ng-container",4),t.ALo(2,"async"),t.BQk()),2&e){const n=t.oxw(),s=t.MAs(10);t.xp6(1),t.Q6J("ngIf",!1===t.lcZ(2,2,n.state.loading$))("ngIfElse",s)}}function Xt(e,o){1&e&&(t.TgZ(0,"p",8),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"tests.no-tests")))}function Kt(e,o){1&e&&t._UZ(0,"erz-spinner")}const Vt=function(e,o,n,s,i){return{course:e,tests:o,testOptions:n,selectedTestId:s,selectedTest:i}};let te=(()=>{class e{constructor(n,s){this.state=n,this.route=s,this.selectTest$=new pt.x,this.courseId$=this.route.paramMap.pipe((0,m.U)(i=>Number(i.get("id"))),(0,O.x)()),this.course$=this.courseId$.pipe((0,u.w)(i=>this.state.getCourse(i)),(0,ut.d)(1)),this.tests$=this.course$.pipe((0,m.U)(i=>{var c;return null!==(c=i.Tests)&&void 0!==c?c:[]}),(0,O.x)()),this.testOptions$=this.tests$.pipe((0,m.U)(i=>i.map(c=>({Key:c.Id,Value:c.Designation}))),(0,O.x)()),this.selectedTestId$=(0,_t.T)(this.selectTest$,this.tests$.pipe((0,m.U)(i=>{var c;return null===(c=i[0])||void 0===c?void 0:c.Id}))).pipe((0,O.x)()),this.selectedTest$=this.selectedTestId$.pipe((0,u.w)(i=>this.tests$.pipe((0,m.U)(c=>c.find(d=>d.Id===i)))),(0,O.x)())}testSelected(n){this.selectTest$.next(n)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(M),t.Y36(g.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["erz-tests-list"]],decls:11,vars:17,consts:[[1,"erz-container","erz-container-padding-y","erz-container-padding-x-responsive"],[4,"erzLet"],["noTests",""],["loading",""],[4,"ngIf","ngIfElse"],[3,"course"],[1,"tests-dropdown",3,"options","value","allowEmpty","valueChange"],[3,"course","selectedTest"],[1,"mt-3","px-3"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0),t.YNc(1,Bt,3,4,"ng-container",1),t.ALo(2,"async"),t.ALo(3,"async"),t.ALo(4,"async"),t.ALo(5,"async"),t.ALo(6,"async"),t.YNc(7,Xt,3,3,"ng-template",null,2,t.W1O),t.YNc(9,Kt,1,0,"ng-template",null,3,t.W1O),t.qZA()),2&n&&(t.xp6(1),t.Q6J("erzLet",t.qbA(11,Vt,t.lcZ(2,1,s.course$),t.lcZ(3,3,s.tests$),t.lcZ(4,5,s.testOptions$),t.lcZ(5,7,s.selectedTestId$),t.lcZ(6,9,s.selectedTest$))))},directives:[L.e,l.O5,xt,Tt.H,jt,I.O],pipes:[l.Ov,v.X$],styles:[".tests-dropdown[_ngcontent-%COMP%]{display:block;padding:1.5rem}@media (min-width: 576px){.tests-dropdown[_ngcontent-%COMP%]{display:none}}"]}),e})();var Q=r(368);function ee(e,o){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"date"),t.ALo(3,"date"),t.qZA()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.AsE("",t.xi3(2,2,n.dateFrom,"dd.MM.yyyy"),"\u2013",t.xi3(3,5,n.dateTo,"dd.MM.yyyy"),"")}}const ne=function(e){return[e,"tests"]};function se(e,o){if(1&e&&(t.TgZ(0,"a",18),t.TgZ(1,"i",19),t._uU(2,"arrow_right_alt"),t.qZA(),t.TgZ(3,"span",20),t._uU(4),t.qZA(),t.qZA()),2&e){const n=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(2,ne,n.id)),t.xp6(4),t.Oqu(n.evaluationText)}}function oe(e,o){if(1&e&&(t.TgZ(0,"a",21),t.TgZ(1,"i",19),t._uU(2,"arrow_right_alt"),t.qZA(),t.TgZ(3,"span",20),t._uU(4),t.qZA(),t.qZA()),2&e){const n=t.oxw().$implicit;t.Q6J("href",n.evaluationLink,t.LSH),t.xp6(4),t.hij("",n.evaluationText," ")}}function ie(e,o){if(1&e&&(t.TgZ(0,"div",12),t.TgZ(1,"div",7),t.TgZ(2,"a",13),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"div",8),t.YNc(5,ee,4,8,"span",14),t.qZA(),t.TgZ(6,"div",9),t._uU(7),t.TgZ(8,"span",15),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.qZA(),t.TgZ(11,"div",10),t.YNc(12,se,5,4,"a",16),t.YNc(13,oe,5,2,"a",17),t.qZA(),t.qZA()),2&e){const n=o.$implicit;t.xp6(2),t.Q6J("href",n.detailLink,t.LSH),t.xp6(1),t.Oqu(n.Designation),t.xp6(2),t.Q6J("ngIf",n.dateFrom&&n.dateTo),t.xp6(2),t.hij(" ",n.studentCount," "),t.xp6(2),t.Oqu(t.lcZ(10,7,1===n.studentCount?"events.registration":"events.registrations")),t.xp6(3),t.Q6J("ngIf","add-tests"===n.state),t.xp6(1),t.Q6J("ngIf",n.evaluationText&&n.evaluationLink)}}function re(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"div",6),t.TgZ(2,"div",7),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",8),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"div",9),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"div",10),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.qZA(),t.YNc(14,ie,14,9,"div",11),t.BQk()),2&e){const n=t.oxw(2).erzLet;t.xp6(3),t.Oqu(t.lcZ(4,5,"events.designation")),t.xp6(3),t.Oqu(t.lcZ(7,7,"events.date")),t.xp6(3),t.hij(" ",t.lcZ(10,9,"events.registrations")," "),t.xp6(3),t.Oqu(t.lcZ(13,11,"events.rating")),t.xp6(2),t.Q6J("ngForOf",n.events)}}function ae(e,o){1&e&&(t.TgZ(0,"p",22),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"events.no-events")))}function ce(e,o){if(1&e&&(t.ynx(0),t.YNc(1,re,15,13,"ng-container",3),t.YNc(2,ae,3,3,"ng-template",null,5,t.W1O),t.BQk()),2&e){const n=t.MAs(3),s=t.oxw().erzLet;t.xp6(1),t.Q6J("ngIf",(null==s.events?null:s.events.length)>0)("ngIfElse",n)}}function de(e,o){1&e&&t._UZ(0,"erz-spinner")}function le(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",1),t.TgZ(1,"erz-resettable-input",2),t.NdJ("valueChange",function(i){return t.CHM(n),t.oxw().state.search$.next(i)}),t.ALo(2,"async"),t.ALo(3,"translate"),t.ALo(4,"translate"),t.qZA(),t.YNc(5,ce,4,2,"ng-container",3),t.ALo(6,"async"),t.YNc(7,de,1,0,"ng-template",null,4,t.W1O),t.qZA()}if(2&e){const n=o.erzLet,s=t.MAs(8),i=t.oxw();t.xp6(1),t.Q6J("value",t.lcZ(2,6,i.state.search$))("placeholder",t.lcZ(3,8,"events.search-by"))("label",t.lcZ(4,10,"events.search"))("disabled",!n.events),t.xp6(4),t.Q6J("ngIf",!1===t.lcZ(6,12,i.state.loading$))("ngIfElse",s)}}const ge=function(e){return{events:e}};let pe=(()=>{class e{constructor(n){this.state=n}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(G))},e.\u0275cmp=t.Xpm({type:e,selectors:[["erz-events-list"]],decls:2,vars:5,consts:[["class","erz-container erz-container-padding-y erz-container-padding-x-responsive",4,"erzLet"],[1,"erz-container","erz-container-padding-y","erz-container-padding-x-responsive"],[1,"d-flex","search",3,"value","placeholder","label","disabled","valueChange"],[4,"ngIf","ngIfElse"],["loading",""],["noEvents",""],[1,"event-header"],[1,"designation"],[1,"date"],[1,"registrations"],[1,"rating"],["class","event-entry",4,"ngFor","ngForOf"],[1,"event-entry"],[3,"href"],[4,"ngIf"],[1,"registrations-label"],["class","d-flex",3,"routerLink",4,"ngIf"],["class","d-flex",3,"href",4,"ngIf"],[1,"d-flex",3,"routerLink"],[1,"material-icons"],[1,"pl-1"],[1,"d-flex",3,"href"],[1,"mt-3"]],template:function(n,s){1&n&&(t.YNc(0,le,9,14,"div",0),t.ALo(1,"async")),2&n&&t.Q6J("erzLet",t.VKq(3,ge,t.lcZ(1,1,s.state.filteredEvents$)))},directives:[L.e,Q.w,l.O5,l.sg,g.yS,I.O],pipes:[l.Ov,v.X$,l.uU],styles:['.search[_ngcontent-%COMP%]{max-width:500px}.event-header[_ngcontent-%COMP%]{display:grid;padding:1.5rem;border-bottom:2px solid #dee2e6;grid-template-areas:"designation date registrations rating";grid-template-columns:4fr 2fr 1fr 2fr}.event-entry[_ngcontent-%COMP%]{display:grid;border-bottom:1px solid #dee2e6;padding:1.5rem;grid-template-areas:"designation date registrations rating";grid-template-columns:4fr 2fr 1fr 2fr}.designation[_ngcontent-%COMP%]{grid-area:designation}.registrations-label[_ngcontent-%COMP%]{display:none}@media (max-width: 767.98px){.search[_ngcontent-%COMP%]{padding:0 1.5rem}.event-header[_ngcontent-%COMP%]{display:none}.registrations-label[_ngcontent-%COMP%]{display:inline}.event-entry[_ngcontent-%COMP%]{grid-template-areas:"designation" "date" "registrations" "rating";grid-template-columns:1fr}}']}),e})();const H=function ue(e,o,n){switch(n.length){case 0:return e.call(o);case 1:return e.call(o,n[0]);case 2:return e.call(o,n[0],n[1]);case 3:return e.call(o,n[0],n[1],n[2])}return e.apply(o,n)};var _e=r(6623),Y=r(9940),j=Math.max;const he=function ve(e){return function(){return e}};var D=r(2370),ye=Date.now;const be=function Ae(e){var o=0,n=0;return function(){var s=ye(),i=16-(s-n);if(n=s,i>0){if(++o>=800)return arguments[0]}else o=0;return e.apply(void 0,arguments)}}(D.Z?function(e,o){return(0,D.Z)(e,"toString",{configurable:!0,enumerable:!1,value:he(o),writable:!0})}:Y.Z),Le=function Me(e,o){return be(function me(e,o,n){return o=j(void 0===o?e.length-1:o,0),function(){for(var s=arguments,i=-1,c=j(s.length-o,0),d=Array(c);++i<c;)d[i]=s[o+i];i=-1;for(var _=Array(o+1);++i<o;)_[i]=s[i];return _[o]=n(d),H(e,this,_)}}(e,o,Y.Z),e+"")},we=function Ie(e,o,n){var s=e.length;return n=void 0===n?s:n,!o&&n>=s?e:function Pe(e,o,n){var s=-1,i=e.length;o<0&&(o=-o>i?0:i+o),(n=n>i?i:n)<0&&(n+=i),i=o>n?0:n-o>>>0,o>>>=0;for(var c=Array(i);++s<i;)c[s]=e[s+o];return c}(e,o,n)};var Se=/\s/;var qe=/^\s+/;const Fe=function ke(e){return e&&e.slice(0,function Ue(e){for(var o=e.length;o--&&Se.test(e.charAt(o)););return o}(e)+1).replace(qe,"")};var W=r(1999),ze=r(6460),Ne=/^[-+]0x[0-9a-f]+$/i,Ge=/^0b[01]+$/i,Je=/^0o[0-7]+$/i,Re=parseInt;var X=1/0;const De=function je(e){return e?(e=function Qe(e){if("number"==typeof e)return e;if((0,ze.Z)(e))return NaN;if((0,W.Z)(e)){var o="function"==typeof e.valueOf?e.valueOf():e;e=(0,W.Z)(o)?o+"":o}if("string"!=typeof e)return 0===e?e:+e;e=Fe(e);var n=Ge.test(e);return n||Je.test(e)?Re(e.slice(2),n?2:8):Ne.test(e)?NaN:+e}(e))===X||e===-X?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0};var Ke=Math.max;const tn=function Ve(e,o){if("function"!=typeof e)throw new TypeError("Expected a function");return o=null==o?0:Ke(function We(e){var o=De(e),n=o%1;return o==o?n?o-n:o:0}(o),0),Le(function(n){var s=n[o],i=we(n,0,o);return s&&(0,_e.Z)(i,s),H(e,this,i)})};function en(e,o){if(1&e&&(t.TgZ(0,"p",7),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"tests.add.grading-scale"),": ",n.tests[0].GradingScale,"\n")}}const nn=function(){return[".."]};let sn=(()=>{class e{constructor(){this.tests=[]}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["erz-tests-add-header"]],inputs:{tests:"tests"},decls:12,vars:6,consts:[[1,"d-flex","justify-content-between"],[1,"back","btn","btn-link",3,"routerLink"],[1,"d-flex","align-items-center"],[1,"material-icons"],[1,"ml-3"],[1,"add","btn","btn-primary"],["class","mb-0 mt-3",4,"ngIf"],[1,"mb-0","mt-3"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"a",1),t.TgZ(2,"div",2),t.TgZ(3,"i",3),t._uU(4,"navigate_before"),t.qZA(),t.TgZ(5,"span",4),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"a",5),t.TgZ(9,"i",3),t._uU(10,"add"),t.qZA(),t.qZA(),t.qZA(),t.YNc(11,en,3,4,"p",6)),2&n&&(t.xp6(1),t.Q6J("routerLink",t.DdM(5,nn)),t.xp6(5),t.Oqu(t.lcZ(7,3,"tests.add.title")),t.xp6(5),t.Q6J("ngIf",(null==s.tests?null:s.tests.length)>0))},directives:[g.yS,l.O5],pipes:[v.X$],styles:["[_nghost-%COMP%]{display:block;border-bottom:1px solid #dee2e6;padding-bottom:1.5rem}.back[_ngcontent-%COMP%]{color:#33333d;text-decoration:none}.back[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%], .back[_ngcontent-%COMP%]:active   span[_ngcontent-%COMP%]{text-decoration:underline}@media (max-width: 767.98px){[_nghost-%COMP%]{padding:0 1.5rem 1.5rem}}"]}),e})();var on=r(2097),rn=r(2989);let an=(()=>{class e{constructor(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["erz-tests-add-entry"]],inputs:{test:"test"},decls:22,vars:20,consts:[[1,"designation"],[1,"date"],[1,"weight"],[1,"type"],[1,"weight-type"],[1,"state"],[1,"edit"],["type","button",1,"btn","btn-primary"],[1,"material-icons"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1),t._uU(3),t.ALo(4,"date"),t.qZA(),t.TgZ(5,"div",2),t._uU(6),t.ALo(7,"erzTestWeight"),t.qZA(),t.TgZ(8,"div",3),t._uU(9),t.ALo(10,"erzTestGradingType"),t.qZA(),t.TgZ(11,"div",4),t._uU(12),t.ALo(13,"erzTestWeight"),t.ALo(14,"erzTestGradingType"),t.qZA(),t.TgZ(15,"div",5),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"div",6),t.TgZ(19,"button",7),t.TgZ(20,"i",8),t._uU(21,"edit"),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(1),t.Oqu(s.test.Designation),t.xp6(2),t.Oqu(t.xi3(4,7,s.test.Date,"dd.MM.yyyy")),t.xp6(3),t.Oqu(t.lcZ(7,10,s.test)),t.xp6(3),t.Oqu(t.lcZ(10,12,s.test)),t.xp6(3),t.AsE(" ",t.lcZ(13,14,s.test),", ",t.lcZ(14,16,s.test),"\n"),t.xp6(4),t.hij(" ",t.lcZ(17,18,s.test.IsPublished?"tests.add.published":"tests.add.not-published"),"\n"))},pipes:[l.uU,on.H,rn.u,v.X$],styles:['[_nghost-%COMP%]{display:grid;grid-template-areas:"designation date weight type state edit";grid-template-columns:3fr 2fr 2fr 2fr 2fr .5fr;padding:1.5rem 0;border-bottom:1px solid #dee2e6}.designation[_ngcontent-%COMP%]{grid-area:designation}.date[_ngcontent-%COMP%]{grid-area:date}.weight[_ngcontent-%COMP%]{grid-area:weight}.type[_ngcontent-%COMP%]{grid-area:type}.weight-type[_ngcontent-%COMP%]{display:none}.state[_ngcontent-%COMP%]{grid-area:state}.edit[_ngcontent-%COMP%]{grid-area:edit}@media (max-width: 767.98px){[_nghost-%COMP%]{grid-template-areas:"designation edit" "date edit" "weight-type weight-type" "state state";grid-template-columns:1fr min-content;padding:1.5rem}.weight-type[_ngcontent-%COMP%]{display:block}.weight[_ngcontent-%COMP%], .type[_ngcontent-%COMP%]{display:none}}']}),e})();function cn(e,o){1&e&&t._UZ(0,"erz-tests-add-entry",15),2&e&&t.Q6J("test",o.$implicit)}function dn(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"div",7),t.TgZ(2,"div",8),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",9),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"div",10),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"div",11),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"div",12),t._uU(15),t.ALo(16,"translate"),t.qZA(),t._UZ(17,"div",13),t.qZA(),t.YNc(18,cn,1,1,"erz-tests-add-entry",14),t.BQk()),2&e){const n=t.oxw(2).erzLet;t.xp6(3),t.hij(" ",t.lcZ(4,6,"tests.add.designation")," "),t.xp6(3),t.Oqu(t.lcZ(7,8,"tests.add.date")),t.xp6(3),t.Oqu(t.lcZ(10,10,"tests.add.weight")),t.xp6(3),t.Oqu(t.lcZ(13,12,"tests.add.grading-type")),t.xp6(3),t.Oqu(t.lcZ(16,14,"tests.add.state")),t.xp6(3),t.Q6J("ngForOf",n.tests)}}function ln(e,o){1&e&&(t.TgZ(0,"p",16),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"tests.add.hint")))}function gn(e,o){if(1&e){const n=t.EpF();t.ynx(0),t._UZ(1,"erz-tests-add-header",4),t.TgZ(2,"erz-resettable-input",5),t.NdJ("valueChange",function(i){return t.CHM(n),t.oxw(2).state.search$.next(i)}),t.ALo(3,"async"),t.ALo(4,"translate"),t.ALo(5,"translate"),t.qZA(),t.YNc(6,dn,19,16,"ng-container",2),t.YNc(7,ln,3,3,"ng-template",null,6,t.W1O),t.BQk()}if(2&e){const n=t.MAs(8),s=t.oxw().erzLet,i=t.oxw();t.xp6(1),t.Q6J("tests",s.tests),t.xp6(1),t.Q6J("value",t.lcZ(3,7,i.state.search$))("placeholder",t.lcZ(4,9,"tests.add.search-by"))("label",t.lcZ(5,11,"tests.add.search"))("disabled",!s.tests),t.xp6(4),t.Q6J("ngIf",(null==s.tests?null:s.tests.length)>0)("ngIfElse",n)}}function pn(e,o){1&e&&t._UZ(0,"erz-spinner")}function un(e,o){if(1&e&&(t.ynx(0),t.YNc(1,gn,9,13,"ng-container",2),t.ALo(2,"async"),t.YNc(3,pn,1,0,"ng-template",null,3,t.W1O),t.BQk()),2&e){const n=t.MAs(4),s=t.oxw();t.xp6(1),t.Q6J("ngIf",!1===t.lcZ(2,2,s.state.loading$))("ngIfElse",n)}}const _n=function(e){return{tests:e}},mn=[{path:"",component:lt,children:[{path:"",component:pe}]},{path:"",component:gt,children:[{path:":id/tests",component:te},{path:":id/tests/add",component:(()=>{class e{constructor(n,s){this.state=n,this.route=s,this.course$=this.route.paramMap.pipe((0,u.w)(i=>{const c=Number(i.get("id"));return this.state.getCourse(c)})),this.tests$=this.course$.pipe((0,m.U)(i=>{var c;return null===(c=i.Tests)||void 0===c?void 0:c.filter(d=>d.IsOwner).sort((d,_)=>_.Date.getTime()-d.Date.getTime())})),this.filteredTests$=(0,h.a)([this.tests$,this.state.search$]).pipe((0,m.U)(tn(x.P)))}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(M),t.Y36(g.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["erz-tests-add"]],decls:3,vars:5,consts:[[1,"erz-container","erz-container-padding-y","erz-container-padding-x-responsive"],[4,"erzLet"],[4,"ngIf","ngIfElse"],["loading",""],[3,"tests"],[1,"d-flex","search",3,"value","placeholder","label","disabled","valueChange"],["addHint",""],[1,"entry-header"],[1,"designation"],[1,"date"],[1,"weight"],[1,"type"],[1,"state"],[1,"edit"],[3,"test",4,"ngFor","ngForOf"],[3,"test"],[1,"p-3"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0),t.YNc(1,un,5,4,"ng-container",1),t.ALo(2,"async"),t.qZA()),2&n&&(t.xp6(1),t.Q6J("erzLet",t.VKq(3,_n,t.lcZ(2,1,s.filteredTests$))))},directives:[L.e,l.O5,sn,Q.w,l.sg,an,I.O],pipes:[l.Ov,v.X$],styles:['.entry-header[_ngcontent-%COMP%]{display:grid;grid-template-areas:"designation date weight type state edit";grid-template-columns:3fr 2fr 2fr 2fr 2fr .5fr;padding:1.5rem 0;border-bottom:2px solid #dee2e6}.search[_ngcontent-%COMP%]{padding:1.5rem 0;max-width:500px}@media (max-width: 767.98px){.search[_ngcontent-%COMP%]{padding:1.5rem}.entry-header[_ngcontent-%COMP%]{display:none}}']}),e})()}]}];let fn=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[g.Bz.forChild(mn)],g.Bz]}),e})(),vn=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[C.m,fn]]}),e})()},4379:(P,Z,r)=>{r.d(Z,{K:()=>A});var C=r(1854),g=r(1135),y=r(1884),f=r(4782),h=r(4004),m=r(5698),b=r(5e3);let A=(()=>{class x{constructor(){this.sortingSubject$=new g.X(null),this.sorting$=this.sortingSubject$.asObservable().pipe((0,y.x)(C.Z),(0,f.d)(1))}getSortingChar$(u){return this.sorting$.pipe((0,h.U)(a=>a&&u===a.key?a.ascending?"\u2193":"\u2191":""))}setSorting(u){this.sortingSubject$.next(u)}toggleSorting(u){this.sorting$.pipe((0,m.q)(1)).subscribe(a=>{this.sortingSubject$.next(a&&a.key===u?{key:u,ascending:!a.ascending}:{key:u,ascending:!0})})}}return x.\u0275fac=function(u){return new(u||x)},x.\u0275prov=b.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})()},2370:(P,Z,r)=>{r.d(Z,{Z:()=>y});var C=r(3858);const y=function(){try{var f=(0,C.Z)(Object,"defineProperty");return f({},"",{}),f}catch(h){}}()},1854:(P,Z,r)=>{r.d(Z,{Z:()=>y});var C=r(7088);const y=function g(f,h){return(0,C.Z)(f,h)}}}]);