(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{sN2L:function(e,t,n){"use strict";n.r(t),n.d(t,"OpenAbsencesModule",function(){return te});var s=n("PCNd"),c=n("tyNb"),i=n("2Vo4"),r=n("XNiG"),o=n("VRyK"),a=n("itXk"),l=n("UXun"),d=n("lJxs"),b=n("IzEk"),p=n("CCnw"),u=n("CqUA"),g=n("eB9A"),h=n("jiSq"),m=n("j9z6"),f=n("5QKP"),y=n("IClS"),O=n("fXoL"),S=n("sYmb");let v=(()=>{class e{constructor(e,t,n,s){this.lessonPresencesService=e,this.selectionService=t,this.loadingService=n,this.translate=s,this.loading$=this.loadingService.loading$,this.search$=new i.a(""),this.updateUnconfirmedAbsences$=new r.a,this.unconfirmedAbsences$=Object(o.a)(this.loadUnconfirmedAbsences(),this.updateUnconfirmedAbsences$).pipe(Object(l.a)(1)),this.entries$=this.unconfirmedAbsences$.pipe(Object(d.a)(m.a),Object(l.a)(1)),this.sortCriteriaSubject$=new i.a({primarySortKey:"date",ascending:!1}),this.sortCriteria$=this.sortCriteriaSubject$.asObservable(),this.sortedEntries$=Object(a.a)([this.entries$,this.sortCriteria$]).pipe(Object(d.a)(Object(g.a)(m.e))),this.filteredEntries$=Object(a.a)([this.sortedEntries$,this.search$]).pipe(Object(d.a)(Object(g.a)(h.a)),Object(l.a)(1)),this.currentDetail=null}getUnconfirmedAbsences(e,t){return this.entries$.pipe(Object(d.a)(n=>{const s=n.find(n=>n.dateString===e&&n.studentId===t);return s?s.absences:[]}))}getAllUnconfirmedAbsencesForStudent(e){return this.entries$.pipe(Object(d.a)(t=>t.filter(t=>t.studentId===e).reduce((e,t)=>e.concat(t.absences),[])))}toggleSort(e){this.sortCriteriaSubject$.pipe(Object(b.a)(1)).subscribe(t=>{this.sortCriteriaSubject$.next(t.primarySortKey===e?{primarySortKey:e,ascending:!t.ascending}:{primarySortKey:e,ascending:"name"===e})})}get confirmBackLink(){return this.currentDetail?["/open-absences/detail",this.currentDetail.personId,this.currentDetail.date]:["/open-absences"]}updateAfterConfirm(){Object(a.a)([this.unconfirmedAbsences$.pipe(Object(b.a)(1)),this.selectionService.selectedIds$.pipe(Object(b.a)(1))]).pipe(Object(d.a)(Object(g.a)(m.d))).subscribe(e=>{this.selectionService.clear(),this.updateUnconfirmedAbsences$.next(e)})}buildMailToString(e,t){const n=e.Email,s=this.translate.instant("open-absences.detail.mail.subject"),c=t.map(e=>Object(y.d)(e)).join("%0D%0A");return`${n}?subject=${s}&body=${this.translate.instant("open-absences.detail.mail.body")}%0D%0A${c}`}loadUnconfirmedAbsences(){return this.loadingService.load(this.lessonPresencesService.getListOfUnconfirmed())}}return e.\u0275fac=function(t){return new(t||e)(O.Zb(p.a),O.Zb(f.a),O.Zb(u.a),O.Zb(S.d))},e.\u0275prov=O.Ib({token:e,factory:e.\u0275fac}),e})();var C=n("qUtt");let P=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=O.Gb({type:e,selectors:[["erz-open-absences"]],features:[O.yb([v,{provide:C.a,useExisting:v}])],decls:1,vars:0,template:function(e,t){1&e&&O.Nb(0,"router-outlet")},directives:[c.k],styles:[""],changeDetection:0}),e})();var $=n("yl8S"),M=n("EOpz"),j=n("ofXK"),k=n("U+jE"),_=n("4Kj8"),x=n("73sZ");function A(e,t){if(1&e){const e=O.Tb();O.Sb(0,"div",14),O.dc("click",function(){O.vc(e);const n=t.$implicit;return O.fc(4).openAbsencesService.toggleSort(n)}),O.Dc(1),O.gc(2,"translate"),O.Sb(3,"span",15),O.Dc(4),O.Rb(),O.Rb()}if(2&e){const e=t.$implicit,n=O.fc(3).erzLet,s=O.fc();O.lc("className",e),O.zb(1),O.Fc(" ",O.hc(2,3,"open-absences.list.header."+e)," "),O.zb(3),O.Ec(s.getSortDirectionCharacter(n.sortCriteria,e))}}const R=function(e,t){return["detail",e,t]},w=function(e){return{count:e}};function z(e,t){if(1&e){const e=O.Tb();O.Sb(0,"div"),O.Sb(1,"div",16),O.Sb(2,"div",17),O.dc("click",function(t){O.vc(e);const n=O.uc(4);return O.fc(4).onCheckboxCellClick(t,n)}),O.Sb(3,"input",18,19),O.dc("change",function(){O.vc(e);const n=t.$implicit;return O.fc(4).selectionService.toggle(n)}),O.gc(5,"async"),O.Rb(),O.Rb(),O.Sb(6,"div",20),O.Sb(7,"a",21),O.Dc(8),O.Rb(),O.Rb(),O.Sb(9,"div",22),O.Dc(10),O.Rb(),O.Sb(11,"div",23),O.Dc(12),O.gc(13,"translate"),O.Rb(),O.Sb(14,"div",24),O.Dc(15),O.gc(16,"translate"),O.Rb(),O.Sb(17,"div",25),O.Dc(18),O.gc(19,"erzDaysDifference"),O.Rb(),O.Sb(20,"div",26),O.Dc(21),O.gc(22,"date"),O.Rb(),O.Rb(),O.Rb()}if(2&e){const e=t.$implicit,n=O.fc(4);O.zb(3),O.lc("checked",O.hc(5,9,n.selectionService.isSelected$(e))),O.zb(4),O.lc("routerLink",O.qc(22,R,e.studentId,e.dateString)),O.zb(1),O.Ec(e.studentFullName),O.zb(2),O.Fc(" ",e.studyClassNumber," "),O.zb(2),O.Fc(" ",O.ic(13,11,n.getLessonsCountKey(e),O.pc(25,w,e.lessonsCount))," "),O.zb(3),O.Gc(" ",e.studyClassNumber,", ",O.ic(16,14,n.getLessonsCountKey(e),O.pc(27,w,e.lessonsCount))," "),O.zb(3),O.Fc(" ",O.hc(19,17,e.date)," "),O.zb(3),O.Ec(O.ic(22,19,e.date,"dd.MM.yyyy"))}}const I=function(){return["name","date"]};function E(e,t){if(1&e){const e=O.Tb();O.Qb(0),O.Sb(1,"div",4),O.Sb(2,"erz-resettable-input",5),O.dc("valueChange",function(t){return O.vc(e),O.fc(3).openAbsencesService.search$.next(t)}),O.gc(3,"async"),O.gc(4,"translate"),O.gc(5,"translate"),O.Rb(),O.Sb(6,"div",6),O.Sb(7,"div",7),O.Dc(8),O.gc(9,"translate"),O.Rb(),O.Sb(10,"a",8),O.Sb(11,"i",9),O.Dc(12,"edit"),O.Rb(),O.Rb(),O.Rb(),O.Rb(),O.Sb(13,"div",10),O.Sb(14,"div",11),O.Bc(15,A,5,5,"div",12),O.Rb(),O.Bc(16,z,23,29,"div",13),O.Rb(),O.Pb()}if(2&e){const e=O.fc(2).erzLet,t=O.fc();O.zb(2),O.lc("value",O.hc(3,8,t.openAbsencesService.search$))("placeholder",O.hc(4,10,"open-absences.search-by-name-or-class"))("label",O.hc(5,12,"open-absences.search")),O.zb(6),O.Fc(" ",O.ic(9,14,"open-absences.selected",O.pc(17,w,e.selection.length))," "),O.zb(2),O.Eb("disabled",0===e.selection.length),O.zb(5),O.lc("ngForOf",O.oc(19,I)),O.zb(1),O.lc("ngForOf",e.entries)}}function F(e,t){1&e&&(O.Sb(0,"p",27),O.Dc(1),O.gc(2,"translate"),O.Rb()),2&e&&(O.zb(1),O.Ec(O.hc(2,1,"open-absences.noEntries")))}function D(e,t){if(1&e&&(O.Qb(0),O.Bc(1,E,17,20,"ng-container",1),O.gc(2,"async"),O.Bc(3,F,3,3,"ng-template",null,3,O.Cc),O.Pb()),2&e){const e=O.uc(4),t=O.fc().erzLet,n=O.fc();let s=null;O.zb(1),O.lc("ngIf",(null==(s=O.hc(2,2,n.openAbsencesService.sortedEntries$))?null:s.length)>0||(null==t.entries?null:t.entries.length)>0)("ngIfElse",e)}}function L(e,t){1&e&&O.Nb(0,"erz-spinner")}function N(e,t){if(1&e&&(O.Sb(0,"div"),O.Bc(1,D,5,4,"ng-container",1),O.gc(2,"async"),O.Bc(3,L,1,0,"ng-template",null,2,O.Cc),O.Rb()),2&e){const e=O.uc(4),t=O.fc();O.zb(1),O.lc("ngIf",!O.hc(2,2,t.openAbsencesService.loading$))("ngIfElse",e)}}const T=function(e,t,n){return{selection:e,entries:t,sortCriteria:n}};let K=(()=>{class e{constructor(e,t,n){this.openAbsencesService=e,this.selectionService=t,this.scrollPosition=n,this.destroy$=new r.a}ngOnInit(){this.openAbsencesService.currentDetail=null,this.selectionService.clearNonOpenAbsencesEntries()}ngAfterViewInit(){this.scrollPosition.restore()}ngOnDestroy(){this.destroy$.next()}onCheckboxCellClick(e,t){e.target!==t&&t.click()}getSortDirectionCharacter(e,t){return e.primarySortKey!==t?"":e.ascending?"\u2193":"\u2191"}getLessonsCountKey(e){return"open-absences.list.content.lessonsCount."+(1===e.lessonsCount?"singular":"plural")}}return e.\u0275fac=function(t){return new(t||e)(O.Mb(v),O.Mb(f.a),O.Mb($.a))},e.\u0275cmp=O.Gb({type:e,selectors:[["erz-open-absences-list"]],decls:4,vars:11,consts:[[4,"erzLet"],[4,"ngIf","ngIfElse"],["loading",""],["noEntries",""],[1,"pt-3","pl-3","pr-3"],[1,"d-flex","header-search",3,"value","placeholder","label","valueChange"],[1,"d-flex","align-items-center","justify-content-between","mt-1"],[1,"selection-count","pl-1"],["routerLink","/open-absences/confirm",1,"edit","btn","btn-primary","mt-1","mb-2"],[1,"material-icons"],[1,"content"],[1,"absence-header"],[3,"className","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"className","click"],[1,"sort-direction"],[1,"absence-entry"],[1,"checkbox",3,"click"],["type","checkbox",1,"form-check-input",3,"checked","change"],["checkbox",""],[1,"name","pr-2"],[3,"routerLink"],[1,"study-class"],[1,"lessons-count"],[1,"study-class-lessons-count"],[1,"days-ago"],[1,"date"],[1,"mt-3"]],template:function(e,t){1&e&&(O.Bc(0,N,5,4,"div",0),O.gc(1,"async"),O.gc(2,"async"),O.gc(3,"async")),2&e&&O.lc("erzLet",O.rc(7,T,O.hc(1,1,t.selectionService.selection$),O.hc(2,3,t.openAbsencesService.filteredEntries$),O.hc(3,5,t.openAbsencesService.sortCriteria$)))},directives:[M.a,j.m,k.a,c.i,j.l,_.a],pipes:[j.b,S.c,x.a,j.e],styles:['.content[_ngcontent-%COMP%]{padding-left:1.5rem;padding-right:1.5rem}.header-search[_ngcontent-%COMP%]{max-width:500px}.edit[_ngcontent-%COMP%]{line-height:1;font-size:2.2rem}.absence-header[_ngcontent-%COMP%]{cursor:pointer;padding:1.5rem;display:grid;grid-template-areas:"name date";grid-template-columns:5fr 1fr;border-top:1px solid #dee2e6;border-bottom:2px solid #dee2e6}.absence-entry[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid #e9ecef;display:grid;grid-template-areas:"checkbox name study-class lessons-count days-ago date";grid-template-columns:-webkit-min-content 2fr 1fr 1fr 1fr 1fr;grid-template-columns:min-content 2fr 1fr 1fr 1fr 1fr}.checkbox[_ngcontent-%COMP%]{grid-area:checkbox;margin:0;padding:.6rem .75rem 0 0}.absence-all[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{padding-top:.2rem}.checkbox[_ngcontent-%COMP%]   input.form-check-input[_ngcontent-%COMP%]{position:static!important;margin:0!important;display:block}.name[_ngcontent-%COMP%]{grid-area:name;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.name[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#33333d}.lessons-count[_ngcontent-%COMP%]{grid-area:lessons-count}.study-class[_ngcontent-%COMP%]{grid-area:study-class}.study-class-lessons-count[_ngcontent-%COMP%]{grid-area:study-class-lessons-count;display:none}.days-ago[_ngcontent-%COMP%]{color:#6c757d;grid-area:days-ago}.date[_ngcontent-%COMP%]{grid-area:date}@media (max-width:750px){.content[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.absence-header[_ngcontent-%COMP%]{grid-template-areas:"name date";grid-template-columns:3fr 2fr}.absence-entry[_ngcontent-%COMP%]{grid-template-areas:"checkbox name date" "checkbox study-class-lessons-count days-ago";grid-template-columns:-webkit-min-content 3fr 2fr;grid-template-columns:min-content 3fr 2fr}.study-class-lessons-count[_ngcontent-%COMP%]{display:block}.lessons-count[_ngcontent-%COMP%], .study-class[_ngcontent-%COMP%]{display:none}.days-ago[_ngcontent-%COMP%], .study-class-lessons-count[_ngcontent-%COMP%]{font-size:1.3125rem;color:#adb5bd}}'],changeDetection:0}),e})();var U=n("EY2u"),B=n("eIep"),Z=n("1G5W"),G=n("pLZG"),X=n("K+0v"),J=n("OvQW"),q=n("KJh6"),Q=n("xHFS"),V=n("ZLMY");const W=function(){return["/open-absences"]};function Y(e,t){if(1&e&&(O.Sb(0,"div",2),O.Sb(1,"button",3),O.Sb(2,"div",4),O.Sb(3,"i",5),O.Dc(4,"navigate_before"),O.Rb(),O.Sb(5,"span",6),O.Dc(6),O.gc(7,"async"),O.Rb(),O.Rb(),O.Rb(),O.Rb()),2&e){const e=O.fc();O.zb(1),O.lc("routerLink",O.oc(4,W)),O.zb(5),O.Ec(O.hc(7,2,e.studentFullName$))}}const H=[{path:"",component:P,children:[{path:"",component:K,data:{restoreScrollPositionFrom:["/open-absences/detail/:personId/:date","/open-absences/confirm"]}},{path:"detail/:personId/:date",component:(()=>{class e{constructor(e,t,n,s,c,i,o){this.router=e,this.route=t,this.openAbsencesService=n,this.presenceTypesService=s,this.personService=c,this.selectionService=i,this.scrollPosition=o,this.absences$=this.route.paramMap.pipe(Object(B.a)(this.getAbsencesForParams.bind(this))),this.hasAbsences$=this.absences$.pipe(Object(d.a)(Object(X.c)(1))),this.studentFullName$=this.absences$.pipe(Object(d.a)(e=>e[0]&&e[0].StudentFullName||null)),this.allSelected$=Object(a.a)([this.absences$,this.selectionService.selection$]).pipe(Object(d.a)(([e,t])=>e.length===t.length)),this.studentEmail$=this.absences$.pipe(Object(d.a)(e=>e[0]&&e[0].StudentRef.Id||null),Object(B.a)(e=>e?this.personService.getByIdWithEmailInfos(e):U.a)),this.allUnconfirmedAbsencesForStudent$=this.route.paramMap.pipe(Object(B.a)(this.getAbsencesForStudentParam.bind(this))),this.mailTo$=Object(a.a)([this.studentEmail$,this.allUnconfirmedAbsencesForStudent$]).pipe(Object(d.a)(([e,t])=>this.openAbsencesService.buildMailToString(e,t))),this.destroy$=new r.a}ngOnInit(){this.selectionService.clearNonLessonPresences(),this.route.paramMap.pipe(Object(Z.a)(this.destroy$)).subscribe(e=>this.openAbsencesService.currentDetail={date:String(e.get("date")),personId:Number(e.get("personId"))}),this.hasAbsences$.pipe(Object(Z.a)(this.destroy$),Object(G.a)(Object(J.not)(X.b))).subscribe(()=>this.router.navigate(["/open-absences"]))}ngAfterViewInit(){this.scrollPosition.restore()}ngOnDestroy(){this.destroy$.next()}toggleAll(e){e?this.absences$.pipe(Object(b.a)(1)).subscribe(e=>this.selectionService.clear(e)):this.selectionService.clear()}onRowClick(e,t){e.target!==t&&t.click()}getPresenceTypeDesignation(e){return this.presenceTypesService.displayedTypes$.pipe(Object(d.a)(t=>{var n;return e.TypeRef.Id&&(null===(n=t.find(t=>t.Id===e.TypeRef.Id))||void 0===n?void 0:n.Designation)||null}))}getAbsencesForParams(e){return this.openAbsencesService.getUnconfirmedAbsences(String(e.get("date")),Number(e.get("personId")))}getAbsencesForStudentParam(e){return this.openAbsencesService.getAllUnconfirmedAbsencesForStudent(Number(e.get("personId")))}}return e.\u0275fac=function(t){return new(t||e)(O.Mb(c.g),O.Mb(c.a),O.Mb(v),O.Mb(q.a),O.Mb(Q.a),O.Mb(f.a),O.Mb($.a))},e.\u0275cmp=O.Gb({type:e,selectors:[["erz-open-absences-detail"]],decls:3,vars:8,consts:[["class","d-flex align-items-center justify-content-between",4,"erzLet"],[3,"absences$","selectionService","confirmLink","displayEmail","mailTo$"],[1,"d-flex","align-items-center","justify-content-between"],["type","button",1,"back","btn","btn-link","p-3",3,"routerLink"],[1,"d-flex","align-items-center"],[1,"material-icons"],[1,"ml-3"]],template:function(e,t){1&e&&(O.Bc(0,Y,8,5,"div",0),O.gc(1,"async"),O.Nb(2,"erz-student-profile-absences",1)),2&e&&(O.lc("erzLet",O.hc(1,6,t.selectionService.selection$)),O.zb(2),O.lc("absences$",t.absences$)("selectionService",t.selectionService)("confirmLink","/open-absences/confirm")("displayEmail",!0)("mailTo$",t.mailTo$))},directives:[M.a,V.a,c.h],pipes:[j.b],styles:['.content[_ngcontent-%COMP%]{padding-left:1.5rem;padding-right:1.5rem}.back[_ngcontent-%COMP%]{color:#33333d;text-decoration:none}.back[_ngcontent-%COMP%]:active   span[_ngcontent-%COMP%], .back[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{text-decoration:underline}.edit[_ngcontent-%COMP%]{line-height:1;font-size:2.2rem}.absence-all[_ngcontent-%COMP%]{grid-template-areas:"checkbox all";grid-template-columns:-webkit-min-content 1fr;grid-template-columns:min-content 1fr}.absence-all[_ngcontent-%COMP%], .absence-entry[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid #e9ecef;display:grid}.absence-entry[_ngcontent-%COMP%]{grid-template-areas:"checkbox lesson-class time teacher" "checkbox presence-type date days-ago";grid-template-columns:-webkit-min-content 2fr 1fr 2fr;grid-template-columns:min-content 2fr 1fr 2fr}.checkbox[_ngcontent-%COMP%]{grid-area:checkbox;margin:0;padding:.6rem .75rem 0 0}.absence-all[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{padding-top:.2rem}.checkbox[_ngcontent-%COMP%]   input.form-check-input[_ngcontent-%COMP%]{position:static!important;margin:0!important;display:block}.all[_ngcontent-%COMP%]{grid-area:all}.lesson-class[_ngcontent-%COMP%]{grid-area:lesson-class;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.time[_ngcontent-%COMP%]{grid-area:time}.teacher[_ngcontent-%COMP%]{grid-area:teacher}.presence-type[_ngcontent-%COMP%]{color:#adb5bd;grid-area:presence-type}.date[_ngcontent-%COMP%]{grid-area:date}.days-ago[_ngcontent-%COMP%]{color:#adb5bd;grid-area:days-ago}.date-days-ago[_ngcontent-%COMP%]{grid-area:date-days-ago;display:none}@media (max-width:750px){.content[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.absence-all[_ngcontent-%COMP%]{grid-template-areas:"checkbox all"}.absence-all[_ngcontent-%COMP%], .absence-entry[_ngcontent-%COMP%]{grid-template-columns:-webkit-min-content 1fr;grid-template-columns:min-content 1fr}.absence-entry[_ngcontent-%COMP%]{grid-template-areas:"checkbox lesson-class" "checkbox teacher" "checkbox date-days-ago" "checkbox time" "checkbox presence-type"}.date-days-ago[_ngcontent-%COMP%]{display:block}.date[_ngcontent-%COMP%], .days-ago[_ngcontent-%COMP%]{display:none}}'],changeDetection:0}),e})(),data:{restoreScrollPositionFrom:["/open-absences/confirm"]}},{path:"confirm",component:n("hH5/").a}]}];let ee=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=O.Kb({type:e}),e.\u0275inj=O.Jb({imports:[[c.j.forChild(H)],c.j]}),e})(),te=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=O.Kb({type:e}),e.\u0275inj=O.Jb({imports:[[s.a,ee]]}),e})()},yl8S:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var s=n("tyNb"),c=n("XNiG"),i=n("LRne"),r=n("pLZG"),o=n("lJxs"),a=n("IzEk"),l=n("5+tZ"),d=n("eIep"),b=n("Y6wi"),p=n("UXun"),u=n("1G5W"),g=n("zP0r"),h=n("fXoL"),m=n("ofXK");let f=(()=>{class e{constructor(e,t){this.router=e,this.viewportScroller=t,this.scrollPositions={},this.previousRoute=null,this.currentRoute=null,this.currentScrollPosition=[0,0],this.destroy$=new c.a,this.scrollPosition$=this.router.events.pipe(Object(r.a)(O),Object(o.a)(this.getScrollPosition.bind(this))),this.activationEnd$=this.router.events.pipe(Object(r.a)(y)),this.navigationEnd$=this.router.events.pipe(Object(r.a)(S)),this.route$=this.activationEnd$.pipe(Object(a.a)(1)).pipe(Object(l.a)(e=>[Object(i.a)(e),this.navigationEnd$.pipe(Object(d.a)(()=>this.activationEnd$.pipe(Object(a.a)(1))))]),Object(b.a)(),Object(o.a)(e=>e.snapshot),Object(p.a)(1)),this.scrollPosition$.pipe(Object(u.a)(this.destroy$)).subscribe(e=>this.currentScrollPosition=e),this.route$.pipe(Object(u.a)(this.destroy$)).subscribe(e=>{this.previousRoute=this.currentRoute,this.currentRoute=e})}ngOnDestroy(){this.destroy$.next()}restore(){if(!this.currentRoute||!this.requiresStoring(this.currentRoute))return;if(this.previousRoute&&this.shouldStoreFor(this.currentRoute,this.previousRoute)){const e=this.getPath(this.currentRoute);this.scrollToPosition(this.scrollPositions[e]||[0,0])}const e=this.currentRoute;this.route$.pipe(Object(g.a)(1),Object(a.a)(1),Object(u.a)(this.destroy$),Object(r.a)(t=>this.shouldStoreFor(e,t))).subscribe(()=>{const t=this.getPath(e);this.scrollPositions[t]=this.currentScrollPosition})}getScrollPosition(){return this.viewportScroller.getScrollPosition()}scrollToPosition(e){this.viewportScroller.scrollToPosition(e)}getPath(e){return e?"/"+e.pathFromRoot.map(e=>e.routeConfig&&e.routeConfig.path).filter(e=>e).join("/"):"/"}requiresStoring(e){return Boolean(e&&e.routeConfig&&e.routeConfig.data&&Array.isArray(e.routeConfig.data.restoreScrollPositionFrom)&&e.routeConfig.data.restoreScrollPositionFrom.length>0)}shouldStoreFor(e,t){return(e&&e.routeConfig&&e.routeConfig.data&&Array.isArray(e.routeConfig.data.restoreScrollPositionFrom)?e.routeConfig.data.restoreScrollPositionFrom:[]).includes(this.getPath(t))}}return e.\u0275fac=function(t){return new(t||e)(h.Zb(s.g),h.Zb(m.t))},e.\u0275prov=h.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function y(e){return e instanceof s.b}function O(e){return e instanceof s.e}function S(e){return e instanceof s.d}}}]);