import{c as f}from"./chunk-2FIH3FGB.js";import{D as r,G as m}from"./chunk-GI4AZI25.js";import{d as o}from"./chunk-Q5U6YZUT.js";function d(t,e){let s=o(t),n=o(e);return+s<+n}function p(t,e){let s=+o(t),[n,i]=[+o(e.start),+o(e.end)].sort((a,l)=>a-l);return s>=n&&s<=i}function T(t,e){return t===null&&e===null||t!==null&&e!==null&&t.TeacherInformation===e.TeacherInformation&&t.LessonDateTimeFrom.getTime()===e.LessonDateTimeFrom.getTime()&&t.LessonDateTimeTo.getTime()===e.LessonDateTimeTo.getTime()}function h(t){let e=new u(t.TeacherInformation,t.LessonDateTimeFrom,t.LessonDateTimeTo);return e.addLesson(t),e}var u=class{constructor(e,s,n){this.TeacherInformation=e,this.LessonDateTimeFrom=s,this.LessonDateTimeTo=n,this.lessons=[]}addLesson(e){this.lessons.some(s=>r(s,e))||(this.lessons.push(e),this.updateId(),this.updateStudyClassNumbers(),this.updateEventDesignations())}getIds(){return[...new Set(this.lessons.map(e=>e.LessonRef.Id))]}getEventIds(){return[...new Set(this.lessons.map(e=>e.EventRef.Id))]}updateId(){this.id=[...new Set(this.lessons.map(e=>e.LessonRef.Id).sort())].join("-")}updateStudyClassNumbers(){this.studyClassNumbers=[...new Set(this.lessons.map(e=>e.StudyClassNumber).sort((e,s)=>e.localeCompare(s)))].join(", ")}updateEventDesignations(){this.eventDesignations=[...new Set(this.lessons.map(e=>e.EventDesignation).sort())].join(", ")}};function C(t){return c(t).reduce((e,s)=>{let n=e.find(a=>T(a,s));if(n)return n.addLesson(s),e;let i=h(s);return[...e,i]},[]).sort(m)}function F(t){if(t.length===0)return null;let e=new Date;if(t=[...t].sort(m),f(e,t[0].LessonDateTimeFrom)){for(let s of t)if(d(e,s.LessonDateTimeFrom)||p(e,{start:s.LessonDateTimeFrom,end:s.LessonDateTimeTo}))return s;return t[t.length-1]}return t[0]}function c(t){return t.reduce((e,s)=>e.some(n=>r(n,s))?e:[...e,s],[])}export{C as a,F as b,c};
