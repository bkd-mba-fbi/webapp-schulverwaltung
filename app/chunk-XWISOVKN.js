import{a as H}from"./chunk-RXV77OBQ.js";import{a as pt}from"./chunk-USF5QQBL.js";import{a as I}from"./chunk-D2H555EG.js";import{a as ut}from"./chunk-WNZFLLQC.js";import{d as at,n as dt,p as ct}from"./chunk-DVBPCEX4.js";import{A as rt,B as lt,G as ht,i as et}from"./chunk-RYYQAFJB.js";import{$d as c,Ba as a,Ca as k,Fb as z,Ma as y,Md as d,Nd as R,Ob as U,Pb as L,Pd as w,Qb as G,Rb as W,Rd as it,Sb as q,Sd as D,Tb as X,Vd as nt,_ as F,_b as Z,a as E,ac as B,ae as st,b as O,cd as tt,ec as _,fb as b,fc as v,fe as ot,gc as C,ha as u,hc as J,ic as f,jc as m,ma as r,mb as Q,o as P,pc as A,rb as V,rc as K,sc as Y,t as S,u as T,ub as g,wb as h,yb as $,za as j}from"./chunk-CHBP6U4G.js";var _t=(()=>{class i{constructor(){this._ngbConfig=r(I),this.horizontal=!1}get animation(){return this._animation??this._ngbConfig.animation}set animation(t){this._animation=t}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275prov=u({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),x=(()=>{class i{constructor(){this._config=r(_t),this._element=r(y),this._zone=r(k),this.animation=this._config.animation,this._afterInit=!1,this._isCollapsed=!1,this.ngbCollapseChange=new a,this.horizontal=this._config.horizontal,this.shown=new a,this.hidden=new a}set collapsed(t){this._isCollapsed!==t&&(this._isCollapsed=t,this._afterInit&&this._runTransitionWithEvents(t,this.animation))}ngOnInit(){this._runTransition(this._isCollapsed,!1),this._afterInit=!0}toggle(t=this._isCollapsed){this.collapsed=!t,this.ngbCollapseChange.next(this._isCollapsed)}_runTransition(t,e){return dt(this._zone,this._element.nativeElement,ct,{animation:e,runningTransition:"stop",context:{direction:t?"hide":"show",dimension:this.horizontal?"width":"height"}})}_runTransitionWithEvents(t,e){this._runTransition(t,e).subscribe(()=>{t?this.hidden.emit():this.shown.emit()})}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275dir=h({type:i,selectors:[["","ngbCollapse",""]],hostVars:2,hostBindings:function(e,n){e&2&&A("collapse-horizontal",n.horizontal)},inputs:{animation:"animation",collapsed:[0,"ngbCollapse","collapsed"],horizontal:"horizontal"},outputs:{ngbCollapseChange:"ngbCollapseChange",shown:"shown",hidden:"hidden"},exportAs:["ngbCollapse"]})}}return i})();var Ct=["container"],At=["ngbAccordionBody",""],Rt=["*"],wt=(()=>{class i{constructor(){this._ngbConfig=r(I),this.closeOthers=!1,this.destroyOnHide=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(t){this._animation=t}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275prov=u({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Dt=0,te=(()=>{class i{constructor(){this._item=r(N),this._viewRef=null,this.elementRef=r(y)}ngAfterContentChecked(){this._bodyTpl&&(this._item._shouldBeInDOM?this._createViewIfNotExists():this._destroyViewIfExists())}ngOnDestroy(){this._destroyViewIfExists()}_destroyViewIfExists(){this._viewRef?.destroy(),this._viewRef=null}_createViewIfNotExists(){this._viewRef||(this._viewRef=this._vcr.createEmbeddedView(this._bodyTpl),this._viewRef.detectChanges())}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=g({type:i,selectors:[["","ngbAccordionBody",""]],contentQueries:function(e,n,o){if(e&1&&C(o,Q,7),e&2){let s;f(s=m())&&(n._bodyTpl=s.first)}},viewQuery:function(e,n){if(e&1&&J(Ct,7,V),e&2){let o;f(o=m())&&(n._vcr=o.first)}},hostAttrs:[1,"accordion-body"],attrs:At,ngContentSelectors:Rt,decls:3,vars:0,consts:[["container",""]],template:function(e,n){e&1&&(_(),Z(0,null,0),v(2))},encapsulation:2})}}return i})(),It=(()=>{class i{constructor(){this.item=r(N),this.ngbCollapse=r(x)}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275dir=h({type:i,selectors:[["","ngbAccordionCollapse",""]],hostAttrs:["role","region",1,"accordion-collapse"],hostVars:2,hostBindings:function(e,n){e&2&&(B("id",n.item.collapseId),z("aria-labelledby",n.item.toggleId))},exportAs:["ngbAccordionCollapse"],features:[$([x])]})}}return i})();var ee=(()=>{class i{constructor(){this.item=r(N)}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275dir=h({type:i,selectors:[["","ngbAccordionHeader",""]],hostAttrs:["role","heading",1,"accordion-header"],hostVars:2,hostBindings:function(e,n){e&2&&A("collapsed",n.item.collapsed)}})}}return i})(),N=(()=>{class i{constructor(){this._accordion=r(Mt),this._cd=r(tt),this._destroyRef=r(j),this._collapsed=!0,this._id=`ngb-accordion-item-${Dt++}`,this._collapseAnimationRunning=!1,this.disabled=!1,this.show=new a,this.shown=new a,this.hide=new a,this.hidden=new a}set id(t){at(t)&&t!==""&&(this._id=t)}set destroyOnHide(t){this._destroyOnHide=t}get destroyOnHide(){return this._destroyOnHide===void 0?this._accordion.destroyOnHide:this._destroyOnHide}set collapsed(t){t?this.collapse():this.expand()}get collapsed(){return this._collapsed}get id(){return`${this._id}`}get toggleId(){return`${this.id}-toggle`}get collapseId(){return`${this.id}-collapse`}get _shouldBeInDOM(){return!this.collapsed||this._collapseAnimationRunning||!this.destroyOnHide}ngAfterContentInit(){let{ngbCollapse:t}=this._collapse;t.animation=!1,t.collapsed=this.collapsed,t.animation=this._accordion.animation,t.hidden.pipe(H(this._destroyRef)).subscribe(()=>{this._collapseAnimationRunning=!1,this.hidden.emit(),this._accordion.hidden.emit(this.id),this._cd.markForCheck()}),t.shown.pipe(H(this._destroyRef)).subscribe(()=>{this.shown.emit(),this._accordion.shown.emit(this.id),this._cd.markForCheck()})}toggle(){this.collapsed=!this.collapsed}expand(){if(this.collapsed){if(!this._accordion._ensureCanExpand(this))return;this._collapsed=!1,this._cd.markForCheck(),this._cd.detectChanges(),this.show.emit(),this._accordion.show.emit(this.id),this._collapse.ngbCollapse.animation=this._accordion.animation,this._collapse.ngbCollapse.collapsed=!1}}collapse(){this.collapsed||(this._collapsed=!0,this._collapseAnimationRunning=!0,this._cd.markForCheck(),this.hide.emit(),this._accordion.hide.emit(this.id),this._collapse.ngbCollapse.animation=this._accordion.animation,this._collapse.ngbCollapse.collapsed=!0)}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275dir=h({type:i,selectors:[["","ngbAccordionItem",""]],contentQueries:function(e,n,o){if(e&1&&C(o,It,7),e&2){let s;f(s=m())&&(n._collapse=s.first)}},hostAttrs:[1,"accordion-item"],hostVars:1,hostBindings:function(e,n){e&2&&B("id",n.id)},inputs:{id:[0,"ngbAccordionItem","id"],destroyOnHide:"destroyOnHide",disabled:"disabled",collapsed:"collapsed"},outputs:{show:"show",shown:"shown",hide:"hide",hidden:"hidden"},exportAs:["ngbAccordionItem"]})}}return i})(),Mt=(()=>{class i{constructor(){this._config=r(wt),this._anItemWasAlreadyExpandedDuringInitialisation=!1,this.animation=this._config.animation,this.closeOthers=this._config.closeOthers,this.destroyOnHide=this._config.destroyOnHide,this.show=new a,this.shown=new a,this.hide=new a,this.hidden=new a}toggle(t){this._getItem(t)?.toggle()}expand(t){this._getItem(t)?.expand()}expandAll(){this._items&&(this.closeOthers?this._items.find(t=>!t.collapsed)||this._items.first.expand():this._items.forEach(t=>t.expand()))}collapse(t){this._getItem(t)?.collapse()}collapseAll(){this._items?.forEach(t=>t.collapse())}isExpanded(t){let e=this._getItem(t);return e?!e.collapsed:!1}_ensureCanExpand(t){return this.closeOthers?this._items?(this._items.find(e=>!e.collapsed&&t!==e)?.collapse(),!0):this._anItemWasAlreadyExpandedDuringInitialisation?!1:(this._anItemWasAlreadyExpandedDuringInitialisation=!0,!0):!0}_getItem(t){return this._items?.find(e=>e.id===t)}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275dir=h({type:i,selectors:[["","ngbAccordion",""]],contentQueries:function(e,n,o){if(e&1&&C(o,N,4),e&2){let s;f(s=m())&&(n._items=s)}},hostAttrs:[1,"accordion"],inputs:{animation:"animation",closeOthers:"closeOthers",destroyOnHide:"destroyOnHide"},outputs:{show:"show",shown:"shown",hide:"hide",hidden:"hidden"},exportAs:["ngbAccordion"]})}}return i})();var gt=(()=>{class i{constructor(){this.expanded=!1}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=g({type:i,selectors:[["bkd-caret"]],inputs:{expanded:"expanded"},decls:2,vars:1,consts:[["role","button",1,"d-flex","material-icons"]],template:function(e,n){e&1&&(q(0,"i",0),K(1),X()),e&2&&(b(),Y(n.expanded?"expand_less":"expand_more"))},styles:["i[_ngcontent-%COMP%]:hover{color:#ea161f}"]})}}return i})();var xt=["*"],oe=(()=>{class i{constructor(){this.opened=!1}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=g({type:i,selectors:[["bkd-student-dossier-entry-header"]],inputs:{opened:"opened"},ngContentSelectors:xt,decls:3,vars:1,consts:[[1,"m-0"],[1,"d-flex","align-items-center",3,"expanded"]],template:function(e,n){e&1&&(_(),L(0,"h5",0),v(1),G(),W(2,"bkd-caret",1)),e&2&&(b(2),U("expanded",n.opened))},dependencies:[gt],styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem;border-top:1px solid #dee2e6;cursor:pointer}button[_ngcontent-%COMP%]{color:#000;text-decoration:none}.btn-link[_ngcontent-%COMP%]:hover{text-decoration:none}"],changeDetection:0})}}return i})();var Et=D({Id:R,Title:d}),ft=c(it(Et));var _e=(()=>{class i{constructor(){this.settings=r(rt),this.storageService=r(pt),this.http=r(et)}getPersonMasterDataReports(t){return this.getAvailableReports("Person",this.settings.personMasterDataReports,[t])}getStudentConfirmationReports(t){return this.getAvailableReports("Praesenzinformation",this.settings.studentConfirmationReports,t)}getEvaluateAbsencesReports(t){return this.getAvailableReports("Praesenzinformation",this.settings.evaluateAbsencesReports,t)}getMyAbsencesReports(t){return this.getAvailableReports("Praesenzinformation",this.settings.myAbsencesReports,t)}getCourseTestsReports(t){return this.getAvailableReports("Anlass",this.settings.testsByCourseReports,[t])}getEvaluationReports(t){return this.getAvailableReports("Anlass",this.settings.evaluationReports,[t])}getStudentSubscriptionGradesReports(t){return this.settings.testsBySubscriptionStudentReports.map((n,o)=>{let s=this.getReportUrl(n.type,"Anmeldung",n.id,t);return O(E({},n),{title:`Report ${o+1}`,url:s})})}getTeacherSubscriptionGradesReports(t){return this.settings.testsBySubscriptionTeacherReports.map((n,o)=>{let s=this.getReportUrl(n.type,"Anmeldung",n.id,t);return O(E({},n),{title:`Report ${o+1}`,url:s})})}getStudyClassStudentsReports(t){return this.getAvailableReports("Anlass",this.settings.studyClassStudentsReports,[t])}getCourseStudentsReports(t){return this.getAvailableReports("Anlass",this.settings.courseStudentsReports,[t])}getAvailableReports(t,e,n){let o=ht(e,l=>l.type),s=T(Object.keys(o).map(l=>this.getAvailableReportsForType(l,t,o[l].map(({id:p})=>p),n)));return this.mergeAvailableReports(s,e)}getAvailableReportsForType(t,e,n,o){return o.length===0?P([]):this.http.get(this.getReportAvailabilityUrl(t,e,n,o)).pipe(F(ut(ft)),S(s=>s?s.map(({Id:l,Title:p})=>({type:t,id:l,title:p,url:this.getReportUrl(t,e,l,o)})):[]))}mergeAvailableReports(t,e){return t.pipe(S(n=>{let o=lt(n);return e.reduce((s,l)=>{let p=o.find(({id:mt})=>mt===l.id);return p?[...s,p]:s},[])}))}getReportUrl(t,e,n,o){let s=new URL(`${this.settings.apiUrl}/Files/${this.getReportTypePathPart(t)}/${e}/${n}`);return s.searchParams.set("ids",o.join(",")),s.toString()}getReportAvailabilityUrl(t,e,n,o){let s=new URL(`${this.settings.apiUrl}/${this.getReportTypePathPart(t)}/AvailableReports/${e}`);return s.searchParams.set("ids",Array.isArray(n)?n.join(","):String(n)),s.searchParams.set("keys",o.join(",")),s.toString()}getReportTypePathPart(t){return`${t[0].toUpperCase()+t.slice(1)}Reports`}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275prov=u({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Re=D({Id:R,AddressLine1:c(d),AddressLine2:st(d),Birthdate:c(ot),DisplayEmail:c(d),FirstName:d,FullName:d,Gender:nt([w("M"),w("F"),w("X")]),LastName:d,Location:c(d),PhoneMobile:c(d),PhonePrivate:c(d),PostalCode:c(d)});export{te as a,It as b,ee as c,N as d,Mt as e,Re as f,gt as g,oe as h,_e as i};
