import{w as B}from"./chunk-HVLHLZKP.js";import{e as H}from"./chunk-DQAQYQ7K.js";import{P as N}from"./chunk-ZXUJZ6KS.js";import{$d as k,Ae as D,Cc as p,Dc as d,Eb as S,Gb as f,H as v,Ha as E,Ib as y,Nb as C,O as _,Ob as o,Pb as r,S as h,U as g,Ub as $,Wb as b,Xb as x,ba as I,ce as w,db as l,ge as F,ic as s,id as P,k as m,ob as O,ua as T,v as u,va as M,we as V}from"./chunk-GP622B77.js";function z(n,i){if(n&1){let c=$();o(0,"button",6),b("click",function(a){T(c);let t=x();return M(t.modelChange(a))}),o(1,"i",2),s(2,"clear"),r()()}}function L(n,i){n&1&&(o(0,"div",5)(1,"div",7)(2,"span",8),s(3,"Loading..."),r()()())}var A=300,j=3,ie=(()=>{let i=class i{constructor(){this.selectedItem$=new m(null),this.placeholder="shared.typeahead.default-placeholder",this.valueChange=this.selectedItem$.pipe(u(e=>e?e.Key:null),h()),this.componentId=N("bkd-typeahead-"),this.loading$=new m(!1),this.search=e=>e.pipe(q(j,A),I(this.fetchItems.bind(this)))}ngOnChanges(e){e.value&&e.value.currentValue&&e.value.currentValue!==this.selectedItemKey&&this.fetchItem(e.value.currentValue).subscribe(a=>{this.modelChange(a)})}format(e){return e.Value}modelChange(e){this.selectedItem$.next(e instanceof Object?e:null)}get selectedItemKey(){return this.selectedItem$.value?this.selectedItem$.value.Key:null}fetchItems(e){return this.loading$.next(!0),this.typeaheadService.getTypeaheadItems(e,this.additionalHttpParams).pipe(g(()=>this.loading$.next(!1)))}fetchItem(e){return this.loading$.next(!0),this.typeaheadService.getTypeaheadItemByKey(e).pipe(g(()=>this.loading$.next(!1)))}};i.\u0275fac=function(a){return new(a||i)},i.\u0275cmp=O({type:i,selectors:[["bkd-typeahead"]],inputs:{typeaheadService:"typeaheadService",placeholder:"placeholder",value:"value",additionalHttpParams:"additionalHttpParams"},outputs:{valueChange:"valueChange"},features:[E],decls:11,vars:18,consts:[[1,"input-group"],[1,"input-group-text",3,"id"],[1,"material-icons"],["type","text",1,"form-control",3,"ngModelChange","ngbTypeahead","inputFormatter","resultFormatter","ngModel"],["type","button",1,"btn","btn-link","text-decoration-none"],[1,"spinner-container"],["type","button",1,"btn","btn-link","text-decoration-none",3,"click"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"visually-hidden"]],template:function(a,t){a&1&&(o(0,"div",0)(1,"span",1)(2,"i",2),s(3,"search"),r()(),o(4,"input",3),p(5,"async"),p(6,"translate"),p(7,"translate"),b("ngModelChange",function(K){return t.modelChange(K)}),r(),f(8,z,3,0,"button",4),r(),f(9,L,4,0,"div",5),p(10,"async")),a&2&&(l(),C("id",t.componentId),l(3),C("ngbTypeahead",t.search)("inputFormatter",t.format)("resultFormatter",t.format)("ngModel",d(5,10,t.selectedItem$)),S("placeholder",d(6,12,t.placeholder))("aria-label",d(7,14,t.placeholder))("aria-describedby",t.componentId),l(4),y(t.value?8:-1),l(),y(d(10,16,t.loading$)?9:-1))},dependencies:[B,V,k,w,F,P,D],styles:["[_nghost-%COMP%]{display:block;position:relative;background:#fff}.spinner-container[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;right:.75rem;display:flex;align-items:center;z-index:1001}.spinner-border[_ngcontent-%COMP%]{color:#6c757d}input[_ngcontent-%COMP%]{padding-right:2.5em}.input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{position:absolute;right:0;z-index:5}"],changeDetection:0});let n=i;return n})();function q(n,i){return c=>c.pipe(_(i),u(U),h(),v(H(n)))}function U(n){return n.trim().toLowerCase()}export{ie as a};
