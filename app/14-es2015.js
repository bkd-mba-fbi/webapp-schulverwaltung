(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"EM/t":function(t,i,e){"use strict";e.r(i),e.d(i,"MySettingsModule",function(){return I});var n=e("PCNd"),s=e("tyNb"),o=e("fXoL"),c=e("2Vo4"),r=e("kZPp"),a=e("lJxs"),b=e("bHdf"),u=e("pLZG"),f=e("xbPD"),l=e("SxV6"),p=e("eIep"),g=e("vkgz"),m=e("PYvG"),h=e("t0ae"),d=e("AcjI");let S=(()=>{class t{constructor(t){this.settingsService=t,this.refetchSubject=new c.a(null),this.settingsService.getUserSettingsCst().subscribe(t=>sessionStorage.setItem("userSettings",JSON.stringify(r.c.encode(t))))}get refetch(){return this.refetchSubject.asObservable()}getCurrentNotificationSettingsPropertyValue(){return this.settingsService.getUserSettingsCst().pipe(Object(a.a)(t=>t.Settings),Object(b.a)(),Object(u.a)(t=>"notification"===t.Key),Object(f.a)({Value:"{}"}),Object(l.a)(),Object(a.a)(t=>JSON.parse(t.Value)),Object(p.a)(Object(h.a)(r.b)))}updateCurrentNotificationSettingsPropertyValue(t,i,e){const n={Key:"notification",Value:JSON.stringify({gui:t,mail:i,phoneMobile:e})},s=Object.assign({},Object(d.a)());return s.Settings.push(n),this.settingsService.updateUserSettingsCst(s).pipe(Object(g.a)(()=>this.refetchSubject.next(null)))}}return t.\u0275fac=function(i){return new(i||t)(o.Zb(m.a))},t.\u0275prov=o.Ib({token:t,factory:t.\u0275fac}),t})();var y=e("UXun"),v=e("nYR2"),j=e("IzEk"),O=e("3Pt+"),z=e("5eHb"),M=e("sYmb"),G=e("EOpz"),N=e("ofXK");function k(t,i){1&t&&(o.Sb(0,"div",15),o.Sb(1,"span",16),o.Dc(2,"Loading..."),o.Rb(),o.Rb())}function w(t,i){if(1&t){const t=o.Tb();o.Sb(0,"form",4),o.dc("ngSubmit",function(){return o.vc(t),o.fc(2).onSubmit()}),o.Sb(1,"div",5),o.Nb(2,"input",6),o.Sb(3,"label",7),o.Dc(4),o.gc(5,"translate"),o.Rb(),o.Rb(),o.Sb(6,"div",5),o.Nb(7,"input",8),o.Sb(8,"label",9),o.Dc(9),o.gc(10,"translate"),o.Rb(),o.Rb(),o.Sb(11,"div",5),o.Nb(12,"input",10),o.Sb(13,"label",11),o.Dc(14),o.gc(15,"translate"),o.Rb(),o.Rb(),o.Sb(16,"div",12),o.Sb(17,"button",13),o.gc(18,"async"),o.Dc(19),o.gc(20,"translate"),o.Bc(21,k,3,0,"div",14),o.gc(22,"async"),o.Rb(),o.Rb(),o.Rb()}if(2&t){const t=o.fc().erzLet,i=o.fc();o.lc("formGroup",t.notificationFormGroup),o.zb(4),o.Fc(" ",o.hc(5,7,"my-settings.notifications.gui")," "),o.zb(5),o.Fc(" ",o.hc(10,9,"my-settings.notifications.mail")," "),o.zb(5),o.Fc(" ",o.hc(15,11,"my-settings.notifications.phoneMobile")," "),o.zb(3),o.lc("disabled",o.hc(18,13,i.saving$)),o.zb(2),o.Fc(" ",o.hc(20,15,"my-settings.notifications.save")," "),o.zb(2),o.lc("ngIf",o.hc(22,17,i.saving$))}}function R(t,i){if(1&t&&(o.Sb(0,"div",1),o.Sb(1,"h5",2),o.Dc(2),o.gc(3,"translate"),o.Rb(),o.Bc(4,w,23,19,"form",3),o.Rb()),2&t){const t=i.erzLet;o.zb(2),o.Fc(" ",o.hc(3,2,"my-settings.notifications.title")," "),o.zb(2),o.lc("ngIf",t.notificationFormGroup)}}const C=function(t){return{notificationFormGroup:t}};let P=(()=>{class t{constructor(t,i,e,n){this.settingsService=t,this.formBuilder=i,this.toastr=e,this.translate=n,this.notificationSettings$=this.settingsService.refetch.pipe(Object(p.a)(()=>this.settingsService.getCurrentNotificationSettingsPropertyValue())),this.notificationFormGroup$=this.notificationSettings$.pipe(Object(a.a)(this.createNotificationFormGroup.bind(this)),Object(y.a)(1)),this.saving$=new c.a(!1),this.submitted$=new c.a(!1)}createNotificationFormGroup(t){return this.formBuilder.group({notificationsGui:[t.gui],notificationsMail:[t.mail],notificationsPhoneMobile:[t.phoneMobile]})}save(t,i,e){this.saving$.next(!0),this.settingsService.updateCurrentNotificationSettingsPropertyValue(t,i,e).pipe(Object(v.a)(()=>this.saving$.next(!1))).subscribe(this.onSaveSuccess.bind(this))}onSaveSuccess(){this.toastr.success(this.translate.instant("my-settings.notifications.save-success"))}onSubmit(){this.submitted$.next(!0),this.notificationFormGroup$.pipe(Object(j.a)(1)).subscribe(t=>{if(t.valid){const{notificationsGui:i,notificationsMail:e,notificationsPhoneMobile:n}=t.value;this.save(i,e,n)}})}}return t.\u0275fac=function(i){return new(i||t)(o.Mb(S),o.Mb(O.c),o.Mb(z.b),o.Mb(M.d))},t.\u0275cmp=o.Gb({type:t,selectors:[["erz-my-settings-notifications"]],decls:2,vars:5,consts:[["class","border-bottom mb-3 pb-3",4,"erzLet"],[1,"border-bottom","mb-3","pb-3"],[1,"m-0","pb-3"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"checkbox"],["id","my-settings-notifications-gui","type","checkbox","formControlName","notificationsGui",1,"form-check-input"],["for","my-settings-notifications-gui",1,"pl-2"],["id","my-settings-notifications-mail","type","checkbox","formControlName","notificationsMail",1,"form-check-input"],["for","my-settings-notifications-mail",1,"pl-2"],["id","my-settings-notifications-phoneMobile","type","checkbox","formControlName","notificationsPhoneMobile",1,"form-check-input"],["for","my-settings-notifications-phoneMobile",1,"pl-2"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary","ml-2",3,"disabled"],["class","spinner-border spinner-border-sm align-middle","role","status",4,"ngIf"],["role","status",1,"spinner-border","spinner-border-sm","align-middle"],[1,"sr-only"]],template:function(t,i){1&t&&(o.Bc(0,R,5,4,"div",0),o.gc(1,"async")),2&t&&o.lc("erzLet",o.pc(3,C,o.hc(1,1,i.notificationFormGroup$)))},directives:[G.a,N.m,O.r,O.j,O.e,O.a,O.i,O.d],pipes:[N.b,M.c],styles:[".checkbox[_ngcontent-%COMP%]   input.form-check-input[_ngcontent-%COMP%]{position:static!important;margin:0!important}"],changeDetection:0}),t})(),x=(()=>{class t{ngOnInit(){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=o.Gb({type:t,selectors:[["erz-my-settings-show"]],decls:2,vars:0,consts:[[1,"erz-container","erz-container-limited","erz-container-padding-y"]],template:function(t,i){1&t&&(o.Sb(0,"div",0),o.Nb(1,"erz-my-settings-notifications"),o.Rb())},directives:[P],styles:[""]}),t})();const F=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=o.Gb({type:t,selectors:[["erz-my-settings"]],features:[o.yb([S])],decls:1,vars:0,template:function(t,i){1&t&&o.Nb(0,"router-outlet")},directives:[s.k],styles:[""],changeDetection:0}),t})(),children:[{path:"",component:x}]}];let $=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({imports:[[s.j.forChild(F)],s.j]}),t})(),I=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({providers:[],imports:[[n.a,$]]}),t})()}}]);