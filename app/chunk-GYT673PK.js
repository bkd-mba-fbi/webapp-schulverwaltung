import{b as v,c as u}from"./chunk-AQYFD262.js";import{a as y}from"./chunk-YNODG5RP.js";import{b as p}from"./chunk-EFJ6WEH7.js";import{s as b}from"./chunk-HVLHLZKP.js";import{h as g,z as I}from"./chunk-ZXUJZ6KS.js";import{Dd as m,Id as w,Td as h,a as c,b as f,ba as s,ja as a,oa as l,v as d}from"./chunk-GP622B77.js";var P=(()=>{let o=class o extends y{constructor(){let t=l(g),e=l(I);super(t,e,u,"Subscriptions")}getSubscriptionIdsByStudentAndCourse(t,e){return this.http.get(`${this.baseUrl}/`,{params:{"filter.PersonId":`=${t}`,"filter.EventId":`;${e}`}}).pipe(s(p(h)),d(i=>i.map(n=>n.Id)))}getSubscriptionIdsByEventAndStudents(t,e){return this.http.get(`${this.baseUrl}/`,{params:{"filter.EventId":`=${t}`,"filter.PersonId":`;${e}`}}).pipe(s(p(h)),d(i=>i.map(n=>n.Id)))}getSubscriptionCountsByEvents(t){return this.http.get(`${this.baseUrl}/`,{params:{"filter.EventId":`;${t.join(";")}`,fields:["Id","EventId"].join(",")}}).pipe(s(p(w({Id:m,EventId:m}))),d(e=>e.reduce((i,n)=>(i[n.EventId]=i[n.EventId]?i[n.EventId]+1:1,i),{})))}getSubscriptionsByCourse(t,e){return this.http.get(`${this.baseUrl}/`,{params:f(c({"filter.EventId":`=${t}`},e),{fields:["Id","EventId","EventDesignation","PersonId","Status","RegistrationDate"].join(",")})}).pipe(s(p(u)))}getSubscriptionDetailsById(t){return this.http.get(`${this.baseUrl}/${t}/SubscriptionDetails`).pipe(s(p(v)))}};o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=a({token:o,factory:o.\u0275fac,providedIn:"root"});let r=o;return r})();var S=(()=>{let o=class o{constructor(){}get inIframe(){return window.parent!==window}get window(){return this.inIframe?window.parent:null}get document(){return this.window?.document.documentElement??null}querySelector(t){return this.window?.document?.querySelector("bkd-portal")?.shadowRoot?.querySelector(t)??null}getIframeElement(){return this.querySelector("bkd-content")?.shadowRoot?.querySelector("iframe")??null}getIframeTop(){return this.getIframeElement()?.offsetTop??0}getIFrameBottom(){let t=this.getIframeElement();return t?t.offsetTop+t.offsetHeight:0}};o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=a({token:o,factory:o.\u0275fac,providedIn:"root"});let r=o;return r})();var k=(()=>{let o=class o{constructor(){this.modal=l(b),this.portal=l(S)}open(...t){let e=this.modal.open(...t);return this.applyPortalOffsetAndMaxHeight(e),this.disablePortalScrolling(e),e}get activeInstances(){return this.modal.activeInstances}dismissAll(...t){return this.modal.dismissAll(...t)}hasOpenModals(...t){return this.modal.hasOpenModals(...t)}applyPortalOffsetAndMaxHeight(t){let e=this.getModalWindowElement(t);if(!e){console.warn("Trying to apply portal offset to <ngb-modal-window>, but element is not present!");return}this.portal.window&&(e.style.top=`${this.getModalIframeOffset()}px`,e.style.maxHeight=`${this.getModalHeight()}px`)}disablePortalScrolling(t){if(this.portal.window&&this.portal.document){let e=this.portal.window.innerWidth-this.portal.document.clientWidth;this.portal.document.style.paddingRight=`${e}px`,this.portal.document.style.overflow="hidden"}t.hidden.subscribe(()=>{this.portal.document&&(this.portal.document.style.paddingRight="0px",this.portal.document.style.overflow="auto")})}getModalWindowElement(t){return t._windowCmptRef?.instance?._elRef?.nativeElement??null}getModalIframeOffset(){return Math.max(this.getViewportTop()-this.portal.getIframeTop(),0)}getModalTop(){return Math.min(this.getViewportTop(),this.portal.getIframeTop())}getModalBottom(){return Math.min(this.getViewportBottom(),this.portal.getIFrameBottom())}getModalHeight(){return this.getModalBottom()-this.getModalTop()}getViewportTop(){return this.portal.window?.scrollY??0}getViewportBottom(){return this.getViewportTop()+this.getViewportHeight()}getViewportHeight(){return this.portal.window?.innerHeight??0}};o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=a({token:o,factory:o.\u0275fac,providedIn:"root"});let r=o;return r})();export{P as a,S as b,k as c};
