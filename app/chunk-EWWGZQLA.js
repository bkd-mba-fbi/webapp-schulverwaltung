import{b as ne}from"./chunk-MGLEQUF6.js";import"./chunk-DQAQYQ7K.js";import"./chunk-LYDHS67M.js";import{c as B,d as M,f as U,h as K,z as J}from"./chunk-ZXUJZ6KS.js";import{$d as L,Ae as oe,Cc as D,Dc as q,Ea as F,Eb as b,Gb as w,Ib as I,Kb as E,Kc as R,Lb as C,Mb as g,Nb as d,Ob as i,Pb as o,Qb as c,Ub as x,Wb as u,Xb as A,be as v,ce as j,db as n,de as Q,he as Y,ic as l,jc as N,le as z,me as W,ne as X,oa as S,ob as $,oe as Z,pe as ee,qe as te,ua as T,ue as re,va as G,xc as O,xe as ie}from"./chunk-GP622B77.js";var pe=()=>["GET","POST","PUT","PATCH","DELETE"];function de(m,a){if(m&1&&(i(0,"option",4),l(1),o()),m&2){let s=a.$implicit;d("value",s),n(),N(s)}}function ce(m,a){if(m&1){let s=x();i(0,"div",8)(1,"div",12)(2,"label",13),l(3,"Param:"),o()(),i(4,"div",12),c(5,"input",14),o(),i(6,"div",12)(7,"label",13),l(8,"Value:"),o()(),i(9,"div",12),c(10,"input",15),o(),i(11,"div",12)(12,"button",16),u("click",function(){let t=T(s).$index,r=A();return G(r.removeParam(t))}),l(13," Remove "),o()()()}if(m&2){let s=a.$implicit,e=a.$index;d("formGroup",s),n(2),b("for","param-key-"+e),n(3),d("id","param-key-"+e),n(2),b("for","param-value-"+e),n(3),d("id","param-value-"+e)}}function ue(m,a){if(m&1){let s=x();i(0,"div",8)(1,"div",12)(2,"label",13),l(3,"Header:"),o()(),i(4,"div",12),c(5,"input",14),o(),i(6,"div",12)(7,"label",13),l(8,"Value:"),o()(),i(9,"div",12),c(10,"input",15),o(),i(11,"div",12)(12,"button",16),u("click",function(){let t=T(s).$index,r=A();return G(r.removeHeader(t))}),l(13," Remove "),o()()()}if(m&2){let s=a.$implicit,e=a.$index;d("formGroup",s),n(2),b("for","header-key-"+e),n(3),d("id","header-key-"+e),n(2),b("for","header-value-"+e),n(3),d("id","header-value-"+e)}}function fe(m,a){m&1&&(i(0,"div",1)(1,"label",17),l(2,"JSON Body:"),o(),c(3,"textarea",18),o())}var ae="bkdApiRequest",le=(()=>{let a=class a{constructor(){this.fb=S(re),this.http=S(K),this.settings=S(J),this.formGroup=F(this.createFormGroup()),this.params=R(()=>this.formGroup().controls.params)}ngOnInit(){let e=this.restoreValue();if(e){let t=this.formGroup();t.reset(e),t.controls.params.clear(),e.params.forEach(r=>this.addParam(r)),t.controls.headers.clear(),e.headers.forEach(r=>this.addHeader(r))}}addParam({key:e="",value:t=""}={}){let{params:r}=this.formGroup().controls;r.push(this.createKeyValueGroup(e,t))}removeParam(e){let{params:t}=this.formGroup().controls;t.removeAt(e)}addHeader({key:e="",value:t=""}={}){let{headers:r}=this.formGroup().controls;r.push(this.createKeyValueGroup(e,t))}removeHeader(e){let{headers:t}=this.formGroup().controls;t.removeAt(e)}onSubmit(){let e=this.formGroup();if(e.valid){let{method:t,path:r,body:_,params:me,headers:se}=e.value;this.storeValue();let k=`${this.settings.apiUrl}${r}`,P=me?.reduce((p,{key:f,value:h})=>f?.trim()&&h?.trim()?p.set(f.trim(),h.trim()):p,new M),V=se?.reduce((p,{key:f,value:h})=>f?.trim()&&h?.trim()?p.set(f.trim(),h.trim()):p,new B),H=new U().set(ne,{disableErrorHandling:!0}),y=null;switch(t){case"GET":case"DELETE":y=this.http.request(t,k,{context:H,headers:V,params:P});break;case"POST":case"PUT":case"PATCH":y=this.http.request(t,k,{context:H,headers:V,params:P,body:_});break}y&&y.subscribe({next:p=>{console.log("Success:",p)},error:p=>{console.log("Error:",p)}})}}createFormGroup(){return this.fb.nonNullable.group({method:["GET",v.required],path:["",v.required],body:[""],params:this.fb.nonNullable.array([]),headers:this.fb.nonNullable.array([])})}createKeyValueGroup(e="",t=""){return this.fb.nonNullable.group({key:[e,v.required],value:[t,v.required]})}restoreValue(){let e=localStorage.getItem(ae);return e?JSON.parse(e):null}storeValue(){console.log(this.formGroup().value),localStorage.setItem(ae,JSON.stringify(this.formGroup().value))}};a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=$({type:a,selectors:[["bkd-api"]],decls:28,vars:6,consts:[[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","method",1,"form-label"],["id","method","formControlName","method",1,"form-select"],[3,"value"],["for","path",1,"form-label"],["type","text","id","path","formControlName","path",1,"form-control"],["formArrayName","params",1,"mb-3"],[1,"row","g-3","align-items-center","mt-1",3,"formGroup"],["type","button",1,"btn","btn-secondary","mt-2",3,"click"],["formArrayName","headers",1,"mb-3"],["type","submit",1,"btn","btn-primary"],[1,"col-auto"],[1,"form-label"],["type","text","formControlName","key",1,"form-control",3,"id"],["type","text","formControlName","value",1,"form-control",3,"id"],["type","button",1,"btn","btn-secondary",3,"click"],["for","body",1,"form-label"],["id","body","formControlName","body","rows","10",1,"form-control"]],template:function(t,r){t&1&&(i(0,"h1"),l(1),D(2,"translate"),o(),i(3,"form",0),u("ngSubmit",function(){return r.onSubmit()}),i(4,"div",1)(5,"label",2),l(6,"Method:"),o(),i(7,"select",3),C(8,de,2,2,"option",4,E),o()(),i(10,"div",1)(11,"label",5),l(12,"Path:"),o(),c(13,"input",6),o(),i(14,"div",7),C(15,ce,14,5,"div",8,E),i(17,"button",9),u("click",function(){return r.addParam()}),l(18," Add param "),o()(),i(19,"div",10),C(20,ue,14,5,"div",8,E),i(22,"button",9),u("click",function(){return r.addHeader()}),l(23," Add header "),o()(),w(24,fe,4,0,"div",1),i(25,"button",11),l(26,"Send"),o()(),c(27,"output")),t&2&&(n(),N(q(2,3,"api.title")),n(2),d("formGroup",r.formGroup()),n(5),g(O(5,pe)),n(7),g(r.params().controls),n(5),g(r.formGroup().controls.headers.controls),n(4),I(r.formGroup().controls.method.value==="POST"||r.formGroup().controls.method.value==="PUT"||r.formGroup().controls.method.value==="PATCH"?24:-1))},dependencies:[ie,Y,ee,te,L,Z,j,Q,z,X,W,oe],styles:["[_nghost-%COMP%]{display:block;margin:1rem}"],changeDetection:0});let m=a;return m})();var Ae=[{path:"",component:le}];export{Ae as API_ROUTES};
