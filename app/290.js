"use strict";(self.webpackChunkwebapp_schulverwaltung=self.webpackChunkwebapp_schulverwaltung||[]).push([[290],{2290:(X,m,e)=>{e.r(m),e.d(m,{MY_GRADES_ROUTES:()=>x});var h=e(177),p=e(3955),y=e(1517),$=e(7014),I=e(7887),T=e(8958),C=e(8667),s=e(4438),G=e(2771),M=e(4668),o=e(6354),v=e(4572),S=e(5558),R=e(7468),b=e(2809),c=e(9728),F=e(4599),E=e(2673),O=e(5449),V=e(1937),D=e(5507),j=e(1763);let u=(()=>{class t{constructor(n,r,d,g,B,P,z){this.storageService=n,this.loadingService=r,this.coursesRestService=d,this.subscriptionRestService=g,this.reportsService=B,this.gradingScalesRestService=P,this.settings=z,this.studentId$=new G.m(1),this.loading$=this.loadingService.loading$,this.studentCourses$=this.loadCourses().pipe((0,M.t)(1)),this.studentCoursesSorted$=this.studentCourses$.pipe((0,o.T)(i=>i.slice().sort((a,H)=>a.Designation.localeCompare(H.Designation)))),this.studentCourseIds$=this.studentCourses$.pipe((0,o.T)(i=>i.flatMap(a=>a.Id))),this.idSubscriptions$=(0,v.z)([this.studentId$,this.studentCourseIds$]).pipe((0,S.n)(([i,a])=>this.subscriptionRestService.getIdSubscriptionsByStudentAndCourse(i,a))),this.ids$=this.idSubscriptions$.pipe((0,o.T)(i=>i.map(a=>a.Id))),this.testReports$=this.ids$.pipe((0,o.T)(i=>this.reportsService.getStudentSubscriptionReports(i))),this.tests$=this.studentCourses$.pipe((0,o.T)(i=>i.flatMap(a=>a.Tests).filter(c.TM))),this.gradingScaleIdsFromTests$=this.tests$.pipe((0,o.T)(i=>[...i.map(a=>a.GradingScaleId)].filter(c.TM).filter(c.Am))),this.gradingScaleIdsFromCourses$=this.studentCourses$.pipe((0,o.T)(i=>i.flatMap(a=>a.GradingScaleId).filter(c.TM).filter(c.Am))),this.gradingScaleIds$=(0,v.z)([this.gradingScaleIdsFromCourses$,this.gradingScaleIdsFromTests$]).pipe((0,o.T)(([i,a])=>i.concat(a).filter(c.Am))),this.gradingScales$=this.gradingScaleIds$.pipe((0,S.n)(i=>(0,R.p)(i.map(a=>this.gradingScalesRestService.getGradingScale(a)))));const f=this.storageService.getPayload()?.id_person;f&&this.studentId$.next(Number(f))}loadCourses(){return this.loadingService.load(this.coursesRestService.getExpandedCoursesForStudent())}static#s=this.\u0275fac=function(r){return new(r||t)(s.KVO(F.n),s.KVO(E.U),s.KVO(O.I),s.KVO(V.u),s.KVO(D.P),s.KVO(j.T),s.KVO(b.yy))};static#t=this.\u0275prov=s.jDH({token:t,factory:t.\u0275fac})}return t})();const J=()=>[];let U=(()=>{class t{constructor(n){this.myGradesService=n}static#s=this.\u0275fac=function(r){return new(r||t)(s.rXU(u))};static#t=this.\u0275cmp=s.VBU({type:t,selectors:[["bkd-my-grades-header"]],standalone:!0,features:[s.aNF],decls:7,vars:7,consts:[[1,"d-flex","justify-content-between","header"],[3,"reports"]],template:function(r,d){if(1&r&&(s.j41(0,"div",0)(1,"div"),s.EFF(2),s.nI1(3,"translate"),s.k0s(),s.j41(4,"div"),s.nrm(5,"bkd-reports-link",1),s.nI1(6,"async"),s.k0s()()),2&r){let g;s.R7$(2),s.JRh(s.bMT(3,2,"my-grades.header")),s.R7$(3),s.Y8G("reports",null!==(g=s.bMT(6,4,d.myGradesService.testReports$))&&void 0!==g?g:s.lJ4(6,J))}},dependencies:[C.Z,h.Jj,p.h,p.D9],styles:[".header[_ngcontent-%COMP%]{padding-bottom:1rem}.report[_ngcontent-%COMP%]{margin-left:1rem}"]})}return t})();const K=(t,l,n,r)=>({loading:t,studentId:l,courses:n,gradingScales:r});function N(t,l){if(1&t&&s.nrm(0,"bkd-dossier-grades-view",4),2&t){const n=s.XpG().bkdLet;s.Y8G("courses",n.courses)("studentId",n.studentId)("gradingScales",n.gradingScales)("isEditable",!1)}}function Y(t,l){1&t&&(s.qex(0),s.nrm(1,"bkd-spinner"),s.bVm())}function A(t,l){if(1&t&&(s.j41(0,"div",1)(1,"h1"),s.EFF(2),s.nI1(3,"translate"),s.k0s(),s.nrm(4,"bkd-my-grades-header"),s.DNE(5,N,1,4,"bkd-dossier-grades-view",2)(6,Y,2,0,"ng-container",3),s.k0s()),2&t){const n=l.bkdLet;s.R7$(2),s.JRh(s.bMT(3,3,"my-grades.title")),s.R7$(3),s.Y8G("ngIf",!n.loading),s.R7$(),s.Y8G("ngIf",n.loading)}}let k=(()=>{class t{constructor(n){this.myGradesService=n}static#s=this.\u0275fac=function(r){return new(r||t)(s.rXU(u))};static#t=this.\u0275cmp=s.VBU({type:t,selectors:[["bkd-my-grades-show"]],standalone:!0,features:[s.Jv_([T.p]),s.aNF],decls:5,vars:14,consts:[["class","bkd-container bkd-container-limited",4,"bkdLet"],[1,"bkd-container","bkd-container-limited"],[3,"courses","studentId","gradingScales","isEditable",4,"ngIf"],[4,"ngIf"],[3,"courses","studentId","gradingScales","isEditable"]],template:function(r,d){1&r&&(s.DNE(0,A,7,5,"div",0),s.nI1(1,"async"),s.nI1(2,"async"),s.nI1(3,"async"),s.nI1(4,"async")),2&r&&s.Y8G("bkdLet",s.ziG(9,K,s.bMT(1,1,d.myGradesService.loading$),s.bMT(2,3,d.myGradesService.studentId$),s.bMT(3,5,d.myGradesService.studentCoursesSorted$),s.bMT(4,7,d.myGradesService.gradingScales$)))},dependencies:[I.N,U,h.bT,$.Q,y.t,h.Jj,p.h,p.D9]})}return t})();var L=e(5539);const x=[{path:"",component:(()=>{class t{constructor(){}static#s=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=s.VBU({type:t,selectors:[["bkd-my-grades"]],standalone:!0,features:[s.Jv_([u]),s.aNF],decls:1,vars:0,template:function(r,d){1&r&&s.nrm(0,"router-outlet")},dependencies:[L.n3]})}return t})(),children:[{path:"",component:k}]}]}}]);