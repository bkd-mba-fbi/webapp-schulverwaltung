"use strict";(self.webpackChunkwebapp_schulverwaltung=self.webpackChunkwebapp_schulverwaltung||[]).push([[592],{4067:(_,f,t)=>{t.d(f,{S9:()=>u,sm:()=>g,ok:()=>D});var i=t(3166),l=t(581),m=t(2816);function r(n,e){(0,m.Z)(2,arguments);var a=(0,l.Z)(n),E=(0,l.Z)(e);return a.getTime()<E.getTime()}function d(n,e){(0,m.Z)(2,arguments);var a=(0,l.Z)(n).getTime(),E=(0,l.Z)(e.start).getTime(),I=(0,l.Z)(e.end).getTime();if(!(E<=I))throw new RangeError("Invalid interval");return a>=E&&a<=I}var s=t(6747);class h{constructor(e,a,E){this.TeacherInformation=e,this.LessonDateTimeFrom=a,this.LessonDateTimeTo=E,this.lessons=[]}addLesson(e){this.lessons.some(a=>(0,s.In)(a,e))||(this.lessons.push(e),this.updateId(),this.updateStudyClassNumbers(),this.updateEventDesignations())}getIds(){return[...new Set(this.lessons.map(e=>e.LessonRef.Id))]}getEventIds(){return[...new Set(this.lessons.map(e=>e.EventRef.Id))]}updateId(){this.id=[...new Set(this.lessons.map(e=>e.LessonRef.Id).sort())].join("-")}updateStudyClassNumbers(){this.studyClassNumbers=[...new Set(this.lessons.map(e=>e.StudyClassNumber).sort((e,a)=>e.localeCompare(a)))].join(", ")}updateEventDesignations(){this.eventDesignations=[...new Set(this.lessons.map(e=>e.EventDesignation).sort())].join(", ")}}function g(n){return D(n).reduce((e,a)=>{const E=e.find(p=>function o(n,e){return null===n&&null===e||null!==n&&null!==e&&n.TeacherInformation===e.TeacherInformation&&n.LessonDateTimeFrom.getTime()===e.LessonDateTimeFrom.getTime()&&n.LessonDateTimeTo.getTime()===e.LessonDateTimeTo.getTime()}(p,a));if(E)return E.addLesson(a),e;const I=function c(n){const e=new h(n.TeacherInformation,n.LessonDateTimeFrom,n.LessonDateTimeTo);return e.addLesson(n),e}(a);return[...e,I]},[]).sort(s.kM)}function u(n){if(0===n.length)return null;const e=new Date;if(n=[...n].sort(s.kM),(0,i.Z)(e,n[0].LessonDateTimeFrom)){for(const a of n)if(r(e,a.LessonDateTimeFrom)||d(e,{start:a.LessonDateTimeFrom,end:a.LessonDateTimeTo}))return a;return n[n.length-1]}return n[0]}function D(n){return n.reduce((e,a)=>e.some(E=>(0,s.In)(E,a))?e:[...e,a],[])}},9592:(_,f,t)=>{t.d(f,{H:()=>s});var i=t(917),l=t(3388),m=t(8705),r=t(4562);const s={path:"student/:id",children:[{path:"",component:t(5582).H,children:[{path:"addresses",component:m.S},{path:"absences",component:l.t},{path:"grades",component:r.M}]},{path:"absences/confirm",component:i.A}]}},9245:(_,f,t)=>{t.d(f,{$:()=>a});var i=t(754),l=t(6232),m=t(2096),r=t(4664),d=t(7398),s=t(4141);const o=i.dt({Id:i.pk,Designation:i.Z_,Number:i.Z_});var c=t(275),h=t(7470),g=t(8366),u=t(5879),D=t(9862),n=t(9515),e=t(6869);let a=(()=>{class E extends g.v{constructor(p,v,T,L){super(p,v,o,"EducationalEvents"),this.translate=T,this.toastService=L,this.typeaheadCodec=i.dt((0,h.e)(this.codec.props,["Id","Designation","Number"]))}getTypeaheadItems(p){return this.http.get(`${this.baseUrl}/CurrentSemester`,{params:{fields:["Id","Designation","Number"].join(","),"filter.Designation":`~*${p}*`}}).pipe((0,r.w)((0,c.Y0)(this.typeaheadCodec)),(0,d.U)(v=>v.map(T=>({Key:T.Id,Value:`${T.Designation} (${T.Number})`}))))}getTypeaheadItemByKey(p){return this.http.get(`${this.baseUrl}/CurrentSemester`,{params:{fields:["Id","Designation","Number"].join(","),"filter.Id":`=${p}`}}).pipe((0,r.w)((0,c.Y0)(this.typeaheadCodec)),(0,r.w)(v=>0===v.length?(this.toastService.error(this.translate.instant("global.rest-errors.notfound-message"),this.translate.instant("global.rest-errors.notfound-title")),l.E):(0,m.of)({Key:v[0].Id,Value:`${v[0].Designation} (${v[0].Number})`})))}static#t=this.\u0275fac=function(v){return new(v||E)(u.LFG(D.eN),u.LFG(s.L6),u.LFG(n.sK),u.LFG(e.k))};static#e=this.\u0275prov=u.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})()},654:(_,f,t)=>{t.d(f,{O:()=>c});var i=t(4664),l=t(4141),m=t(6514),r=t(275),d=t(8366),s=t(5879),o=t(9862);let c=(()=>{class h extends d.v{constructor(u,D){super(u,D,m.t,"Events")}getSubscriptionDetailsDefinitions(u){return this.http.get(`${this.baseUrl}/${u}/SubscriptionDetails`).pipe((0,i.w)((0,r.Y0)(this.codec)))}getDesignation(u){const D=u.Classes?u.Classes.map(n=>n.Number).join(", "):null;return D?u.Designation+", "+D:u.Designation}static#t=this.\u0275fac=function(D){return new(D||h)(s.LFG(o.eN),s.LFG(l.L6))};static#e=this.\u0275prov=s.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})()},9018:(_,f,t)=>{t.d(f,{R:()=>c});var i=t(4664),l=t(4141),m=t(2738),r=t(275),d=t(7346),s=t(5879),o=t(9862);let c=(()=>{class h extends d.r{constructor(u,D){super(u,D,m.y,"StudyClasses","Number")}getActive(){return this.http.get(`${this.baseUrl}/?filter.IsActive==true`,{headers:{"X-Role-Restriction":"ClassTeacherRole"}}).pipe((0,i.w)((0,r.Y0)(m.y)))}getActiveFormativeAssessments(){return this.http.get(`${this.baseUrl}/FormativeAssessments?filter.IsActive==true`,{headers:{"X-Role-Restriction":"ClassTeacherRole"}}).pipe((0,i.w)((0,r.Y0)(m.y)))}static#t=this.\u0275fac=function(D){return new(D||h)(s.LFG(o.eN),s.LFG(l.L6))};static#e=this.\u0275prov=s.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})()},2388:(_,f,t)=>{t.d(f,{i:()=>l});var i=t(5301);function l(r){return Object.keys(r).reduce((d,s)=>{const o=function m(r){return r?r instanceof Date?(0,i.Z)(r,"yyyy-MM-dd"):String(r):null}(r[s]);return o?{...d,[s]:o}:d},{})}},6191:(_,f,t)=>{t.d(f,{C:()=>m,v:()=>l});var i=t(3449);function l(r,d,s){return r.map(o=>{let h,c=null;return o.TypeRef.Id&&(c=d.find(g=>g.Id===o.TypeRef.Id)||null),o.ConfirmationStateId&&(h=s.find(g=>g.Key===o.ConfirmationStateId)),new i.Oz(o,c,null,h)})}function m(r,d,s){return r?d.filter(o=>s.find(c=>c===o.lessonPresence.StudentRef.Id)):d}},2547:(_,f,t)=>{t.d(f,{P:()=>l});var i=t(1437);function l(s,o){return o?s.filter(function m(s){const o=d(s);return c=>r(c.studentFullName,o)||r(c.studyClassNumber,o)||r(c.Designation,o)||r(c.evaluationText,o)}(o)):s}function r(s,o){return!!s&&d(s).includes(o)}function d(s){return(0,i.Z)(s.toLowerCase())}}}]);