"use strict";(self.webpackChunkwebapp_schulverwaltung=self.webpackChunkwebapp_schulverwaltung||[]).push([[592],{4067:(y,f,t)=>{t.d(f,{S9:()=>g,sm:()=>I,ok:()=>l});var s=t(6747);class a{constructor(n,u,m){this.TeacherInformation=n,this.LessonDateTimeFrom=u,this.LessonDateTimeTo=m,this.lessons=[]}addLesson(n){this.lessons.some(u=>(0,s.In)(u,n))||(this.lessons.push(n),this.updateId(),this.updateStudyClassNumbers(),this.updateEventDesignations())}getIds(){return[...new Set(this.lessons.map(n=>n.LessonRef.Id))]}getEventIds(){return[...new Set(this.lessons.map(n=>n.EventRef.Id))]}updateId(){this.id=[...new Set(this.lessons.map(n=>n.LessonRef.Id).sort())].join("-")}updateStudyClassNumbers(){this.studyClassNumbers=[...new Set(this.lessons.map(n=>n.StudyClassNumber).sort((n,u)=>n.localeCompare(u)))].join(", ")}updateEventDesignations(){this.eventDesignations=[...new Set(this.lessons.map(n=>n.EventDesignation).sort())].join(", ")}}var d=t(3166),r=t(581),e=t(2816);function c(o,n){(0,e.Z)(2,arguments);var u=(0,r.Z)(o),m=(0,r.Z)(n);return u.getTime()<m.getTime()}function i(o,n){(0,e.Z)(2,arguments);var u=(0,r.Z)(o).getTime(),m=(0,r.Z)(n.start).getTime(),C=(0,r.Z)(n.end).getTime();if(!(m<=C))throw new RangeError("Invalid interval");return u>=m&&u<=C}function I(o){return l(o).reduce((n,u)=>{const m=n.find(T=>function h(o,n){return null===o&&null===n||null!==o&&null!==n&&o.TeacherInformation===n.TeacherInformation&&o.LessonDateTimeFrom.getTime()===n.LessonDateTimeFrom.getTime()&&o.LessonDateTimeTo.getTime()===n.LessonDateTimeTo.getTime()}(T,u));if(m)return m.addLesson(u),n;const C=function p(o){const n=new a(o.TeacherInformation,o.LessonDateTimeFrom,o.LessonDateTimeTo);return n.addLesson(o),n}(u);return[...n,C]},[]).sort(s.kM)}function g(o){if(0===o.length)return null;const n=new Date;if(o=[...o].sort(s.kM),(0,d.Z)(n,o[0].LessonDateTimeFrom)){for(const u of o)if(c(n,u.LessonDateTimeFrom)||i(n,{start:u.LessonDateTimeFrom,end:u.LessonDateTimeTo}))return u;return o[o.length-1]}return o[0]}function l(o){return o.reduce((n,u)=>n.some(m=>(0,s.In)(m,u))?n:[...n,u],[])}},7163:(y,f,t)=>{t.d(f,{w:()=>a});var s=t(5879),h=t(6814);function p(d,r){if(1&d){const e=s.EpF();s.TgZ(0,"button",5),s.NdJ("click",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.valueChange.emit(""))}),s.TgZ(1,"i",2),s._uU(2,"clear"),s.qZA()()}}let a=(()=>{class d{constructor(){this.value="",this.disabled=!1,this.valueChange=new s.vpe}static#t=this.\u0275fac=function(c){return new(c||d)};static#e=this.\u0275cmp=s.Xpm({type:d,selectors:[["erz-resettable-input"]],inputs:{value:"value",disabled:"disabled",placeholder:"placeholder",label:"label"},outputs:{valueChange:"valueChange"},decls:6,vars:5,consts:[[1,"input-group"],["id","resettable-input",1,"input-group-text"],[1,"material-icons"],["type","text","aria-describedby","resettable-input",1,"form-control",3,"value","disabled","keyup"],["class","btn btn-link text-decoration-none","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-link","text-decoration-none",3,"click"]],template:function(c,i){1&c&&(s.TgZ(0,"div",0)(1,"span",1)(2,"i",2),s._uU(3,"search"),s.qZA()(),s.TgZ(4,"input",3),s.NdJ("keyup",function(g){return i.valueChange.emit(g.target.value)}),s.qZA(),s.YNc(5,p,3,0,"button",4),s.qZA()),2&c&&(s.xp6(4),s.Q6J("value",i.value)("disabled",i.disabled),s.uIk("placeholder",i.placeholder)("aria-label",i.label),s.xp6(1),s.Q6J("ngIf",i.value))},dependencies:[h.O5],styles:["input[_ngcontent-%COMP%]{padding-right:2.5em}button[_ngcontent-%COMP%]{position:absolute;right:0;z-index:3}"]})}return d})()},1162:(y,f,t)=>{t.d(f,{H:()=>D});var s=t(917),h=t(5582),p=t(3388),a=t(8705),d=t(8645),r=t(9773),e=t(5879),c=t(4409),i=t(8405),I=t(6814),g=t(6567),l=t(59),o=t(5841);function n(v,O){if(1&v&&e._UZ(0,"erz-dossier-grades-view",3),2&v){const E=e.oxw().erzLet;e.Q6J("courses",E.courses)("studentId",E.studentId)("gradingScales",E.gradingScales)}}function u(v,O){1&v&&(e.ynx(0),e._UZ(1,"erz-spinner"),e.BQk())}function m(v,O){if(1&v&&(e.ynx(0),e.YNc(1,n,1,3,"erz-dossier-grades-view",1),e.YNc(2,u,2,0,"ng-container",2),e.BQk()),2&v){const E=O.erzLet;e.xp6(1),e.Q6J("ngIf",!E.loading),e.xp6(1),e.Q6J("ngIf",E.loading)}}const C=function(v,O,E,L){return{studentId:v,loading:O,courses:E,gradingScales:L}},D={path:"student/:id",children:[{path:"",component:h.H,children:[{path:"addresses",component:a.S},{path:"absences",component:p.t},{path:"grades",component:(()=>{class v{constructor(E,L){this.state=E,this.dossierGradesService=L,this.destroy$=new d.x}ngOnInit(){this.state.currentDossier$.next("grades"),this.state.studentId$.pipe((0,r.R)(this.destroy$)).subscribe(E=>this.dossierGradesService.setStudentId(E))}ngOnDestroy(){this.destroy$.next()}static#t=this.\u0275fac=function(L){return new(L||v)(e.Y36(c.j),e.Y36(i.S))};static#e=this.\u0275cmp=e.Xpm({type:v,selectors:[["erz-dossier-grades"]],decls:5,vars:14,consts:[[4,"erzLet"],[3,"courses","studentId","gradingScales",4,"ngIf"],[4,"ngIf"],[3,"courses","studentId","gradingScales"]],template:function(L,M){1&L&&(e.YNc(0,m,3,2,"ng-container",0),e.ALo(1,"async"),e.ALo(2,"async"),e.ALo(3,"async"),e.ALo(4,"async")),2&L&&e.Q6J("erzLet",e.l5B(9,C,e.lcZ(1,1,M.state.studentId$),e.lcZ(2,3,M.dossierGradesService.loading$),e.lcZ(3,5,M.dossierGradesService.studentCourses$),e.lcZ(4,7,M.dossierGradesService.gradingScales$)))},dependencies:[I.O5,g.e,l.O,o.d,I.Ov]})}return v})()}]},{path:"absences/confirm",component:s.A}]}},9245:(y,f,t)=>{t.d(f,{$:()=>u});var s=t(4141),h=t(754);const p=h.dt({Id:h.pk,Designation:h.Z_,Number:h.Z_});var a=t(4664),d=t(7398),r=t(275),e=t(6232),c=t(2096),i=t(7470),I=t(8366),g=t(5879),l=t(9862),o=t(9515),n=t(6869);let u=(()=>{class m extends I.v{constructor(T,D,v,O){super(T,D,p,"EducationalEvents"),this.translate=v,this.toastService=O,this.typeaheadCodec=h.dt((0,i.e)(this.codec.props,["Id","Designation","Number"]))}getTypeaheadItems(T){return this.http.get(`${this.baseUrl}/CurrentSemester`,{params:{fields:["Id","Designation","Number"].join(","),"filter.Designation":`~*${T}*`}}).pipe((0,a.w)((0,r.Y0)(this.typeaheadCodec)),(0,d.U)(D=>D.map(v=>({Key:v.Id,Value:`${v.Designation} (${v.Number})`}))))}getTypeaheadItemByKey(T){return this.http.get(`${this.baseUrl}/CurrentSemester`,{params:{fields:["Id","Designation","Number"].join(","),"filter.Id":`=${T}`}}).pipe((0,a.w)((0,r.Y0)(this.typeaheadCodec)),(0,a.w)(D=>0===D.length?(this.toastService.error(this.translate.instant("global.rest-errors.notfound-message"),this.translate.instant("global.rest-errors.notfound-title")),e.E):(0,c.of)({Key:D[0].Id,Value:`${D[0].Designation} (${D[0].Number})`})))}static#t=this.\u0275fac=function(D){return new(D||m)(g.LFG(l.eN),g.LFG(s.L6),g.LFG(o.sK),g.LFG(n.k))};static#e=this.\u0275prov=g.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})()},654:(y,f,t)=>{t.d(f,{O:()=>c});var s=t(4664),h=t(4141),p=t(6514),a=t(275),d=t(8366),r=t(5879),e=t(9862);let c=(()=>{class i extends d.v{constructor(g,l){super(g,l,p.t,"Events")}getSubscriptionDetailsDefinitions(g){return this.http.get(`${this.baseUrl}/${g}/SubscriptionDetails`).pipe((0,s.w)((0,a.Y0)(this.codec)))}getDesignation(g){const l=g.Classes?g.Classes.map(o=>o.Number).join(", "):null;return l?g.Designation+", "+l:g.Designation}static#t=this.\u0275fac=function(l){return new(l||i)(r.LFG(e.eN),r.LFG(h.L6))};static#e=this.\u0275prov=r.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()},9018:(y,f,t)=>{t.d(f,{R:()=>c});var s=t(4664),h=t(4141),p=t(2738),a=t(275),d=t(7346),r=t(5879),e=t(9862);let c=(()=>{class i extends d.r{constructor(g,l){super(g,l,p.y,"StudyClasses","Number")}getActive(){return this.http.get(`${this.baseUrl}/?filter.IsActive==true`,{headers:{"X-Role-Restriction":"ClassTeacherRole"}}).pipe((0,s.w)((0,a.Y0)(p.y)))}getActiveFormativeAssessments(){return this.http.get(`${this.baseUrl}/FormativeAssessments?filter.IsActive==true`,{headers:{"X-Role-Restriction":"ClassTeacherRole"}}).pipe((0,s.w)((0,a.Y0)(p.y)))}static#t=this.\u0275fac=function(l){return new(l||i)(r.LFG(e.eN),r.LFG(h.L6))};static#e=this.\u0275prov=r.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()},2388:(y,f,t)=>{t.d(f,{i:()=>h});var s=t(5301);function h(a){return Object.keys(a).reduce((d,r)=>{const e=function p(a){return a?a instanceof Date?(0,s.Z)(a,"yyyy-MM-dd"):String(a):null}(a[r]);return e?{...d,[r]:e}:d},{})}},6191:(y,f,t)=>{t.d(f,{C:()=>p,v:()=>h});var s=t(3449);function h(a,d,r){return a.map(e=>{let i,c=null;return e.TypeRef.Id&&(c=d.find(I=>I.Id===e.TypeRef.Id)||null),e.ConfirmationStateId&&(i=r.find(I=>I.Key===e.ConfirmationStateId)),new s.Oz(e,c,null,i)})}function p(a,d,r){return a?d.filter(e=>r.find(c=>c===e.lessonPresence.StudentRef.Id)):d}},2547:(y,f,t)=>{t.d(f,{P:()=>h});var s=t(1437);function h(r,e){return e?r.filter(function p(r){const e=d(r);return c=>a(c.studentFullName,e)||a(c.studyClassNumber,e)||a(c.Designation,e)||a(c.evaluationText,e)}(e)):r}function a(r,e){return!!r&&d(r).includes(e)}function d(r){return(0,s.Z)(r.toLowerCase())}},6055:(y,f,t)=>{t.d(f,{Z:()=>g});var s=t(4331),h=t(6875),p=t(5727),a=t(9977),d=h.Z?h.Z.isConcatSpreadable:void 0;const e=function r(l){return(0,a.Z)(l)||(0,p.Z)(l)||!!(d&&l&&l[d])},i=function c(l,o,n,u,m){var C=-1,T=l.length;for(n||(n=e),m||(m=[]);++C<T;){var D=l[C];o>0&&n(D)?o>1?c(D,o-1,n,u,m):(0,s.Z)(m,D):u||(m[m.length]=D)}return m},g=function I(l){return null!=l&&l.length?i(l,1):[]}}}]);