"use strict";(self.webpackChunkwebapp_schulverwaltung=self.webpackChunkwebapp_schulverwaltung||[]).push([[592],{4067:(_,f,t)=>{t.d(f,{S9:()=>d,sm:()=>g,ok:()=>D});var u=t(6747);class r{constructor(e,a,E){this.TeacherInformation=e,this.LessonDateTimeFrom=a,this.LessonDateTimeTo=E,this.lessons=[]}addLesson(e){this.lessons.some(a=>(0,u.In)(a,e))||(this.lessons.push(e),this.updateId(),this.updateStudyClassNumbers(),this.updateEventDesignations())}getIds(){return[...new Set(this.lessons.map(e=>e.LessonRef.Id))]}getEventIds(){return[...new Set(this.lessons.map(e=>e.EventRef.Id))]}updateId(){this.id=[...new Set(this.lessons.map(e=>e.LessonRef.Id).sort())].join("-")}updateStudyClassNumbers(){this.studyClassNumbers=[...new Set(this.lessons.map(e=>e.StudyClassNumber).sort((e,a)=>e.localeCompare(a)))].join(", ")}updateEventDesignations(){this.eventDesignations=[...new Set(this.lessons.map(e=>e.EventDesignation).sort())].join(", ")}}var i=t(3166),s=t(581),o=t(2816);function h(n,e){(0,o.Z)(2,arguments);var a=(0,s.Z)(n),E=(0,s.Z)(e);return a.getTime()<E.getTime()}function m(n,e){(0,o.Z)(2,arguments);var a=(0,s.Z)(n).getTime(),E=(0,s.Z)(e.start).getTime(),I=(0,s.Z)(e.end).getTime();if(!(E<=I))throw new RangeError("Invalid interval");return a>=E&&a<=I}function g(n){return D(n).reduce((e,a)=>{const E=e.find(p=>function l(n,e){return null===n&&null===e||null!==n&&null!==e&&n.TeacherInformation===e.TeacherInformation&&n.LessonDateTimeFrom.getTime()===e.LessonDateTimeFrom.getTime()&&n.LessonDateTimeTo.getTime()===e.LessonDateTimeTo.getTime()}(p,a));if(E)return E.addLesson(a),e;const I=function c(n){const e=new r(n.TeacherInformation,n.LessonDateTimeFrom,n.LessonDateTimeTo);return e.addLesson(n),e}(a);return[...e,I]},[]).sort(u.kM)}function d(n){if(0===n.length)return null;const e=new Date;if(n=[...n].sort(u.kM),(0,i.Z)(e,n[0].LessonDateTimeFrom)){for(const a of n)if(h(e,a.LessonDateTimeFrom)||m(e,{start:a.LessonDateTimeFrom,end:a.LessonDateTimeTo}))return a;return n[n.length-1]}return n[0]}function D(n){return n.reduce((e,a)=>e.some(E=>(0,u.In)(E,a))?e:[...e,a],[])}},9592:(_,f,t)=>{t.d(f,{H:()=>s});var u=t(917),l=t(5582),c=t(3388),r=t(8705),i=t(4562);const s={path:"student/:id",children:[{path:"",component:l.H,children:[{path:"addresses",component:r.S},{path:"absences",component:c.t},{path:"grades",component:i.M}]},{path:"absences/confirm",component:u.A}]}},9245:(_,f,t)=>{t.d(f,{$:()=>a});var u=t(4141),l=t(754);const c=l.dt({Id:l.pk,Designation:l.Z_,Number:l.Z_});var r=t(4664),i=t(7398),s=t(275),o=t(6232),h=t(2096),m=t(7470),g=t(8366),d=t(5879),D=t(9862),n=t(9515),e=t(6869);let a=(()=>{class E extends g.v{constructor(p,v,T,L){super(p,v,c,"EducationalEvents"),this.translate=T,this.toastService=L,this.typeaheadCodec=l.dt((0,m.e)(this.codec.props,["Id","Designation","Number"]))}getTypeaheadItems(p){return this.http.get(`${this.baseUrl}/CurrentSemester`,{params:{fields:["Id","Designation","Number"].join(","),"filter.Designation":`~*${p}*`}}).pipe((0,r.w)((0,s.Y0)(this.typeaheadCodec)),(0,i.U)(v=>v.map(T=>({Key:T.Id,Value:`${T.Designation} (${T.Number})`}))))}getTypeaheadItemByKey(p){return this.http.get(`${this.baseUrl}/CurrentSemester`,{params:{fields:["Id","Designation","Number"].join(","),"filter.Id":`=${p}`}}).pipe((0,r.w)((0,s.Y0)(this.typeaheadCodec)),(0,r.w)(v=>0===v.length?(this.toastService.error(this.translate.instant("global.rest-errors.notfound-message"),this.translate.instant("global.rest-errors.notfound-title")),o.E):(0,h.of)({Key:v[0].Id,Value:`${v[0].Designation} (${v[0].Number})`})))}static#t=this.\u0275fac=function(v){return new(v||E)(d.LFG(D.eN),d.LFG(u.L6),d.LFG(n.sK),d.LFG(e.k))};static#e=this.\u0275prov=d.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})()},654:(_,f,t)=>{t.d(f,{O:()=>h});var u=t(4664),l=t(4141),c=t(6514),r=t(275),i=t(8366),s=t(5879),o=t(9862);let h=(()=>{class m extends i.v{constructor(d,D){super(d,D,c.t,"Events")}getSubscriptionDetailsDefinitions(d){return this.http.get(`${this.baseUrl}/${d}/SubscriptionDetails`).pipe((0,u.w)((0,r.Y0)(this.codec)))}getDesignation(d){const D=d.Classes?d.Classes.map(n=>n.Number).join(", "):null;return D?d.Designation+", "+D:d.Designation}static#t=this.\u0275fac=function(D){return new(D||m)(s.LFG(o.eN),s.LFG(l.L6))};static#e=this.\u0275prov=s.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})()},9018:(_,f,t)=>{t.d(f,{R:()=>h});var u=t(4664),l=t(4141),c=t(2738),r=t(275),i=t(7346),s=t(5879),o=t(9862);let h=(()=>{class m extends i.r{constructor(d,D){super(d,D,c.y,"StudyClasses","Number")}getActive(){return this.http.get(`${this.baseUrl}/?filter.IsActive==true`,{headers:{"X-Role-Restriction":"ClassTeacherRole"}}).pipe((0,u.w)((0,r.Y0)(c.y)))}getActiveFormativeAssessments(){return this.http.get(`${this.baseUrl}/FormativeAssessments?filter.IsActive==true`,{headers:{"X-Role-Restriction":"ClassTeacherRole"}}).pipe((0,u.w)((0,r.Y0)(c.y)))}static#t=this.\u0275fac=function(D){return new(D||m)(s.LFG(o.eN),s.LFG(l.L6))};static#e=this.\u0275prov=s.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})()},2388:(_,f,t)=>{t.d(f,{i:()=>l});var u=t(5301);function l(r){return Object.keys(r).reduce((i,s)=>{const o=function c(r){return r?r instanceof Date?(0,u.Z)(r,"yyyy-MM-dd"):String(r):null}(r[s]);return o?{...i,[s]:o}:i},{})}},6191:(_,f,t)=>{t.d(f,{C:()=>c,v:()=>l});var u=t(3449);function l(r,i,s){return r.map(o=>{let m,h=null;return o.TypeRef.Id&&(h=i.find(g=>g.Id===o.TypeRef.Id)||null),o.ConfirmationStateId&&(m=s.find(g=>g.Key===o.ConfirmationStateId)),new u.Oz(o,h,null,m)})}function c(r,i,s){return r?i.filter(o=>s.find(h=>h===o.lessonPresence.StudentRef.Id)):i}},2547:(_,f,t)=>{t.d(f,{P:()=>l});var u=t(1437);function l(s,o){return o?s.filter(function c(s){const o=i(s);return h=>r(h.studentFullName,o)||r(h.studyClassNumber,o)||r(h.Designation,o)||r(h.evaluationText,o)}(o)):s}function r(s,o){return!!s&&i(s).includes(o)}function i(s){return(0,u.Z)(s.toLowerCase())}}}]);