"use strict";(self.webpackChunkwebapp_schulverwaltung=self.webpackChunkwebapp_schulverwaltung||[]).push([[771],{4771:(B,p,o)=>{o.d(p,{H:()=>W});var v=o(5275),m=o(9610),f=o(1297),_=o(8547),G=o(5193),Z=o(7579),T=o(2722),e=o(5e3),S=o(2039),l=o(8980),C=o(1104),i=o(9808),d=o(1504),h=o(6342);function u(s,r,t){return r&&r.GradeValue?r.GradeValue:function I(s,r){var t;return null===(t=null==r?void 0:r.Grades.find(n=>n.Id===(null==s?void 0:s.GradeId)))||void 0===t?void 0:t.Value}(s,t)||(null==s?void 0:s.GradeValue)}function A(s,r){if(1&s&&(e.TgZ(0,"span",2),e._uU(1),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.hij(" (",t.grade,")")}}function D(s,r){if(1&s&&(e.TgZ(0,"span",3),e._uU(1),e.ALo(2,"number"),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.hij(" (",e.xi3(2,1,t.average,"1.0-3"),")")}}let x=(()=>{class s{constructor(){}get grade(){return this.getGradeForStudent()}get average(){var t;return null===(t=this.grading)||void 0===t?void 0:t.AverageTestResult}getGradeForStudent(){return u(this.grading,this.finalGrade,this.gradingScale)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["erz-dossier-grades-course-header"]],inputs:{designation:"designation",finalGrade:"finalGrade",grading:"grading",gradingScale:"gradingScale"},decls:3,vars:3,consts:[["class","grade","data-testId","grade",4,"ngIf"],["class","average","data-testId","average",4,"ngIf"],["data-testId","grade",1,"grade"],["data-testId","average",1,"average"]],template:function(t,n){1&t&&(e._uU(0),e.YNc(1,A,2,1,"span",0),e.YNc(2,D,3,4,"span",1)),2&t&&(e.Oqu(n.designation),e.xp6(1),e.Q6J("ngIf",n.grade),e.xp6(1),e.Q6J("ngIf",!n.grade&&n.average))},directives:[i.O5],pipes:[i.JJ],styles:[".average[_ngcontent-%COMP%]{color:#33333d80}"]}),s})();var c=o(8995);let y=(()=>{class s{constructor(){}getGradeForStudent(){return u(this.grading,this.finalGrade,this.gradingScale)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["erz-dossier-grades-final-grade"]],inputs:{finalGrade:"finalGrade",grading:"grading",gradingScale:"gradingScale"},decls:14,vars:11,consts:[[1,"row","mx-1"],[1,"col-6"],["data-testid","final-grade"],["data-testid","average-test-results"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",1),e.TgZ(5,"span",2),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"div",1),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"div",1),e.TgZ(11,"span",3),e._uU(12),e.ALo(13,"number"),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,4,"dossier.grade")),e.xp6(4),e.Oqu(n.getGradeForStudent()||"-"),e.xp6(2),e.Oqu(e.lcZ(9,6,"dossier.average")),e.xp6(4),e.Oqu(e.xi3(13,8,null==n.grading?null:n.grading.AverageTestResult,"1.0-3")))},pipes:[c.X$,i.JJ],encapsulation:2}),s})();var O=o(8088),F=o(2097),w=o(4371);let U=(()=>{class s{constructor(){}getGrading(){var t,n;return this.test?null===(n=null===(t=this.gradingScale)||void 0===t?void 0:t.Grades.find(a=>{var g;return a.Id===(null===(g=(0,O.W3)(this.studentId,this.test))||void 0===g?void 0:g.GradeId)}))||void 0===n?void 0:n.Value:"-"}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["erz-dossier-single-test"]],inputs:{test:"test",studentId:"studentId",gradingScale:"gradingScale"},decls:21,vars:17,consts:[["data-testid","test-designation"],[1,"row"],["data-testid","test-date",1,"col-6"],["data-testid","test-grade",1,"col-6"],["data-testid","test-factor",1,"col-6"],["data-testid","test-points",1,"col-6","points"],["data-testid","test-teacher",1,"col-6"],[1,"col-6"],["data-testid","test-status",1,"col-6"]],template:function(t,n){1&t&&(e.TgZ(0,"div"),e.TgZ(1,"span",0),e._uU(2),e.qZA(),e.TgZ(3,"div",1),e.TgZ(4,"div",2),e._uU(5),e.ALo(6,"date"),e.qZA(),e.TgZ(7,"div",3),e._uU(8),e.qZA(),e.TgZ(9,"div",4),e._uU(10),e.ALo(11,"erzTestWeight"),e.qZA(),e.TgZ(12,"div",5),e._uU(13),e.ALo(14,"erzTestPoints"),e.qZA(),e.TgZ(15,"div",6),e._uU(16),e.qZA(),e._UZ(17,"div",7),e.TgZ(18,"div",8),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Oqu(null==n.test?null:n.test.Designation),e.xp6(3),e.hij(" ",e.xi3(6,7,null==n.test?null:n.test.Date,"mediumDate")," "),e.xp6(3),e.hij(" ",n.getGrading()||"-"," "),e.xp6(2),e.hij(" ",e.lcZ(11,10,n.test)," "),e.xp6(3),e.hij(" ",e.xi3(14,12,n.test,n.studentId)," "),e.xp6(3),e.hij(" ",null==n.test?null:n.test.Owner," "),e.xp6(3),e.hij(" ",e.lcZ(20,15,null!=n.test&&n.test.IsPublished?"tests.published":"tests.not-published")," "))},pipes:[i.uU,F.H,w.g,c.X$],styles:[".points[_ngcontent-%COMP%]{color:#33333d80}"]}),s})();function z(s,r){if(1&s&&(e.TgZ(0,"div",4),e._UZ(1,"erz-dossier-single-test",5),e.qZA()),2&s){const t=r.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("test",t)("studentId",n.studentId)("gradingScale",n.getGradingScaleOfTest(t))}}function J(s,r){if(1&s&&(e.TgZ(0,"div"),e.YNc(1,z,2,3,"div",3),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.course.Tests)}}function Q(s,r){1&s&&(e.TgZ(0,"p",6),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"dossier.no-tests")," "))}let Y=(()=>{class s{constructor(t){this.dossierGradeService=t}getGradingScaleOfTest(t){return this.gradingScales.find(n=>n.Id===t.GradingScaleId)}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(l.S))},s.\u0275cmp=e.Xpm({type:s,selectors:[["erz-dossier-course-tests"]],inputs:{studentId:"studentId",course:"course",gradingScales:"gradingScales"},decls:4,vars:5,consts:[[3,"finalGrade","grading","gradingScale"],[4,"ngIf","ngIfElse"],["noTests",""],["class","test-entry",4,"ngFor","ngForOf"],[1,"test-entry"],[3,"test","studentId","gradingScale"],["data-testid","message-no-tests",1,"p-3"]],template:function(t,n){if(1&t&&(e._UZ(0,"erz-dossier-grades-final-grade",0),e.YNc(1,J,2,1,"div",1),e.YNc(2,Q,3,3,"ng-template",null,2,e.W1O)),2&t){const a=e.MAs(3);e.Q6J("finalGrade",n.dossierGradeService.getFinalGradeForStudent(n.course,n.studentId))("grading",n.dossierGradeService.getGradingForStudent(n.course,n.studentId))("gradingScale",n.dossierGradeService.getGradingScaleOfCourse(n.course,n.gradingScales)),e.xp6(1),e.Q6J("ngIf",(null==n.course.Tests?null:n.course.Tests.length)>0)("ngIfElse",a)}},directives:[y,i.O5,i.sg,U],pipes:[c.X$],styles:["[_nghost-%COMP%]{padding:1.5rem}.test-entry[_ngcontent-%COMP%]{padding:1.5rem}"]}),s})();function L(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"erz-student-dossier-entry-header",8),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index;return e.MAs(2).toggle("course-"+a)}),e._UZ(1,"erz-dossier-grades-course-header",9),e.qZA()}if(2&s){const t=r.opened,n=e.oxw().$implicit,a=e.oxw(2);e.Q6J("opened",t),e.xp6(1),e.Q6J("designation",n.Designation)("finalGrade",a.dossierGradeService.getFinalGradeForStudent(n,a.studentId))("grading",a.dossierGradeService.getGradingForStudent(n,a.studentId))("gradingScale",a.dossierGradeService.getGradingScaleOfCourse(n,a.gradingScales))}}function $(s,r){if(1&s&&e._UZ(0,"erz-dossier-course-tests",10),2&s){const t=e.oxw().$implicit,n=e.oxw(2);e.Q6J("course",t)("studentId",n.studentId)("gradingScales",n.gradingScales)}}function V(s,r){if(1&s&&(e.TgZ(0,"div"),e.TgZ(1,"ngb-accordion",3,4),e.TgZ(3,"ngb-panel",5),e.YNc(4,L,2,5,"ng-template",6),e.YNc(5,$,1,3,"ng-template",7),e.qZA(),e.qZA(),e.qZA()),2&s){const t=r.index;e.xp6(3),e.Q6J("id","course-"+t)}}function N(s,r){if(1&s&&(e.ynx(0),e.YNc(1,V,6,1,"div",2),e.BQk()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.courses)}}function q(s,r){1&s&&(e.TgZ(0,"p",11),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"dossier.no-courses")," "))}let j=(()=>{class s{constructor(t){this.dossierGradeService=t}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(l.S))},s.\u0275cmp=e.Xpm({type:s,selectors:[["erz-dossier-grades-view"]],inputs:{courses:"courses",studentId:"studentId",gradingScales:"gradingScales"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noCourses",""],[4,"ngFor","ngForOf"],["ngb-accordion",""],["acc","ngbAccordion"],[3,"id"],["ngbPanelHeader",""],["ngbPanelContent",""],[3,"opened","click"],[3,"designation","finalGrade","grading","gradingScale"],[3,"course","studentId","gradingScales"],["data-testid","message-no-courses",1,"p-3"]],template:function(t,n){if(1&t&&(e.YNc(0,N,2,1,"ng-container",0),e.YNc(1,q,3,3,"ng-template",null,1,e.W1O)),2&t){const a=e.MAs(2);e.Q6J("ngIf",(null==n.courses?null:n.courses.length)>0)("ngIfElse",a)}},directives:[i.O5,i.sg,d.gY,d.Gk,d.k9,h.H,x,d.gW,Y],pipes:[c.X$],styles:[""]}),s})();var H=o(2925);function X(s,r){if(1&s&&e._UZ(0,"erz-dossier-grades-view",3),2&s){const t=e.oxw().erzLet;e.Q6J("courses",t.courses)("studentId",t.studentId)("gradingScales",t.gradingScales)}}function M(s,r){1&s&&(e.ynx(0),e._UZ(1,"erz-spinner"),e.BQk())}function P(s,r){if(1&s&&(e.ynx(0),e.YNc(1,X,1,3,"erz-dossier-grades-view",1),e.YNc(2,M,2,0,"ng-container",2),e.BQk()),2&s){const t=r.erzLet;e.xp6(1),e.Q6J("ngIf",!t.loading),e.xp6(1),e.Q6J("ngIf",t.loading)}}const b=function(s,r,t,n){return{studentId:s,loading:r,courses:t,gradingScales:n}},W={path:"student/:id",children:[{path:"",component:m.H,children:[{path:"",component:G.Y},{path:"addresses",component:_.S},{path:"absences",component:f.t},{path:"grades",component:(()=>{class s{constructor(t,n){this.state=t,this.dossierGradesService=n,this.destroy$=new Z.x}ngOnInit(){this.state.isOverview$.next(!1),this.state.currentDossier$.next("grades"),this.state.studentId$.pipe((0,T.R)(this.destroy$)).subscribe(t=>this.dossierGradesService.setStudentId(t))}ngOnDestroy(){this.destroy$.next()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(S.j),e.Y36(l.S))},s.\u0275cmp=e.Xpm({type:s,selectors:[["erz-dossier-grades"]],decls:5,vars:14,consts:[[4,"erzLet"],[3,"courses","studentId","gradingScales",4,"ngIf"],[4,"ngIf"],[3,"courses","studentId","gradingScales"]],template:function(t,n){1&t&&(e.YNc(0,P,3,2,"ng-container",0),e.ALo(1,"async"),e.ALo(2,"async"),e.ALo(3,"async"),e.ALo(4,"async")),2&t&&e.Q6J("erzLet",e.l5B(9,b,e.lcZ(1,1,n.state.studentId$),e.lcZ(2,3,n.dossierGradesService.loading$),e.lcZ(3,5,n.dossierGradesService.studentCourses$),e.lcZ(4,7,n.dossierGradesService.gradingScales$)))},directives:[C.e,i.O5,j,H.O],pipes:[i.Ov],styles:[""]}),s})()}]},{path:"absences/confirm",component:v.A}]}}}]);