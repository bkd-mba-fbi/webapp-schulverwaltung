"use strict";(self.webpackChunkwebapp_schulverwaltung=self.webpackChunkwebapp_schulverwaltung||[]).push([[771],{4771:(W,p,a)=>{a.d(p,{H:()=>E});var m=a(5275),f=a(9610),v=a(1297),_=a(8547),G=a(7579),h=a(2722),e=a(5e3),C=a(2039),l=a(8980),S=a(1104),o=a(9808),d=a(1504),T=a(6342);function u(t,r,s){return r&&r.GradeValue?r.GradeValue:function Z(t,r){var s;return null===(s=null==r?void 0:r.Grades.find(n=>n.Id===(null==t?void 0:t.GradeId)))||void 0===s?void 0:s.Value}(t,s)||(null==t?void 0:t.GradeValue)}function I(t,r){if(1&t&&(e.TgZ(0,"span",2),e._uU(1),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.hij(" (",s.grade,")")}}function D(t,r){if(1&t&&(e.TgZ(0,"span",3),e._uU(1),e.ALo(2,"number"),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.hij(" (",e.xi3(2,1,s.average,"1.0-3"),")")}}let A=(()=>{class t{constructor(){}get grade(){return this.getGradeForStudent()}get average(){var s;return null===(s=this.grading)||void 0===s?void 0:s.AverageTestResult}getGradeForStudent(){return u(this.grading,this.finalGrade,this.gradingScale)}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["erz-dossier-grades-course-header"]],inputs:{designation:"designation",finalGrade:"finalGrade",grading:"grading",gradingScale:"gradingScale"},decls:3,vars:3,consts:[["class","grade","data-testId","grade",4,"ngIf"],["class","average","data-testId","average",4,"ngIf"],["data-testId","grade",1,"grade"],["data-testId","average",1,"average"]],template:function(s,n){1&s&&(e._uU(0),e.YNc(1,I,2,1,"span",0),e.YNc(2,D,3,4,"span",1)),2&s&&(e.Oqu(n.designation),e.xp6(1),e.Q6J("ngIf",n.grade),e.xp6(1),e.Q6J("ngIf",!n.grade&&n.average))},directives:[o.O5],pipes:[o.JJ],styles:[".average[_ngcontent-%COMP%]{color:#33333d80}"]}),t})();var g=a(8995);let y=(()=>{class t{constructor(){}getGradeForStudent(){return u(this.grading,this.finalGrade,this.gradingScale)}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["erz-dossier-grades-final-grade"]],inputs:{finalGrade:"finalGrade",grading:"grading",gradingScale:"gradingScale"},decls:12,vars:11,consts:[[1,"final-entry"],["data-testid","final-grade"],["data-testid","average-test-results"]],template:function(s,n){1&s&&(e.TgZ(0,"div",0),e.TgZ(1,"div"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",1),e._uU(5),e.qZA(),e.TgZ(6,"div"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"div",2),e._uU(10),e.ALo(11,"number"),e.qZA(),e.qZA()),2&s&&(e.xp6(2),e.Oqu(e.lcZ(3,4,"dossier.grade")),e.xp6(3),e.Oqu(n.getGradeForStudent()||"-"),e.xp6(2),e.Oqu(e.lcZ(8,6,"dossier.average")),e.xp6(3),e.hij(" ",e.xi3(11,8,null==n.grading?null:n.grading.AverageTestResult,"1.0-3")," "))},pipes:[g.X$,o.JJ],styles:[".final-entry[_ngcontent-%COMP%]{padding:1.5rem;display:grid;grid-template-columns:repeat(2,1fr)}"]}),t})();var x=a(8088),O=a(2097),F=a(4371);let w=(()=>{class t{constructor(){}getGrading(){var s,n;return this.test?null===(n=null===(s=this.gradingScale)||void 0===s?void 0:s.Grades.find(i=>{var c;return i.Id===(null===(c=(0,x.W3)(this.studentId,this.test))||void 0===c?void 0:c.GradeId)}))||void 0===n?void 0:n.Value:"-"}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["erz-dossier-single-test"]],inputs:{test:"test",studentId:"studentId",gradingScale:"gradingScale"},decls:19,vars:17,consts:[[1,"test-entry"],["data-testid","test-designation",1,"designation"],["data-testid","test-date",1,"date"],["data-testid","test-grade",1,"grade"],["data-testid","test-factor",1,"factor"],["data-testid","test-points",1,"points"],["data-testid","test-teacher",1,"teacher"],["data-testid","test-status",1,"state"]],template:function(s,n){1&s&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"div",3),e._uU(7),e.qZA(),e.TgZ(8,"div",4),e._uU(9),e.ALo(10,"erzTestWeight"),e.qZA(),e.TgZ(11,"div",5),e._uU(12),e.ALo(13,"erzTestPoints"),e.qZA(),e.TgZ(14,"div",6),e._uU(15),e.qZA(),e.TgZ(16,"div",7),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.qZA()),2&s&&(e.xp6(2),e.hij(" ",null==n.test?null:n.test.Designation," "),e.xp6(2),e.hij(" ",e.xi3(5,7,null==n.test?null:n.test.Date,"mediumDate")," "),e.xp6(3),e.hij(" ",n.getGrading()||"-"," "),e.xp6(2),e.hij(" ",e.lcZ(10,10,n.test)," "),e.xp6(3),e.hij(" ",e.xi3(13,12,n.test,n.studentId)," "),e.xp6(3),e.hij(" ",null==n.test?null:n.test.Owner," "),e.xp6(2),e.hij(" ",e.lcZ(18,15,null!=n.test&&n.test.IsPublished?"tests.published":"tests.not-published")," "))},pipes:[o.uU,O.H,F.g,g.X$],styles:['.test-entry[_ngcontent-%COMP%]{border-top:1px solid #dee2e6;padding:1.5rem;display:grid;grid-template-areas:"designation designation grade factor" "date date points ." "teacher teacher . ." "state state . .";grid-template-columns:repeat(4,1fr)}.designation[_ngcontent-%COMP%]{grid-area:designation}.date[_ngcontent-%COMP%]{grid-area:date}.grade[_ngcontent-%COMP%]{grid-area:grade}.points[_ngcontent-%COMP%]{grid-area:points;color:#33333d80}.teacher[_ngcontent-%COMP%]{grid-area:teacher}.state[_ngcontent-%COMP%]{grid-area:state}@media (max-width: 767.98px){.test-entry[_ngcontent-%COMP%]{grid-template-areas:"designation designation" "date grade" "factor points" "teacher teacher" "state state";grid-template-columns:repeat(2,1fr)}}']}),t})();function z(t,r){if(1&t&&e._UZ(0,"erz-dossier-single-test",4),2&t){const s=r.$implicit,n=e.oxw(2);e.Q6J("test",s)("studentId",n.studentId)("gradingScale",n.getGradingScaleOfTest(s))}}function U(t,r){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,z,1,3,"erz-dossier-single-test",3),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngForOf",s.course.Tests)}}function J(t,r){1&t&&(e.TgZ(0,"p",5),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"dossier.no-tests")," "))}let Q=(()=>{class t{constructor(s){this.dossierGradeService=s}getGradingScaleOfTest(s){return this.gradingScales.find(n=>n.Id===s.GradingScaleId)}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(l.S))},t.\u0275cmp=e.Xpm({type:t,selectors:[["erz-dossier-course-tests"]],inputs:{studentId:"studentId",course:"course",gradingScales:"gradingScales"},decls:4,vars:5,consts:[[3,"finalGrade","grading","gradingScale"],[4,"ngIf","ngIfElse"],["noTests",""],[3,"test","studentId","gradingScale",4,"ngFor","ngForOf"],[3,"test","studentId","gradingScale"],["data-testid","message-no-tests",1,"p-3"]],template:function(s,n){if(1&s&&(e._UZ(0,"erz-dossier-grades-final-grade",0),e.YNc(1,U,2,1,"div",1),e.YNc(2,J,3,3,"ng-template",null,2,e.W1O)),2&s){const i=e.MAs(3);e.Q6J("finalGrade",n.dossierGradeService.getFinalGradeForStudent(n.course,n.studentId))("grading",n.dossierGradeService.getGradingForStudent(n.course,n.studentId))("gradingScale",n.dossierGradeService.getGradingScaleOfCourse(n.course,n.gradingScales)),e.xp6(1),e.Q6J("ngIf",(null==n.course.Tests?null:n.course.Tests.length)>0)("ngIfElse",i)}},directives:[y,o.O5,o.sg,w],pipes:[g.X$],styles:[""]}),t})();function L(t,r){if(1&t){const s=e.EpF();e.TgZ(0,"erz-student-dossier-entry-header",8),e.NdJ("click",function(){e.CHM(s);const i=e.oxw().index;return e.MAs(2).toggle("course-"+i)}),e._UZ(1,"erz-dossier-grades-course-header",9),e.qZA()}if(2&t){const s=r.opened,n=e.oxw().$implicit,i=e.oxw(2);e.Q6J("opened",s),e.xp6(1),e.Q6J("designation",n.Designation)("finalGrade",i.dossierGradeService.getFinalGradeForStudent(n,i.studentId))("grading",i.dossierGradeService.getGradingForStudent(n,i.studentId))("gradingScale",i.dossierGradeService.getGradingScaleOfCourse(n,i.gradingScales))}}function Y(t,r){if(1&t&&e._UZ(0,"erz-dossier-course-tests",10),2&t){const s=e.oxw().$implicit,n=e.oxw(2);e.Q6J("course",s)("studentId",n.studentId)("gradingScales",n.gradingScales)}}function $(t,r){if(1&t&&(e.TgZ(0,"div"),e.TgZ(1,"ngb-accordion",3,4),e.TgZ(3,"ngb-panel",5),e.YNc(4,L,2,5,"ng-template",6),e.YNc(5,Y,1,3,"ng-template",7),e.qZA(),e.qZA(),e.qZA()),2&t){const s=r.index;e.xp6(3),e.Q6J("id","course-"+s)}}function V(t,r){if(1&t&&(e.ynx(0),e.YNc(1,$,6,1,"div",2),e.BQk()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngForOf",s.courses)}}function j(t,r){1&t&&(e.TgZ(0,"p",11),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"dossier.no-courses")," "))}let M=(()=>{class t{constructor(s){this.dossierGradeService=s}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(l.S))},t.\u0275cmp=e.Xpm({type:t,selectors:[["erz-dossier-grades-view"]],inputs:{courses:"courses",studentId:"studentId",gradingScales:"gradingScales"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noCourses",""],[4,"ngFor","ngForOf"],["ngb-accordion",""],["acc","ngbAccordion"],[3,"id"],["ngbPanelHeader",""],["ngbPanelContent",""],[3,"opened","click"],[3,"designation","finalGrade","grading","gradingScale"],[3,"course","studentId","gradingScales"],["data-testid","message-no-courses",1,"p-3"]],template:function(s,n){if(1&s&&(e.YNc(0,V,2,1,"ng-container",0),e.YNc(1,j,3,3,"ng-template",null,1,e.W1O)),2&s){const i=e.MAs(2);e.Q6J("ngIf",(null==n.courses?null:n.courses.length)>0)("ngIfElse",i)}},directives:[o.O5,o.sg,d.gY,d.Gk,d.k9,T.H,A,d.gW,Q],pipes:[g.X$],styles:[""]}),t})();var N=a(2925);function P(t,r){if(1&t&&e._UZ(0,"erz-dossier-grades-view",3),2&t){const s=e.oxw().erzLet;e.Q6J("courses",s.courses)("studentId",s.studentId)("gradingScales",s.gradingScales)}}function H(t,r){1&t&&(e.ynx(0),e._UZ(1,"erz-spinner"),e.BQk())}function X(t,r){if(1&t&&(e.ynx(0),e.YNc(1,P,1,3,"erz-dossier-grades-view",1),e.YNc(2,H,2,0,"ng-container",2),e.BQk()),2&t){const s=r.erzLet;e.xp6(1),e.Q6J("ngIf",!s.loading),e.xp6(1),e.Q6J("ngIf",s.loading)}}const b=function(t,r,s,n){return{studentId:t,loading:r,courses:s,gradingScales:n}},E={path:"student/:id",children:[{path:"",component:f.H,children:[{path:"addresses",component:_.S},{path:"absences",component:v.t},{path:"grades",component:(()=>{class t{constructor(s,n){this.state=s,this.dossierGradesService=n,this.destroy$=new G.x}ngOnInit(){this.state.currentDossier$.next("grades"),this.state.studentId$.pipe((0,h.R)(this.destroy$)).subscribe(s=>this.dossierGradesService.setStudentId(s))}ngOnDestroy(){this.destroy$.next()}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(C.j),e.Y36(l.S))},t.\u0275cmp=e.Xpm({type:t,selectors:[["erz-dossier-grades"]],decls:5,vars:14,consts:[[4,"erzLet"],[3,"courses","studentId","gradingScales",4,"ngIf"],[4,"ngIf"],[3,"courses","studentId","gradingScales"]],template:function(s,n){1&s&&(e.YNc(0,X,3,2,"ng-container",0),e.ALo(1,"async"),e.ALo(2,"async"),e.ALo(3,"async"),e.ALo(4,"async")),2&s&&e.Q6J("erzLet",e.l5B(9,b,e.lcZ(1,1,n.state.studentId$),e.lcZ(2,3,n.dossierGradesService.loading$),e.lcZ(3,5,n.dossierGradesService.studentCourses$),e.lcZ(4,7,n.dossierGradesService.gradingScales$)))},directives:[S.e,o.O5,M,N.O],pipes:[o.Ov],styles:[""]}),t})()}]},{path:"absences/confirm",component:m.A}]}}}]);