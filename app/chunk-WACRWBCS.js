import{Ab as f,Ad as I,Cc as s,Dc as h,Fc as R,Fd as _,Hc as k,Ic as b,Kc as w,Ld as z,Ma as M,P,Pc as a,Qc as E,Uc as L,Wa as u,X as x,Xa as g,Ya as j,Yc as O,_ as c,a as y,aa as m,b as v,eb as D,fb as F,gc as $,l as S,n as A,nb as T,o as C,ob as U,wa as d,wd as B}from"./chunk-IFJN5CDK.js";var G=(()=>{class o{constructor(){this.expanded=!1}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275cmp=m({type:o,selectors:[["bkd-caret"]],inputs:{expanded:"expanded"},standalone:!0,features:[f],decls:2,vars:1,consts:[["role","button",1,"d-flex","material-icons"]],template:function(e,r){e&1&&(u(0,"i",0),T(1),g()),e&2&&(d(),U(r.expanded?"expand_less":"expand_more"))},styles:["i[_ngcontent-%COMP%]:hover{color:#ea161f}"]})}}return o})();var q=["*"],W=(()=>{class o{constructor(){this.opened=!1}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275cmp=m({type:o,selectors:[["bkd-student-dossier-entry-header"]],inputs:{opened:"opened"},standalone:!0,features:[f],ngContentSelectors:q,decls:3,vars:1,consts:[[1,"m-0"],[1,"d-flex","align-items-center",3,"expanded"]],template:function(e,r){e&1&&(D(),u(0,"h5",0),F(1),g(),j(2,"bkd-caret",1)),e&2&&(d(2),M("expanded",r.opened))},dependencies:[G],styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem;border-top:1px solid #dee2e6;cursor:pointer}button[_ngcontent-%COMP%]{color:#000;text-decoration:none}.btn-link[_ngcontent-%COMP%]:hover{text-decoration:none}"],changeDetection:0})}}return o})();var K=b({Id:h,Title:s}),N=a(k(K));var lt=(()=>{class o{constructor(t,e,r){this.settings=t,this.storageService=e,this.http=r}getPersonMasterDataReports(t){return this.getAvailableReports("Person",this.settings.personMasterDataReports,[t])}getStudentConfirmationReports(t){return this.getAvailableReports("Praesenzinformation",this.settings.studentConfirmationReports,t)}getEvaluateAbsencesReports(t){return this.getAvailableReports("Praesenzinformation",this.settings.evaluateAbsencesReports,t)}getMyAbsencesReports(t){return this.getAvailableReports("Praesenzinformation",this.settings.myAbsencesReports,t)}getCourseReports(t){return this.getAvailableReports("Anlass",this.settings.testsByCourseReports,[t])}getStudentSubscriptionReports(t){return this.settings.testsBySubscriptionStudentReports.map((r,i)=>{let n=this.getReportUrl(r.type,"Anmeldung",r.id,t);return v(y({},r),{title:`Report ${i+1}`,url:n})})}getTeacherSubscriptionReports(t){return this.settings.testsBySubscriptionTeacherReports.map((r,i)=>{let n=this.getReportUrl(r.type,"Anmeldung",r.id,t);return v(y({},r),{title:`Report ${i+1}`,url:n})})}getAvailableReports(t,e,r){let i=I(e,p=>p.type),n=C(Object.keys(i).map(p=>this.getAvailableReportsForType(p,t,i[p].map(({id:l})=>l),r)));return this.mergeAvailableReports(n,e)}getAvailableReportsForType(t,e,r,i){return i.length===0?S([]):this.http.get(this.getReportAvailabilityUrl(t,e,r,i)).pipe(P(_(N)),A(n=>n?n.map(({Id:p,Title:l})=>({type:t,id:p,title:l,url:this.getReportUrl(t,e,p,i)})):[]))}mergeAvailableReports(t,e){return t.pipe(A(r=>{let i=B(r);return e.reduce((n,p)=>{let l=i.find(({id:X})=>X===p.id);return l?[...n,l]:n},[])}))}getReportUrl(t,e,r,i){let n=new URL(`${this.settings.apiUrl}/Files/${this.getReportTypePathPart(t)}/${e}/${r}`);return n.searchParams.set("ids",i.join(",")),n.searchParams.set("token",this.storageService.getAccessToken()??""),n.toString()}getReportAvailabilityUrl(t,e,r,i){let n=new URL(`${this.settings.apiUrl}/${this.getReportTypePathPart(t)}/AvailableReports/${e}`);return n.searchParams.set("ids",Array.isArray(r)?r.join(","):String(r)),n.searchParams.set("keys",i.join(",")),n.toString()}getReportTypePathPart(t){return`${t[0].toUpperCase()+t.slice(1)}Reports`}static{this.\u0275fac=function(e){return new(e||o)(c(O),c(z),c($))}}static{this.\u0275prov=x({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var ut=b({Id:h,AddressLine1:a(s),AddressLine2:E(s),Birthdate:a(L),DisplayEmail:a(s),FullName:s,Gender:w([R("M"),R("F"),R("X")]),Location:a(s),PhoneMobile:a(s),PhonePrivate:a(s),PostalCode:a(s)});export{G as a,W as b,ut as c,lt as d};
