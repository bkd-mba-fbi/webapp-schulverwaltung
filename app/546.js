"use strict";(self.webpackChunkwebapp_schulverwaltung=self.webpackChunkwebapp_schulverwaltung||[]).push([[546],{5799:(L,E,r)=>{r.d(E,{O:()=>at,f:()=>Le});var O=r(1135),p=r(7579),d=r(6451),T=r(9841),h=r(4004),I=r(9300),Z=r(1884),S=r(4782),g=r(9718),C=r(5026),f=r(8372),u=r(4351),gt=r(4813),ht=r(2722),ut=r(5698),dt=r(5343);var U=r(2370);const F=function pt(t,n,e){"__proto__"==n&&U.Z?(0,U.Z)(t,n,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[n]=e};var bt=r(3093),At=Object.prototype.hasOwnProperty;const B=function Et(t,n,e){var s=t[n];(!At.call(t,n)||!(0,bt.Z)(s,e)||void 0===e&&!(n in t))&&F(t,n,e)},$=function Ot(t,n,e,s){var v=!e;e||(e={});for(var l=-1,i=n.length;++l<i;){var a=n[l],c=s?s(e[a],t[a],a,e,t):void 0;void 0===c&&(c=t[a]),v?F(e,a,c):B(e,a,c)}return e};var R=r(4157);var $t=r(3487),x=r(1999),K=r(1986);var Zt=Object.prototype.hasOwnProperty;const mt=function xt(t){if(!(0,x.Z)(t))return function Pt(t){var n=[];if(null!=t)for(var e in Object(t))n.push(e);return n}(t);var n=(0,K.Z)(t),e=[];for(var s in t)"constructor"==s&&(n||!Zt.call(t,s))||e.push(s);return e};var Mt=r(8706);const m=function Dt(t){return(0,Mt.Z)(t)?(0,$t.Z)(t,!0):mt(t)};var Ft=r(5946),N="object"==typeof exports&&exports&&!exports.nodeType&&exports,W=N&&"object"==typeof module&&module&&!module.nodeType&&module,G=W&&W.exports===N?Ft.Z.Buffer:void 0,V=G?G.allocUnsafe:void 0;var X=r(3976);var Xt=r(6623);const Y=(0,r(5820).Z)(Object.getPrototypeOf,Object);var Jt=r(3419);const H=Object.getOwnPropertySymbols?function(t){for(var n=[];t;)(0,Xt.Z)(n,(0,X.Z)(t)),t=Y(t);return n}:Jt.Z;var _t=r(8501),kt=r(8203);const nn=function tn(t){return(0,kt.Z)(t,m,H)};var M=r(7183),rn=Object.prototype.hasOwnProperty;var J=r(1630);const D=function an(t){var n=new t.constructor(t.byteLength);return new J.Z(n).set(new J.Z(t)),n};var fn=/\w*$/;var Q=r(8492),z=Q.Z?Q.Z.prototype:void 0,w=z?z.valueOf:void 0;const Bn=function Fn(t,n,e){var s=t.constructor;switch(n){case"[object ArrayBuffer]":return D(t);case"[object Boolean]":case"[object Date]":return new s(+t);case"[object DataView]":return function ln(t,n){var e=n?D(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}(t,e);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function vn(t,n){var e=n?D(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}(t,e);case"[object Map]":case"[object Set]":return new s;case"[object Number]":case"[object String]":return new s(t);case"[object RegExp]":return function gn(t){var n=new t.constructor(t.source,fn.exec(t));return n.lastIndex=t.lastIndex,n}(t);case"[object Symbol]":return function un(t){return w?Object(w.call(t)):{}}(t)}};var q=Object.create;const Kn=function(){function t(){}return function(n){if(!(0,x.Z)(n))return{};if(q)return q(n);t.prototype=n;var e=new t;return t.prototype=void 0,e}}();var Gn=r(4177),Vn=r(5202),_=r(214);var k=r(6932),P=r(6594),tt=P.Z&&P.Z.isMap;const Qn=tt?(0,k.Z)(tt):function Yn(t){return(0,_.Z)(t)&&"[object Map]"==(0,M.Z)(t)};var nt=P.Z&&P.Z.isSet;const kn=nt?(0,k.Z)(nt):function wn(t){return(0,_.Z)(t)&&"[object Set]"==(0,M.Z)(t)};var et="[object Arguments]",rt="[object Function]",st="[object Object]",o={};o[et]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object DataView]"]=o["[object Boolean]"]=o["[object Date]"]=o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Map]"]=o["[object Number]"]=o[st]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object Symbol]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Error]"]=o[rt]=o["[object WeakMap]"]=!1;const Pe=function j(t,n,e,s,v,l){var i,a=1&n,c=2&n,Ue=4&n;if(e&&(i=v?e(t,s,v,l):e(t)),void 0!==i)return i;if(!(0,x.Z)(t))return t;var it=(0,Gn.Z)(t);if(it){if(i=function sn(t){var n=t.length,e=new t.constructor(n);return n&&"string"==typeof t[0]&&rn.call(t,"index")&&(e.index=t.index,e.input=t.input),e}(t),!a)return function Nt(t,n){var e=-1,s=t.length;for(n||(n=Array(s));++e<s;)n[e]=t[e];return n}(t,i)}else{var A=(0,M.Z)(t),lt=A==rt||"[object GeneratorFunction]"==A;if((0,Vn.Z)(t))return function Rt(t,n){if(n)return t.slice();var e=t.length,s=V?V(e):new t.constructor(e);return t.copy(s),s}(t,a);if(A==st||A==et||lt&&!v){if(i=c||lt?{}:function Nn(t){return"function"!=typeof t.constructor||(0,K.Z)(t)?{}:Kn(Y(t))}(t),!a)return c?function wt(t,n){return $(t,H(t),n)}(t,function Lt(t,n){return t&&$(n,m(n),t)}(i,t)):function Gt(t,n){return $(t,(0,X.Z)(t),n)}(t,function St(t,n){return t&&$(n,(0,R.Z)(n),t)}(i,t))}else{if(!o[A])return v?t:{};i=Bn(t,A,a)}}l||(l=new dt.Z);var ct=l.get(t);if(ct)return ct;l.set(t,i),kn(t)?t.forEach(function(y){i.add(j(y,n,e,y,t,l))}):Qn(t)&&t.forEach(function(y,b){i.set(b,j(y,n,e,b,t,l))});var ft=it?void 0:(Ue?c?nn:_t.Z:c?m:R.Z)(t);return function vt(t,n){for(var e=-1,s=null==t?0:t.length;++e<s&&!1!==n(t[e],e,t););}(ft||t,function(y,b){ft&&(y=t[b=y]),B(i,b,j(y,n,e,b,t,l))}),i};var me=r(1854),Me=r(6478),De=r(7832),ot=r(5e3);r(8029);const at="page";let Le=(()=>{class t{constructor(e,s,v,l,i){this.location=e,this.loadingService=s,this.sortService=v,this.settings=l,this.loading$=this.loadingService.loading$,this.loadingPage$=this.loadingService.loading(at),this.sorting$=this.sortService.sorting$,this.filter$=new O.X(this.getInitialFilter()),this.isFilterValid$=this.filter$.pipe((0,h.U)(this.isValidFilter.bind(this))),this.validFilter$=this.filter$.pipe((0,I.h)(this.isValidFilter.bind(this)),(0,Z.x)(me.Z),(0,S.d)(1)),this.resetEntries$=new p.x,this.nextPage$=new p.x,this.page$=(0,d.T)(this.nextPage$.pipe((0,g.h)("next")),(0,d.T)(this.resetEntries$,this.validFilter$,this.sorting$).pipe((0,g.h)("reset"))).pipe((0,C.R)((a,c)=>"next"===c?a+1:0,0)),this.offset$=this.page$.pipe((0,h.U)(a=>a*this.settings.paginationLimit)),this.pageResult$=(0,T.a)([this.validFilter$,this.sorting$,this.offset$]).pipe((0,f.b)(10),(0,u.b)((0,Me.h)(this.loadEntries.bind(this))),(0,S.d)(1)),this.entries$=(0,d.T)((0,d.T)(this.resetEntries$,this.validFilter$,this.sorting$).pipe((0,g.h)({action:"reset"})),this.pageResult$.pipe((0,h.U)(a=>0===a.offset?{action:"reset",entries:a.entries}:{action:"append",entries:a.entries}))).pipe((0,C.R)(this.entriesActionReducer.bind(this),[]),(0,S.d)(1)),this.total$=this.pageResult$.pipe((0,gt.j)("total")),this.hasMore$=this.pageResult$.pipe((0,h.U)(({offset:a,total:c})=>a<c-this.settings.paginationLimit)),this.queryParams$=this.filter$.pipe((0,h.U)(this.buildParamsFromFilter.bind(this))),this.queryParamsString$=this.queryParams$.pipe((0,h.U)(De.tW)),this.destroy$=new p.x,this.queryParamsString$.pipe((0,ht.R)(this.destroy$)).subscribe(a=>this.location.replaceState(i,a))}ngOnDestroy(){this.destroy$.next()}setFilter(e){this.filter$.next(function Ze(t){return Pe(t,5)}(e))}nextPage(){this.hasMore$.pipe((0,ut.q)(1)).subscribe(e=>{e&&this.nextPage$.next()})}resetEntries(){this.resetEntries$.next()}entriesActionReducer(e,s){switch(s.action){case"append":return[...e,...s.entries];case"reset":return s.entries?s.entries:[];default:return e}}}return t.\u0275fac=function(e){ot.$Z()},t.\u0275prov=ot.Yz7({token:t,factory:t.\u0275fac}),t})()},4379:(L,E,r)=>{r.d(E,{K:()=>S});var O=r(1854),p=r(1135),d=r(1884),T=r(4782),h=r(4004),I=r(5698),Z=r(5e3);let S=(()=>{class g{constructor(){this.sortingSubject$=new p.X(null),this.sorting$=this.sortingSubject$.asObservable().pipe((0,d.x)(O.Z),(0,T.d)(1))}getSortingChar$(f){return this.sorting$.pipe((0,h.U)(u=>u&&f===u.key?u.ascending?"\u2193":"\u2191":""))}setSorting(f){this.sortingSubject$.next(f)}toggleSorting(f){this.sorting$.pipe((0,I.q)(1)).subscribe(u=>{this.sortingSubject$.next(u&&u.key===f?{key:f,ascending:!u.ascending}:{key:f,ascending:!0})})}}return g.\u0275fac=function(f){return new(f||g)},g.\u0275prov=Z.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},2370:(L,E,r)=>{r.d(E,{Z:()=>d});var O=r(3858);const d=function(){try{var T=(0,O.Z)(Object,"defineProperty");return T({},"",{}),T}catch(h){}}()}}]);