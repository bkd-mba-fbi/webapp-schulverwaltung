import{a as x}from"./chunk-M3FEXD6V.js";import{a as V}from"./chunk-7ATI4WMB.js";import{s as M}from"./chunk-BN47ZUGZ.js";import{Qc as n,Rc as o,S as l,Sc as b,Vc as v,Wc as u,Yc as y,Zd as m,_ as d,a as g,b as I,bd as a,ca as p,dd as c,hd as E,ld as S,p as h,uc as w}from"./chunk-RXW5CQPZ.js";var R=function(e){return e[e.Int=277]="Int",e[e.Currency=279]="Currency",e[e.Text=290]="Text",e[e.MemoText=293]="MemoText",e}(R||{}),$=u({Id:n,SubscriptionId:o,VssId:o,EventId:o,DropdownItems:a(v(x)),IdPerson:o,ShowAsRadioButtons:b,Value:a(y([n,o])),VssDesignation:n,VssStyle:n,VssTypeId:o,VssType:n,VssInternet:n}),f=u({Id:o,EventId:a(o),PersonId:a(o),Status:n,EventDesignation:a(n),RegistrationDate:a(E)});var G=(()=>{class e extends V{constructor(){let t=p(w),r=p(S);super(t,r,f,"Subscriptions")}getSubscriptionIdsByStudentAndCourse(t,r){return this.http.get(`${this.baseUrl}/`,{params:{"filter.PersonId":`=${t}`,"filter.EventId":`;${r}`}}).pipe(l(m(c)),h(i=>i.map(s=>s.Id)))}getSubscriptionIdsByEventAndStudents(t,r){return this.http.get(`${this.baseUrl}/`,{params:{"filter.EventId":`=${t}`,"filter.PersonId":`;${r}`}}).pipe(l(m(c)),h(i=>i.map(s=>s.Id)))}getSubscriptionCountsByEvents(t){return this.http.get(`${this.baseUrl}/`,{params:{"filter.EventId":`;${t.join(";")}`,fields:["Id","EventId"].join(",")}}).pipe(l(m(u({Id:o,EventId:o}))),h(r=>r.reduce((i,s)=>(i[s.EventId]=i[s.EventId]?i[s.EventId]+1:1,i),{})))}getSubscriptionsByCourse(t,r){return this.http.get(`${this.baseUrl}/`,{params:I(g({"filter.EventId":`=${t}`},r),{fields:["Id","EventId","EventDesignation","PersonId","Status","RegistrationDate"].join(",")})}).pipe(l(m(f)))}getSubscriptionDetailsById(t){return this.http.get(`${this.baseUrl}/${t}/SubscriptionDetails`).pipe(l(m($)))}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var B=(()=>{class e{constructor(){}get inIframe(){return window.parent!==window}get window(){return this.inIframe?window.parent:null}get document(){return this.window?.document.documentElement??null}querySelector(t){return this.window?.document?.querySelector("bkd-portal")?.shadowRoot?.querySelector(t)??null}getIframeElement(){return this.querySelector("bkd-content")?.shadowRoot?.querySelector("iframe")??null}getIframeTop(){return this.getIframeElement()?.offsetTop??0}getIFrameBottom(){let t=this.getIframeElement();return t?t.offsetTop+t.offsetHeight:0}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Z=(()=>{class e{constructor(){this.modal=p(M),this.portal=p(B)}open(...t){let r=this.modal.open(...t);return this.applyPortalOffsetAndMaxHeight(r),this.disablePortalScrolling(r),r}get activeInstances(){return this.modal.activeInstances}dismissAll(...t){return this.modal.dismissAll(...t)}hasOpenModals(...t){return this.modal.hasOpenModals(...t)}applyPortalOffsetAndMaxHeight(t){let r=this.getModalWindowElement(t);if(!r){console.warn("Trying to apply portal offset to <ngb-modal-window>, but element is not present!");return}this.portal.window&&(r.style.top=`${this.getModalIframeOffset()}px`,r.style.maxHeight=`${this.getModalHeight()}px`)}disablePortalScrolling(t){if(this.portal.window&&this.portal.document){let r=this.portal.window.innerWidth-this.portal.document.clientWidth;this.portal.document.style.paddingRight=`${r}px`,this.portal.document.style.overflow="hidden"}t.hidden.subscribe(()=>{this.portal.document&&(this.portal.document.style.paddingRight="0px",this.portal.document.style.overflow="auto")})}getModalWindowElement(t){return t._windowCmptRef?.instance?._elRef?.nativeElement??null}getModalIframeOffset(){return Math.max(this.getViewportTop()-this.portal.getIframeTop(),0)}getModalTop(){return Math.max(this.getViewportTop(),this.portal.getIframeTop())}getModalBottom(){return Math.min(this.getViewportBottom(),this.portal.getIFrameBottom())}getModalHeight(){return this.getModalBottom()-this.getModalTop()}getViewportTop(){return this.portal.window?.scrollY??0}getViewportBottom(){return this.getViewportTop()+this.getViewportHeight()}getViewportHeight(){return this.portal.window?.innerHeight??0}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();export{R as a,$ as b,G as c,B as d,Z as e};
