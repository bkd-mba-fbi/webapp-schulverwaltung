import{$a as g,Cd as O,Ga as d,Gd as B,Hc as o,Ic as h,Kc as f,Ld as I,Mc as F,Nc as R,P as C,Pc as k,Qa as x,Rd as _,Uc as a,Vc as L,X as P,_ as c,_a as u,_c as w,a as b,ab as M,b as y,cd as E,ib as j,jb as D,l as A,lc as $,n as v,o as S,rb as T,sb as U,ya as m}from"./chunk-SFIM5H6S.js";var N=(()=>{class i{constructor(){this.expanded=!1}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=d({type:i,selectors:[["bkd-caret"]],inputs:{expanded:"expanded"},decls:2,vars:1,consts:[["role","button",1,"d-flex","material-icons"]],template:function(e,r){e&1&&(u(0,"i",0),T(1),g()),e&2&&(m(),U(r.expanded?"expand_less":"expand_more"))},styles:["i[_ngcontent-%COMP%]:hover{color:#ea161f}"]})}}return i})();var X=["*"],V=(()=>{class i{constructor(){this.opened=!1}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=d({type:i,selectors:[["bkd-student-dossier-entry-header"]],inputs:{opened:"opened"},ngContentSelectors:X,decls:3,vars:1,consts:[[1,"m-0"],[1,"d-flex","align-items-center",3,"expanded"]],template:function(e,r){e&1&&(j(),u(0,"h5",0),D(1),g(),M(2,"bkd-caret",1)),e&2&&(m(2),x("expanded",r.opened))},dependencies:[N],styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem;border-top:1px solid #dee2e6;cursor:pointer}button[_ngcontent-%COMP%]{color:#000;text-decoration:none}.btn-link[_ngcontent-%COMP%]:hover{text-decoration:none}"],changeDetection:0})}}return i})();var J=R({Id:h,Title:o}),z=a(F(J));var pt=(()=>{class i{constructor(t,e,r){this.settings=t,this.storageService=e,this.http=r}getPersonMasterDataReports(t){return this.getAvailableReports("Person",this.settings.personMasterDataReports,[t])}getStudentConfirmationReports(t){return this.getAvailableReports("Praesenzinformation",this.settings.studentConfirmationReports,t)}getEvaluateAbsencesReports(t){return this.getAvailableReports("Praesenzinformation",this.settings.evaluateAbsencesReports,t)}getMyAbsencesReports(t){return this.getAvailableReports("Praesenzinformation",this.settings.myAbsencesReports,t)}getCourseTestsReports(t){return this.getAvailableReports("Anlass",this.settings.testsByCourseReports,[t])}getStudentSubscriptionGradesReports(t){return this.settings.testsBySubscriptionStudentReports.map((r,n)=>{let s=this.getReportUrl(r.type,"Anmeldung",r.id,t);return y(b({},r),{title:`Report ${n+1}`,url:s})})}getTeacherSubscriptionGradesReports(t){return this.settings.testsBySubscriptionTeacherReports.map((r,n)=>{let s=this.getReportUrl(r.type,"Anmeldung",r.id,t);return y(b({},r),{title:`Report ${n+1}`,url:s})})}getStudyClassStudentsReports(t){return this.getAvailableReports("Anlass",this.settings.studyClassStudentsReports,[t])}getCourseStudentsReports(t){return this.getAvailableReports("Anlass",this.settings.courseStudentsReports,[t])}getAvailableReports(t,e,r){let n=B(e,p=>p.type),s=S(Object.keys(n).map(p=>this.getAvailableReportsForType(p,t,n[p].map(({id:l})=>l),r)));return this.mergeAvailableReports(s,e)}getAvailableReportsForType(t,e,r,n){return n.length===0?A([]):this.http.get(this.getReportAvailabilityUrl(t,e,r,n)).pipe(C(I(z)),v(s=>s?s.map(({Id:p,Title:l})=>({type:t,id:p,title:l,url:this.getReportUrl(t,e,p,n)})):[]))}mergeAvailableReports(t,e){return t.pipe(v(r=>{let n=O(r);return e.reduce((s,p)=>{let l=n.find(({id:H})=>H===p.id);return l?[...s,l]:s},[])}))}getReportUrl(t,e,r,n){let s=new URL(`${this.settings.apiUrl}/Files/${this.getReportTypePathPart(t)}/${e}/${r}`);return s.searchParams.set("ids",n.join(",")),s.searchParams.set("token",this.storageService.getAccessToken()??""),s.toString()}getReportAvailabilityUrl(t,e,r,n){let s=new URL(`${this.settings.apiUrl}/${this.getReportTypePathPart(t)}/AvailableReports/${e}`);return s.searchParams.set("ids",Array.isArray(r)?r.join(","):String(r)),s.searchParams.set("keys",n.join(",")),s.toString()}getReportTypePathPart(t){return`${t[0].toUpperCase()+t.slice(1)}Reports`}static{this.\u0275fac=function(e){return new(e||i)(c(E),c(_),c($))}}static{this.\u0275prov=P({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var dt=R({Id:h,AddressLine1:a(o),AddressLine2:L(o),Birthdate:a(w),DisplayEmail:a(o),FirstName:o,FullName:o,Gender:k([f("M"),f("F"),f("X")]),LastName:o,Location:a(o),PhoneMobile:a(o),PhonePrivate:a(o),PostalCode:a(o)});export{N as a,V as b,dt as c,pt as d};
