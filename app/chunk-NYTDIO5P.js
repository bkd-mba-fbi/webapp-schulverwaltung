import{t as B,x as z}from"./chunk-C56YGDXA.js";import{$ as I,$a as $,$c as w,Ab as s,Bb as d,Bd as D,C as v,G as g,Ga as y,Gd as H,Ha as E,Hd as K,I as f,Ia as p,O as _,Sa as r,Sb as P,Ta as o,Vb as k,Ya as O,Yc as F,_a as b,dd as N,f as m,ga as T,ha as M,ia as S,jb as c,m as h,rd as V,tb as x,ua as l,w as C}from"./chunk-XTHSYQMN.js";function A(n,i){if(n&1){let u=O();r(0,"button",6),b("click",function(a){M(u);let t=$();return S(t.modelChange(a))}),r(1,"i",2),c(2,"clear"),o()()}}function j(n,i){n&1&&(r(0,"div",7)(1,"div",8)(2,"span",9),c(3,"Loading..."),o()()())}var q=300,U=3,oe=(()=>{let i=class i{constructor(){this.selectedItem$=new m(null),this.placeholder="shared.typeahead.default-placeholder",this.valueChange=this.selectedItem$.pipe(h(e=>e?e.Key:null),g()),this.componentId=D("bkd-typeahead-"),this.loading$=new m(!1),this.search=e=>e.pipe(G(U,q),_(this.fetchItems.bind(this)))}ngOnChanges(e){e.value&&e.value.currentValue&&e.value.currentValue!==this.selectedItemKey&&this.fetchItem(e.value.currentValue).subscribe(a=>{this.modelChange(a)})}format(e){return e.Value}modelChange(e){this.selectedItem$.next(e instanceof Object?e:null)}get selectedItemKey(){return this.selectedItem$.value?this.selectedItem$.value.Key:null}fetchItems(e){return this.loading$.next(!0),this.typeaheadService.getTypeaheadItems(e,this.additionalHttpParams).pipe(f(()=>this.loading$.next(!1)))}fetchItem(e){return this.loading$.next(!0),this.typeaheadService.getTypeaheadItemByKey(e).pipe(f(()=>this.loading$.next(!1)))}};i.\u0275fac=function(a){return new(a||i)},i.\u0275cmp=I({type:i,selectors:[["bkd-typeahead"]],inputs:{typeaheadService:"typeaheadService",placeholder:"placeholder",value:"value",additionalHttpParams:"additionalHttpParams"},outputs:{valueChange:"valueChange"},standalone:!0,features:[T,x],decls:11,vars:18,consts:[[1,"input-group"],[1,"input-group-text",3,"id"],[1,"material-icons"],["type","text",1,"form-control",3,"ngModelChange","ngbTypeahead","inputFormatter","resultFormatter","ngModel"],["class","btn btn-link text-decoration-none","type","button",3,"click",4,"ngIf"],["class","spinner-container",4,"ngIf"],["type","button",1,"btn","btn-link","text-decoration-none",3,"click"],[1,"spinner-container"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"visually-hidden"]],template:function(a,t){a&1&&(r(0,"div",0)(1,"span",1)(2,"i",2),c(3,"search"),o()(),r(4,"input",3),s(5,"async"),s(6,"translate"),s(7,"translate"),b("ngModelChange",function(L){return t.modelChange(L)}),o(),y(8,A,3,0,"button",4),o(),y(9,j,4,0,"div",5),s(10,"async")),a&2&&(l(),p("id",t.componentId),l(3),p("ngbTypeahead",t.search)("inputFormatter",t.format)("resultFormatter",t.format)("ngModel",d(5,10,t.selectedItem$)),E("placeholder",d(6,12,t.placeholder))("aria-label",d(7,14,t.placeholder))("aria-describedby",t.componentId),l(4),p("ngIf",t.value),l(),p("ngIf",d(10,16,t.loading$)))},dependencies:[B,V,F,w,N,P,k,K,H],styles:["[_nghost-%COMP%]{display:block;position:relative;background:#fff}.spinner-container[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;right:.75rem;display:flex;align-items:center;z-index:1001}.spinner-border[_ngcontent-%COMP%]{color:#6c757d}input[_ngcontent-%COMP%]{padding-right:2.5em}.input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{position:absolute;right:0;z-index:5}"],changeDetection:0});let n=i;return n})();function G(n,i){return u=>u.pipe(v(i),h(R),g(),C(z(n)))}function R(n){return n.trim().toLowerCase()}export{oe as a};
