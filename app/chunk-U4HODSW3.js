import{a as G}from"./chunk-PSXDSPKS.js";import{a as de,b as fe}from"./chunk-YMJC6QZX.js";import{c as ue,d as he}from"./chunk-24AFRN2G.js";import{d as M,e as X}from"./chunk-AW7CSGKI.js";import{b as ge}from"./chunk-FTDG26ID.js";import{b as H,d as ee}from"./chunk-SOHFFTKU.js";import{u as W}from"./chunk-C56YGDXA.js";import{$ as E,$a as l,Ab as h,Ac as J,Bb as _,Cb as N,Fc as $,Ga as P,Gd as ce,Hd as le,Ia as s,Id as me,Ja as ae,Mc as v,Nc as U,O as z,Sa as u,Sb as R,Ta as f,Tb as oe,Ua as c,Va as m,Vc as B,W as k,Wa as d,Wb as pe,Z as S,bc as O,ca as ie,db as x,dc as Y,ga as re,jb as p,k as L,kb as y,lb as F,m as K,mb as I,n as j,rc as se,ta as C,tb as A,ua as o,va as Q,w as ne,zc as g}from"./chunk-XTHSYQMN.js";function be(e,t){if(e&1&&(m(0),p(1),c(2,"br"),d()),e&2){let n=l();o(),F(" ",n.student.AddressLine2,"")}}function Pe(e,t){if(e&1&&(m(0),u(1,"a",2),p(2),f(),c(3,"br"),d()),e&2){let n=l();o(),x("href","tel:",n.student.PhonePrivate,"",C),o(),F(" ",n.student.PhonePrivate," ")}}function Me(e,t){if(e&1&&(m(0),u(1,"a",2),p(2),f(),c(3,"br"),d()),e&2){let n=l();o(),x("href","tel:",n.student.PhoneMobile,"",C),o(),F(" ",n.student.PhoneMobile," ")}}function Te(e,t){if(e&1&&(u(0,"a",2),p(1),f()),e&2){let n=l();x("href","mailto:",n.email,"",C),o(),F(" ",n.email," ")}}var tt=(()=>{let t=class t{constructor(){this.emailProperty="DisplayEmail"}get postalCode(){return"PostalCode"in this.student?this.student.PostalCode:this.student.Zip}get email(){return this.emailProperty==="Email2"&&"Email2"in this.student?this.student.Email2||null:this.student.DisplayEmail}};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=E({type:t,selectors:[["bkd-student-dossier-address"]],inputs:{student:"student",emailProperty:"emailProperty"},standalone:!0,features:[A],decls:9,vars:7,consts:[[4,"ngIf"],[3,"href",4,"ngIf"],[3,"href"]],template:function(a,r){a&1&&(u(0,"address"),p(1),c(2,"br"),P(3,be,3,1,"ng-container",0),p(4),c(5,"br"),P(6,Pe,4,3,"ng-container",0)(7,Me,4,3,"ng-container",0)(8,Te,2,3,"a",1),f()),a&2&&(o(),F(" ",r.student.AddressLine1,""),o(2),s("ngIf",r.student.AddressLine2),o(),I(" ",r.postalCode||""," ",r.student.Location,""),o(2),s("ngIf",r.student.PhonePrivate),o(),s("ngIf",r.student.PhoneMobile),o(),s("ngIf",r.email))},dependencies:[R],changeDetection:0});let e=t;return e})();var V=(()=>{let t=class t{transform(i){return i?.DisplayEmail||i?.Email||i?.Email2||null}};t.\u0275fac=function(a){return new(a||t)},t.\u0275pipe=ie({name:"bkdPersonEmail",type:t,pure:!0,standalone:!0});let e=t;return e})();function Ee(e,t){if(e&1&&(m(0),p(1),c(2,"br"),d()),e&2){let n=l();o(),y(n.company.apprenticeshipManager==null?null:n.company.apprenticeshipManager.CompanyName)}}function Ae(e,t){if(e&1&&(m(0),p(1),c(2,"br"),d()),e&2){let n=l();o(),y(n.company.apprenticeshipManager==null?null:n.company.apprenticeshipManager.CompanyNameAddition)}}function De(e,t){if(e&1&&(m(0),p(1),c(2,"br"),d()),e&2){let n=l();o(),I(" ",(n.company.apprenticeshipManager==null?null:n.company.apprenticeshipManager.Lastname)||""," ",(n.company.apprenticeshipManager==null?null:n.company.apprenticeshipManager.Firstname)||"","")}}function Le(e,t){if(e&1&&(m(0),p(1),c(2,"br"),d()),e&2){let n=l();o(),y(n.company.apprenticeshipManager==null?null:n.company.apprenticeshipManager.AddressLine1)}}function je(e,t){if(e&1&&(m(0),p(1),c(2,"br"),d()),e&2){let n=l();o(),y(n.company.apprenticeshipManager==null?null:n.company.apprenticeshipManager.AddressLine2)}}function ke(e,t){if(e&1&&(m(0),p(1),c(2,"br"),d()),e&2){let n=l();o(),I("",n.company.apprenticeshipManager==null?null:n.company.apprenticeshipManager.PostalCode," ",n.company.apprenticeshipManager==null?null:n.company.apprenticeshipManager.Location,"")}}function Fe(e,t){if(e&1&&(m(0),u(1,"a",2),p(2),c(3,"br"),f(),d()),e&2){let n=l();o(),x("href","tel:",n.company.apprenticeshipManager==null?null:n.company.apprenticeshipManager.PhoneBusiness,"",C),o(),y(n.company.apprenticeshipManager==null?null:n.company.apprenticeshipManager.PhoneBusiness)}}function Re(e,t){if(e&1&&(m(0),u(1,"a",2),h(2,"bkdPersonEmail"),p(3),h(4,"bkdPersonEmail"),f(),d()),e&2){let n=l();o(),x("href","mailto:",_(2,3,n.company.apprenticeshipManager),"",C),o(2),y(_(4,5,n.company.apprenticeshipManager))}}function Be(e,t){if(e&1&&(u(0,"div",3),p(1),h(2,"translate"),h(3,"addSpace"),c(4,"br"),p(5),h(6,"date"),h(7,"date"),f()),e&2){let n=l();o(),I(" ",_(2,4,"shared.profile.apprenticeship-period"),"",N(3,6,":",":"),""),o(4),I(" ",N(6,9,n.company.apprenticeshipContract.ContractDateFrom,"dd.MM.yyyy"),"\u2013",N(7,12,n.company.apprenticeshipContract.ContractDateTo,"dd.MM.yyyy"),`
`)}}function we(e,t){if(e&1&&(m(0),p(1),c(2,"br"),d()),e&2){let n=l(2);o(),I(" ",n.company.jobTrainer.Lastname||""," ",n.company.jobTrainer.Firstname||"","")}}function Ne(e,t){if(e&1&&(m(0),u(1,"a",2),p(2),c(3,"br"),f(),d()),e&2){let n=l(2);o(),x("href","tel:",n.company.jobTrainer.PhoneBusiness,"",C),o(),y(n.company.jobTrainer.PhoneBusiness)}}function Ue(e,t){if(e&1&&(m(0),u(1,"a",2),p(2),c(3,"br"),f(),d()),e&2){let n=l(2);o(),x("href","tel:",n.company.jobTrainer.PhoneMobile,"",C),o(),y(n.company.jobTrainer.PhoneMobile)}}function ze(e,t){if(e&1&&(m(0),u(1,"a",2),h(2,"bkdPersonEmail"),p(3),h(4,"bkdPersonEmail"),f(),d()),e&2){let n=l(2);o(),x("href","mailto:",_(2,3,n.company.jobTrainer),"",C),o(2),y(_(4,5,n.company.jobTrainer))}}function Oe(e,t){if(e&1&&(u(0,"div",3),p(1),h(2,"translate"),h(3,"addSpace"),u(4,"address"),P(5,we,3,2,"ng-container",0)(6,Ne,4,3,"ng-container",0)(7,Ue,4,3,"ng-container",0)(8,ze,5,7,"ng-container",0),h(9,"bkdPersonEmail"),f()()),e&2){let n=l();o(),I(" ",_(2,6,"shared.profile.job-trainer"),"",N(3,8,":",":")," "),o(4),s("ngIf",n.company.jobTrainer.Lastname||n.company.jobTrainer.Firstname),o(),s("ngIf",n.company.jobTrainer.PhoneBusiness),o(),s("ngIf",n.company.jobTrainer.PhoneMobile),o(),s("ngIf",_(9,11,n.company.jobTrainer))}}var ct=(()=>{let t=class t{constructor(){}};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=E({type:t,selectors:[["bkd-student-dossier-apprenticeship-company"]],inputs:{company:"company"},standalone:!0,features:[A],decls:12,vars:12,consts:[[4,"ngIf"],["class","subentry",4,"ngIf"],[3,"href"],[1,"subentry"]],template:function(a,r){a&1&&(u(0,"address"),P(1,Ee,3,1,"ng-container",0)(2,Ae,3,1,"ng-container",0)(3,De,3,2,"ng-container",0)(4,Le,3,1,"ng-container",0)(5,je,3,1,"ng-container",0)(6,ke,3,2,"ng-container",0)(7,Fe,4,3,"ng-container",0)(8,Re,5,7,"ng-container",0),h(9,"bkdPersonEmail"),f(),P(10,Be,8,15,"div",1)(11,Oe,10,13,"div",1)),a&2&&(o(),s("ngIf",r.company.apprenticeshipManager==null?null:r.company.apprenticeshipManager.CompanyName),o(),s("ngIf",r.company.apprenticeshipManager==null?null:r.company.apprenticeshipManager.CompanyNameAddition),o(),s("ngIf",(r.company.apprenticeshipManager==null?null:r.company.apprenticeshipManager.Lastname)||(r.company.apprenticeshipManager==null?null:r.company.apprenticeshipManager.Firstname)),o(),s("ngIf",r.company.apprenticeshipManager==null?null:r.company.apprenticeshipManager.AddressLine1),o(),s("ngIf",r.company.apprenticeshipManager==null?null:r.company.apprenticeshipManager.AddressLine2),o(),s("ngIf",(r.company.apprenticeshipManager==null?null:r.company.apprenticeshipManager.PostalCode)&&(r.company.apprenticeshipManager==null?null:r.company.apprenticeshipManager.Location)),o(),s("ngIf",r.company.apprenticeshipManager==null?null:r.company.apprenticeshipManager.PhoneBusiness),o(),s("ngIf",_(9,10,r.company.apprenticeshipManager)),o(2),s("ngIf",r.company.apprenticeshipContract.ContractDateFrom),o(),s("ngIf",r.company.jobTrainer))},dependencies:[R,pe,le,ce,he,V],styles:[".subentry[_ngcontent-%COMP%]{padding-bottom:1rem}"],changeDetection:0});let e=t;return e})();function Ye(e,t){if(e&1&&(m(0),p(1),c(2,"br"),d()),e&2){let n=l();o(),y(n.person.AddressLine1)}}function Je(e,t){if(e&1&&(m(0),p(1),c(2,"br"),d()),e&2){let n=l();o(),y(n.person.AddressLine2)}}function $e(e,t){if(e&1&&(m(0),p(1),c(2,"br"),d()),e&2){let n=l();o(),I("",n.person.Zip," ",n.person.Location,"")}}function He(e,t){if(e&1&&(m(0),u(1,"a",1),p(2),c(3,"br"),f(),d()),e&2){let n=l();o(),x("href","tel:",n.person.PhonePrivate,"",C),o(),y(n.person.PhonePrivate)}}function Ge(e,t){if(e&1&&(m(0),u(1,"a",1),p(2),c(3,"br"),f(),d()),e&2){let n=l();o(),x("href","tel:",n.person.PhoneMobile,"",C),o(),y(n.person.PhoneMobile)}}function Ve(e,t){if(e&1&&(m(0),u(1,"a",1),h(2,"bkdPersonEmail"),p(3),h(4,"bkdPersonEmail"),f(),d()),e&2){let n=l();o(),x("href","mailto:",_(2,3,n.person),"",C),o(2),y(_(4,5,n.person))}}var ut=(()=>{let t=class t{constructor(){}};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=E({type:t,selectors:[["bkd-student-dossier-legal-representative"]],inputs:{person:"person"},standalone:!0,features:[A],decls:10,vars:10,consts:[[4,"ngIf"],[3,"href"]],template:function(a,r){a&1&&(u(0,"address"),p(1),c(2,"br"),P(3,Ye,3,1,"ng-container",0)(4,Je,3,1,"ng-container",0)(5,$e,3,2,"ng-container",0)(6,He,4,3,"ng-container",0)(7,Ge,4,3,"ng-container",0)(8,Ve,5,7,"ng-container",0),h(9,"bkdPersonEmail"),f()),a&2&&(o(),I(" ",r.person.LastName," ",r.person.FirstName,""),o(2),s("ngIf",r.person.AddressLine1),o(),s("ngIf",r.person.AddressLine2),o(),s("ngIf",r.person.Zip&&r.person.Zip),o(),s("ngIf",r.person.PhonePrivate),o(),s("ngIf",r.person.PhoneMobile),o(),s("ngIf",_(9,8,r.person)))},dependencies:[R,V],changeDetection:0});let e=t;return e})();function te(e,t){let n=M(e),i=M(t),a=n.getTime()-i.getTime();return a<0?-1:a>0?1:a}function ye(e,t){let n=M(e),i=M(t);return n.getFullYear()-i.getFullYear()}function ve(e,t){let n=M(e),i=M(t),a=te(n,i),r=Math.abs(ye(n,i));n.setFullYear(1584),i.setFullYear(1584);let b=te(n,i)===-a,T=a*(r-+b);return T===0?0:T}var Ze=18;function Ce(e){return ve(new Date,e.Birthdate||new Date)>=Ze}var xe=$({Email:v(g),Email2:v(g),PhoneBusiness:v(g),CompanyName:U(g),CompanyNameAddition:U(g),Firstname:v(g),Lastname:v(g),AddressLine1:U(g),AddressLine2:U(g),PostalCode:v(g),Location:v(g),Id:J});var Se=(()=>{let t=class t extends H{constructor(i,a){super(i,a,xe,"ApprenticeshipManagers")}};t.\u0275fac=function(a){return new(a||t)(S(Y),S(B))},t.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var _e=$({Email:v(g),Email2:v(g),PhoneBusiness:v(g),PhoneMobile:v(g),Firstname:v(g),Lastname:v(g),Id:J});var Ie=(()=>{let t=class t extends H{constructor(i,a){super(i,a,_e,"JobTrainers")}};t.\u0275fac=function(a){return new(a||t)(S(Y),S(B))},t.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Vt=(()=>{let t=class t{constructor(i,a,r,b,T,w){this.studentService=i,this.personsService=a,this.apprenticeshipManagersService=r,this.jobTrainersService=b,this.loadingService=T,this.dropDownItemsService=w,this.loading$=this.loadingService.loading$}getProfile(i){return this.loadingService.load(j([this.loadStudent(i),this.loadLegalRepresentatives(i),this.loadApprenticeshipContracts(i)]).pipe(z(X(this.mapToProfile.bind(this)))))}getMyProfile(){return this.loadingService.load(this.personsService.getMyself({context:new O().set(G,{disableErrorHandlingForStatus:[403]})}).pipe(z(i=>j([L(i),this.loadLegalRepresentatives(i.Id),this.loadApprenticeshipContracts(i.Id),this.loadStayPermitValue(i.StayPermit)]))).pipe(z(X(this.mapToProfile.bind(this))),ne(W)))}loadStudent(i){return this.studentService.get(i,{context:new O().set(G,{disableErrorHandlingForStatus:[404]})}).pipe(ee())}loadLegalRepresentatives(i){return this.studentService.getLegalRepresentatives(i)}loadApprenticeshipContracts(i){return this.studentService.getCurrentApprenticeshipContracts(i,{context:new O().set(G,{disableErrorHandlingForStatus:[404]})}).pipe(ee([]))}loadStayPermitValue(i){return this.dropDownItemsService.getStayPermits().pipe(K(a=>a.find(r=>r.Key===i)?.Value||null))}mapToProfile(i,a,r,b=null){return i?(a=this.getRelevantLegalRepresentatives(i,a),j([this.loadLegalRepresentativPersons(a),this.loadJobTrainers(r),this.loadApprenticeshipManagers(r)]).pipe(K(([T,w,Z])=>this.createProfile(i,b,a,T,r,Z,w)))):L(null)}loadLegalRepresentativPersons(i){return i.length===0?L([]):this.personsService.getListForIds(i.map(a=>a.RepresentativeId))}loadJobTrainers(i){let a=i.map(r=>r.JobTrainer).filter(r=>typeof r=="number");return a.length===0?L([]):j(a.map(r=>this.jobTrainersService.get(r)))}loadApprenticeshipManagers(i){let a=i.map(r=>r.ApprenticeshipManagerId);return a.length===0?L([]):j(a.map(r=>this.apprenticeshipManagersService.get(r)))}createProfile(i,a,r,b,T,w,Z){return{student:i,stayPermitValue:a||void 0,legalRepresentativePersons:r.map(q=>this.findPerson(q.RepresentativeId,b)).filter(W),apprenticeshipCompanies:T.map(q=>this.createApprenticeshipCompany(q,w,Z))}}getRelevantLegalRepresentatives(i,a){let r=Ce(i);return a.filter(b=>!r||b.RepresentativeAfterMajority)}createApprenticeshipCompany(i,a,r){return{apprenticeshipContract:i,jobTrainer:this.findPerson(i.JobTrainer,r),apprenticeshipManager:this.findPerson(i.ApprenticeshipManagerId,a)}}findPerson(i,a){return i&&a.find(r=>r.Id===i)||null}};t.\u0275fac=function(a){return new(a||t)(S(ue),S(fe),S(Se),S(Ie),S(ge),S(de))},t.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Xt=(()=>{let t=class t{constructor(i,a){this.settings=i,this.storageService=a,this.avatarStyles={}}ngOnChanges(i){i.studentId&&(this.avatarStyles=this.buildAvatarStyles(this.studentId))}buildAvatarStyles(i){return{"background-image":[this.buildAvatarUrl(i),this.fallbackAvatarUrl].map(a=>`url(${a})`).join(", ")}}buildAvatarUrl(i){let a=this.storageService.getAccessToken()||"";return`${this.settings.apiUrl}/Files/personPictures/${i}?token=${a}`}get fallbackAvatarUrl(){return`${this.settings.scriptsAndAssetsPath}/assets/images/avatar-placeholder.png`}};t.\u0275fac=function(a){return new(a||t)(Q(B),Q(me))},t.\u0275cmp=E({type:t,selectors:[["bkd-avatar"]],inputs:{studentId:"studentId",link:"link",linkParams:"linkParams"},standalone:!0,features:[re,A],decls:1,vars:5,consts:[[1,"avatar",3,"routerLink","queryParams","ngStyle"]],template:function(a,r){a&1&&c(0,"a",0),a&2&&(ae("disabled",!r.link),s("routerLink",r.link)("queryParams",r.linkParams)("ngStyle",r.avatarStyles))},dependencies:[se,oe],styles:["[_nghost-%COMP%]{display:flex}.small[_nghost-%COMP%]{width:40px;min-width:40px;height:50px}.medium[_nghost-%COMP%]{width:58px;min-width:58px;height:75px}.large[_nghost-%COMP%]{width:100px;min-width:100px;height:130px}.avatar[_ngcontent-%COMP%]{flex:1;border:1px solid rgba(0,0,0,.25);background-repeat:no-repeat;background-size:cover;background-position:center}a.disabled[_ngcontent-%COMP%]{pointer-events:none;cursor:default}"]});let e=t;return e})();export{Vt as a,tt as b,ct as c,ut as d,Xt as e};
