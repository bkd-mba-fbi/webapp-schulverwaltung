import{c as g}from"./chunk-DQAQYQ7K.js";import{a as E}from"./chunk-LYDHS67M.js";import{e as d,g as p,s as h}from"./chunk-ZXUJZ6KS.js";import{L as u,ja as f,o as a,oa as o,r as c,ze as m}from"./chunk-GP622B77.js";var b=(()=>{let e=class e{constructor(){this.toastService=o(E),this.translate=o(m)}notifyHttpError(r){switch(r.status){case 401:case 403:return;case 404:return this.notifyNotFound();case 0:case 503:case 504:return this.notifyUnavailable();case 409:return this.notifyConflict(r);default:return this.notifyServerError()}}notifyNoAccess(){this.notifyMessage("noaccess")}notifyNotFound(){this.notifyMessage("notfound")}notifyUnavailable(){this.notifyMessage("unavailable")}notifyServerError(){this.notifyMessage("server")}notifyConflict(r){let n=this.translate.instant("global.rest-errors.conflict-message"),t=this.parseConflictIssues(r);this.toastService.error(t.length>0?t.join(`
`):n,this.translate.instant("global.rest-errors.conflict-title"))}notifyMessage(r){this.toastService.error(this.translate.instant(`global.rest-errors.${r}-message`),this.translate.instant(`global.rest-errors.${r}-title`))}parseConflictIssues(r){return Array.isArray(r.error?.Issues)?r.error.Issues.map(n=>n?.Message).filter(g):[]}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"});let s=e;return s})();var y=new d(()=>({disableErrorHandling:!1,disableErrorHandlingForStatus:[],disableErrorHandlingExceptForStatus:[]}));function k(){return(s,e)=>{let i=s.context.get(y);return e(s).pipe(u(S(i)))}}function S(s){let e=o(h),i=o(b);return t=>{if(t instanceof p&&!(s.disableErrorHandling||r(s,t.status)||n(s,t.status)))switch(t.status){case 401:return i.notifyNoAccess(),e.navigate(["/unauthenticated"]),a;case 403:return i.notifyNoAccess(),e.navigate(["/dashboard"]),a;default:return i.notifyHttpError(t),a}return c(()=>t)};function r(t,l){return!t.disableErrorHandlingForStatus||t.disableErrorHandlingForStatus.length===0?!1:t.disableErrorHandlingForStatus.includes(l)}function n(t,l){return!t.disableErrorHandlingExceptForStatus||t.disableErrorHandlingExceptForStatus.length===0?!1:!t.disableErrorHandlingExceptForStatus.includes(l)}}export{b as a,y as b,k as c};
