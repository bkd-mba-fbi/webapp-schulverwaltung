"use strict";(self.webpackChunkwebapp_schulverwaltung=self.webpackChunkwebapp_schulverwaltung||[]).push([[201],{1861:(F,I,o)=>{o.d(I,{V:()=>m});var c=o(177),y=o(9417),D=o(1324),d=o(3955),C=o(1195),g=o(4412),O=o(6354),P=o(3294),M=o(5558),b=o(980),E=o(152),K=o(5964),N=o(9728),r=o(4438);function _(v,B){if(1&v){const s=r.RV6();r.j41(0,"button",6),r.bIt("click",function(f){r.eBV(s);const H=r.XpG();return r.Njj(H.modelChange(f))}),r.j41(1,"i",2),r.EFF(2,"clear"),r.k0s()()}}function W(v,B){1&v&&(r.j41(0,"div",7)(1,"div",8)(2,"span",9),r.EFF(3,"Loading..."),r.k0s()()())}let m=(()=>{class v{constructor(){this.selectedItem$=new g.t(null),this.placeholder="shared.typeahead.default-placeholder",this.valueChange=this.selectedItem$.pipe((0,O.T)(s=>s?s.Key:null),(0,P.F)()),this.componentId=(0,C.A)("bkd-typeahead-"),this.loading$=new g.t(!1),this.search=s=>s.pipe(function R(v,B){return s=>s.pipe((0,E.B)(B),(0,O.T)($),(0,P.F)(),(0,K.p)((0,N.NT)(v)))}(3,300),(0,M.n)(this.fetchItems.bind(this)))}ngOnChanges(s){s.value&&s.value.currentValue&&s.value.currentValue!==this.selectedItemKey&&this.fetchItem(s.value.currentValue).subscribe(U=>{this.modelChange(U)})}format(s){return s.Value}modelChange(s){this.selectedItem$.next(s instanceof Object?s:null)}get selectedItemKey(){return this.selectedItem$.value?this.selectedItem$.value.Key:null}fetchItems(s){return this.loading$.next(!0),this.typeaheadService.getTypeaheadItems(s,this.additionalHttpParams).pipe((0,b.j)(()=>this.loading$.next(!1)))}fetchItem(s){return this.loading$.next(!0),this.typeaheadService.getTypeaheadItemByKey(s).pipe((0,b.j)(()=>this.loading$.next(!1)))}static#t=this.\u0275fac=function(U){return new(U||v)};static#e=this.\u0275cmp=r.VBU({type:v,selectors:[["bkd-typeahead"]],inputs:{typeaheadService:"typeaheadService",placeholder:"placeholder",value:"value",additionalHttpParams:"additionalHttpParams"},outputs:{valueChange:"valueChange"},standalone:!0,features:[r.OA$,r.aNF],decls:11,vars:18,consts:[[1,"input-group"],[1,"input-group-text",3,"id"],[1,"material-icons"],["type","text",1,"form-control",3,"ngModelChange","ngbTypeahead","inputFormatter","resultFormatter","ngModel"],["class","btn btn-link text-decoration-none","type","button",3,"click",4,"ngIf"],["class","spinner-container",4,"ngIf"],["type","button",1,"btn","btn-link","text-decoration-none",3,"click"],[1,"spinner-container"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"visually-hidden"]],template:function(U,f){1&U&&(r.j41(0,"div",0)(1,"span",1)(2,"i",2),r.EFF(3,"search"),r.k0s()(),r.j41(4,"input",3),r.nI1(5,"async"),r.nI1(6,"translate"),r.nI1(7,"translate"),r.bIt("ngModelChange",function(j){return f.modelChange(j)}),r.k0s(),r.DNE(8,_,3,0,"button",4),r.k0s(),r.DNE(9,W,4,0,"div",5),r.nI1(10,"async")),2&U&&(r.R7$(),r.Y8G("id",f.componentId),r.R7$(3),r.Y8G("ngbTypeahead",f.search)("inputFormatter",f.format)("resultFormatter",f.format)("ngModel",r.bMT(5,10,f.selectedItem$)),r.BMQ("placeholder",r.bMT(6,12,f.placeholder))("aria-label",r.bMT(7,14,f.placeholder))("aria-describedby",f.componentId),r.R7$(4),r.Y8G("ngIf",f.value),r.R7$(),r.Y8G("ngIf",r.bMT(10,16,f.loading$)))},dependencies:[D.$n,y.YN,y.me,y.BC,y.vS,c.bT,c.Jj,d.h,d.D9],styles:["[_nghost-%COMP%]{display:block;position:relative;background:#fff}.spinner-container[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;right:.75rem;display:flex;align-items:center;z-index:1001}.spinner-border[_ngcontent-%COMP%]{color:#6c757d}input[_ngcontent-%COMP%]{padding-right:2.5em}.input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{position:absolute;right:0;z-index:5}"],changeDetection:0})}return v})();function $(v){return v.trim().toLowerCase()}},2612:(F,I,o)=>{o.d(I,{e:()=>_});var c=o(5783),y=o(983),D=o(7673),d=o(5558),C=o(6354),g=o(2809);const O=c.NW({Id:c.ai,Designation:c.Yj,Number:c.Yj});var P=o(785),M=o(5437),b=o(6952),E=o(4438),K=o(1626),N=o(3955),r=o(5889);let _=(()=>{class W extends b.G{constructor(S,m,R,$){super(S,m,O,"EducationalEvents"),this.translate=R,this.toastService=$,this.typeaheadCodec=c.NW((0,M.U)(this.codec.props,["Id","Designation","Number"]))}getTypeaheadItems(S){return this.http.get(`${this.baseUrl}/CurrentSemester`,{params:{fields:["Id","Designation","Number"].join(","),"filter.Designation":`~*${S}*`}}).pipe((0,d.n)((0,P.k$)(this.typeaheadCodec)),(0,C.T)(m=>m.map(R=>({Key:R.Id,Value:`${R.Designation} (${R.Number})`}))))}getTypeaheadItemByKey(S){return this.http.get(`${this.baseUrl}/CurrentSemester`,{params:{fields:["Id","Designation","Number"].join(","),"filter.Id":`=${S}`}}).pipe((0,d.n)((0,P.k$)(this.typeaheadCodec)),(0,d.n)(m=>0===m.length?(this.toastService.error(this.translate.instant("global.rest-errors.notfound-message"),this.translate.instant("global.rest-errors.notfound-title")),y.w):(0,D.of)({Key:m[0].Id,Value:`${m[0].Designation} (${m[0].Number})`})))}static#t=this.\u0275fac=function(m){return new(m||W)(E.KVO(K.Qq),E.KVO(g.yy),E.KVO(N.c$),E.KVO(r.f))};static#e=this.\u0275prov=E.jDH({token:W,factory:W.\u0275fac,providedIn:"root"})}return W})()},9483:(F,I,o)=>{o.d(I,{r:()=>P});var c=o(5558),y=o(2809),D=o(838),d=o(785),C=o(3220),g=o(4438),O=o(1626);let P=(()=>{class M extends C.X{constructor(E,K){super(E,K,D.i,"StudyClasses","Number")}getActive(){return this.http.get(`${this.baseUrl}/?filter.IsActive==true`,{headers:{"X-Role-Restriction":"ClassTeacherRole"}}).pipe((0,c.n)((0,d.k$)(D.i)))}getActiveFormativeAssessments(){return this.http.get(`${this.baseUrl}/FormativeAssessments?filter.IsActive==true`,{headers:{"X-Role-Restriction":"ClassTeacherRole"}}).pipe((0,c.n)((0,d.k$)(D.i)))}static#t=this.\u0275fac=function(K){return new(K||M)(g.KVO(O.Qq),g.KVO(y.yy))};static#e=this.\u0275prov=g.jDH({token:M,factory:M.\u0275fac,providedIn:"root"})}return M})()},1369:(F,I,o)=>{o.d(I,{G:()=>y});var c=o(4903);function y(d){return Object.keys(d).reduce((C,g)=>{const O=function D(d){return d?d instanceof Date?(0,c.GP)(d,"yyyy-MM-dd"):String(d):null}(d[g]);return O?{...C,[g]:O}:C},{})}},6820:(F,I,o)=>{o.d(I,{DP:()=>dt,eO:()=>ht});var c=o(4438),y=o(7673),D=o(3726),d=o(1397),C=o(6354),g=o(8141),O=o(5964),P=o(3236),M=o(9974),b=o(4360),E=o(8750),N=o(1584);function W(t,e,n,i){const l=window&&!!window.document&&window.document.documentElement;let a=l&&e?window:n;if(t&&(a=t&&l&&"string"==typeof t?function x(t,e,n){return(n?window.document:e).querySelector(t)}(t,n.nativeElement,i):t,!a))throw new Error("ngx-infinite-scroll {resolveContainerElement()}: selector for");return a}function S(t){return t&&!t.firstChange}const R={clientHeight:"clientHeight",offsetHeight:"offsetHeight",scrollHeight:"scrollHeight",pageYOffset:"pageYOffset",offsetTop:"offsetTop",scrollTop:"scrollTop",top:"top"},$={clientHeight:"clientWidth",offsetHeight:"offsetWidth",scrollHeight:"scrollWidth",pageYOffset:"pageXOffset",offsetTop:"offsetLeft",scrollTop:"scrollLeft",top:"left"};class v{constructor(e=!0){this.vertical=e,this.propsMap=e?R:$}clientHeightKey(){return this.propsMap.clientHeight}offsetHeightKey(){return this.propsMap.offsetHeight}scrollHeightKey(){return this.propsMap.scrollHeight}pageYOffsetKey(){return this.propsMap.pageYOffset}offsetTopKey(){return this.propsMap.offsetTop}scrollTopKey(){return this.propsMap.scrollTop}topKey(){return this.propsMap.top}}function f(t){return["Window","global"].some(n=>Object.prototype.toString.call(t).includes(n))}function H(t,e){return t?e.document.documentElement:null}function j(t,e){const n=function k({container:t,isWindow:e,axis:n}){const{offsetHeightKey:i,clientHeightKey:l}=Y(n);return z(t,e,i,l)}(e);return e.isWindow?function J(t,e,n){const{axis:i,container:l,isWindow:a}=n,{offsetHeightKey:u,clientHeightKey:T}=Y(i),h=t+G(H(a,l),i,a),p=z(e.nativeElement,a,u,T),w=function q(t,e,n){const i=e.topKey();if(t.getBoundingClientRect)return t.getBoundingClientRect()[i]+G(t,e,n)}(e.nativeElement,i,a)+p;return{height:t,scrolled:h,totalToScroll:w,isWindow:a}}(n,t,e):function Z(t,e,n){const{axis:i,container:l}=n;return{height:t,scrolled:l[i.scrollTopKey()],totalToScroll:l[i.scrollHeightKey()],isWindow:!1}}(n,0,e)}function Y(t){return{offsetHeightKey:t.offsetHeightKey(),clientHeightKey:t.clientHeightKey()}}function z(t,e,n,i){if(isNaN(t[n])){const l=H(e,t);return l?l[i]:0}return t[n]}function G(t,e,n){const i=e.pageYOffsetKey(),l=e.scrollTopKey(),a=e.offsetTopKey();return isNaN(window.pageYOffset)?H(n,t)[l]:t.ownerDocument?t.ownerDocument.defaultView[i]:t[a]}function tt(t,e={down:0,up:0},n){let i,l;if(t.totalToScroll<=0)return!1;const a=t.isWindow?t.scrolled:t.height+t.scrolled;return n?(i=(t.totalToScroll-a)/t.totalToScroll,l=(e?.down?e.down:0)/10):(i=t.scrolled/(t.scrolled+(t.totalToScroll-a)),l=(e?.up?e.up:0)/10),i<=l}class rt{constructor(e){this.lastScrollPosition=0,this.lastTotalToScroll=0,this.totalToScroll=0,this.triggered={down:0,up:0},Object.assign(this,e)}updateScrollPosition(e){return this.lastScrollPosition=e}updateTotalToScroll(e){this.lastTotalToScroll!==e&&(this.lastTotalToScroll=this.totalToScroll,this.totalToScroll=e)}updateScroll(e,n){this.updateScrollPosition(e),this.updateTotalToScroll(n)}updateTriggeredFlag(e,n){n?this.triggered.down=e:this.triggered.up=e}isTriggeredScroll(e,n){return n?this.triggered.down===e:this.triggered.up===e}}function lt(t){const{scrollContainer:e,scrollWindow:n,element:i,fromRoot:l}=t,a=function s({windowElement:t,axis:e}){return function U(t,e){const n=t.isWindow||e&&!e.nativeElement?e:e.nativeElement;return{...t,container:n}}({axis:e,isWindow:f(t)},t)}({axis:new v(!t.horizontal),windowElement:W(e,n,i,l)}),u=new rt({totalToScroll:j(i,a).totalToScroll}),h={up:t.upDistance,down:t.downDistance};return function st(t){let e=(0,D.R)(t.container,"scroll");return t.throttle&&(e=e.pipe(function r(t,e=P.E,n){const i=(0,N.O)(t,e);return function K(t,e){return(0,M.N)((n,i)=>{const{leading:l=!0,trailing:a=!1}=e??{};let u=!1,T=null,h=null,p=!1;const w=()=>{h?.unsubscribe(),h=null,a&&(Q(),p&&i.complete())},V=()=>{h=null,p&&i.complete()},X=A=>h=(0,E.Tg)(t(A)).subscribe((0,b._)(i,w,V)),Q=()=>{if(u){u=!1;const A=T;T=null,i.next(A),!p&&X(A)}};n.subscribe((0,b._)(i,A=>{u=!0,T=A,(!h||h.closed)&&(l?Q():X(A))},()=>{p=!0,(!(a&&u&&h)||h.closed)&&i.complete()}))})}(()=>i,n)}(t.throttle,void 0,{leading:!0,trailing:!0}))),e}({container:a.container,throttle:t.throttle}).pipe((0,d.Z)(()=>(0,y.of)(j(i,a))),(0,C.T)(p=>function at(t,e,n){const{scrollDown:i,fire:l}=function nt(t,e,n){const i=function et(t,e){return t<e.scrolled}(t,e);return{fire:tt(e,n,i),scrollDown:i}}(t,e,n);return{scrollDown:i,fire:l,stats:e}}(u.lastScrollPosition,p,h)),(0,g.M)(({stats:p})=>u.updateScroll(p.scrolled,p.totalToScroll)),(0,O.p)(({fire:p,scrollDown:w,stats:{totalToScroll:V}})=>function B(t,e,n){return!!(t&&e||!n&&e)}(t.alwaysCallback,p,u.isTriggeredScroll(V,w))),(0,g.M)(({scrollDown:p,stats:{totalToScroll:w}})=>{u.updateTriggeredFlag(w,p)}),(0,C.T)(ct))}const L={DOWN:"[NGX_ISE] DOWN",UP:"[NGX_ISE] UP"};function ct(t){const{scrollDown:e,stats:{scrolled:n}}=t;return{type:e?L.DOWN:L.UP,payload:{currentScrollPosition:n}}}let dt=(()=>{class t{constructor(n,i){this.element=n,this.zone=i,this.scrolled=new c.bkB,this.scrolledUp=new c.bkB,this.infiniteScrollDistance=2,this.infiniteScrollUpDistance=1.5,this.infiniteScrollThrottle=150,this.infiniteScrollDisabled=!1,this.infiniteScrollContainer=null,this.scrollWindow=!0,this.immediateCheck=!1,this.horizontal=!1,this.alwaysCallback=!1,this.fromRoot=!1}ngAfterViewInit(){this.infiniteScrollDisabled||this.setup()}ngOnChanges({infiniteScrollContainer:n,infiniteScrollDisabled:i,infiniteScrollDistance:l}){const a=S(n),u=S(i),T=S(l),h=!u&&!this.infiniteScrollDisabled||u&&!i.currentValue||T;(a||u||T)&&(this.destroyScroller(),h&&this.setup())}setup(){(function m(){return typeof window<"u"})()&&this.zone.runOutsideAngular(()=>{this.disposeScroller=lt({fromRoot:this.fromRoot,alwaysCallback:this.alwaysCallback,disable:this.infiniteScrollDisabled,downDistance:this.infiniteScrollDistance,element:this.element,horizontal:this.horizontal,scrollContainer:this.infiniteScrollContainer,scrollWindow:this.scrollWindow,throttle:this.infiniteScrollThrottle,upDistance:this.infiniteScrollUpDistance}).subscribe(n=>this.handleOnScroll(n))})}handleOnScroll({type:n,payload:i}){const l=n===L.DOWN?this.scrolled:this.scrolledUp;(function ut(t){return t.observed??t.observers.length>0})(l)&&this.zone.run(()=>l.emit(i))}ngOnDestroy(){this.destroyScroller()}destroyScroller(){this.disposeScroller&&this.disposeScroller.unsubscribe()}static#t=this.\u0275fac=function(i){return new(i||t)(c.rXU(c.aKT),c.rXU(c.SKi))};static#e=this.\u0275dir=c.FsC({type:t,selectors:[["","infiniteScroll",""],["","infinite-scroll",""],["","data-infinite-scroll",""]],inputs:{infiniteScrollDistance:"infiniteScrollDistance",infiniteScrollUpDistance:"infiniteScrollUpDistance",infiniteScrollThrottle:"infiniteScrollThrottle",infiniteScrollDisabled:"infiniteScrollDisabled",infiniteScrollContainer:"infiniteScrollContainer",scrollWindow:"scrollWindow",immediateCheck:"immediateCheck",horizontal:"horizontal",alwaysCallback:"alwaysCallback",fromRoot:"fromRoot"},outputs:{scrolled:"scrolled",scrolledUp:"scrolledUp"},features:[c.OA$]})}return t})(),ht=(()=>{class t{static#t=this.\u0275fac=function(i){return new(i||t)};static#e=this.\u0275mod=c.$C({type:t});static#n=this.\u0275inj=c.G2t({})}return t})()}}]);