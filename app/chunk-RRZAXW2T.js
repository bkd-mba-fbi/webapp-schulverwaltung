import{a as ie}from"./chunk-D2H555EG.js";import{d as V,g as y,h as se,k as x,n as c,s as ne,t as oe,v as g,x as ae}from"./chunk-DVBPCEX4.js";import{B as w,Ba as D,Ca as v,Eb as Q,F as B,Fb as U,H as b,Ma as O,O as T,Sb as Z,Tb as Y,_ as L,a as M,aa as p,b as N,ba as q,cd as W,ec as G,fc as J,gd as R,h as l,ha as d,hc as X,ic as ee,jc as te,lb as S,ma as o,mb as K,o as P,pa as F,pc as A,qc as C,ub as H,xa as u,ya as j}from"./chunk-CHBP6U4G.js";var ce=["dialog"],he=["*"],me=(()=>{class s{constructor(){this._ngbConfig=o(ie),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0,this.role="dialog"}get animation(){return this._animation??this._ngbConfig.animation}set animation(e){this._animation=e}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275prov=d({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),fe=["animation","backdropClass"],pe=(()=>{class s{constructor(){this._nativeElement=o(O).nativeElement,this._zone=o(v),this._injector=o(u),this._cdRef=o(W)}ngOnInit(){S({mixedReadWrite:()=>c(this._zone,this._nativeElement,(e,t)=>{t&&x(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})},{injector:this._injector})}hide(){return c(this._zone,this._nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}updateOptions(e){fe.forEach(t=>{y(e[t])&&(this[t]=e[t])}),this._cdRef.markForCheck()}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275cmp=H({type:s,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(t,i){t&2&&(C("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),A("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,i){},encapsulation:2})}}return s})(),E=class{update(a){}close(a){}dismiss(a){}},z=class{update(a){this._windowCmptRef.instance.updateOptions(a),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._backdropCmptRef.instance.updateOptions(a)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(p(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(p(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(a,e,t,i){this._windowCmptRef=a,this._contentRef=e,this._backdropCmptRef=t,this._beforeDismiss=i,this._closed=new l,this._dismissed=new l,this._hidden=new l,a.instance.dismissEvent.subscribe(n=>{this.dismiss(n)}),this.result=new Promise((n,r)=>{this._resolve=n,this._reject=r}),this.result.then(null,()=>{})}close(a){this._windowCmptRef&&(this._closed.next(a),this._resolve(a),this._removeModalElements())}_dismiss(a){this._dismissed.next(a),this._reject(a),this._removeModalElements()}dismiss(a){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(a);else{let e=this._beforeDismiss();se(e)?e.then(t=>{t!==!1&&this._dismiss(a)},()=>{}):e!==!1&&this._dismiss(a)}}_removeModalElements(){let a=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():P(void 0);a.subscribe(()=>{let{nativeElement:t}=this._windowCmptRef.location;t.parentNode.removeChild(t),this._windowCmptRef.destroy(),this._contentRef?.viewRef?.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:t}=this._backdropCmptRef.location;t.parentNode.removeChild(t),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),b(a,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},$=(function(s){return s[s.BACKDROP_CLICK=0]="BACKDROP_CLICK",s[s.ESC=1]="ESC",s})($||{}),ue=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","role","scrollable","size","windowClass","modalDialogClass"],_e=(()=>{class s{constructor(){this._document=o(j),this._elRef=o(O),this._zone=o(v),this._injector=o(u),this._cdRef=o(W),this._closed$=new l,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.role="dialog",this.dismissEvent=new D,this.shown=new l,this.hidden=new l}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":V(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,S({mixedReadWrite:()=>this._show()},{injector:this._injector})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:e}=this._elRef,t={animation:this.animation,runningTransition:"stop"},i=c(this._zone,e,()=>e.classList.remove("show"),t),n=c(this._zone,this._dialogEl.nativeElement,()=>{},t),r=b(i,n);return r.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),r}updateOptions(e){ue.forEach(t=>{y(e[t])&&(this[t]=e[t])}),this._cdRef.markForCheck()}_show(){let e={animation:this.animation,runningTransition:"continue"},t=c(this._zone,this._elRef.nativeElement,(n,r)=>{r&&x(n),n.classList.add("show")},e),i=c(this._zone,this._dialogEl.nativeElement,()=>{},e);b(t,i).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{w(e,"keydown").pipe(p(this._closed$),B(i=>i.key==="Escape")).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss($.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let t=!1;w(this._dialogEl.nativeElement,"mousedown").pipe(p(this._closed$),q(()=>t=!1),L(()=>w(e,"mouseup").pipe(p(this._closed$),T(1))),B(({target:i})=>e===i)).subscribe(()=>{t=!0}),w(e,"click").pipe(p(this._closed$)).subscribe(({target:i})=>{e===i&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!t&&this._zone.run(()=>this.dismiss($.BACKDROP_CLICK))),t=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){let t=e.querySelector("[ngbAutofocus]"),i=ne(e)[0];(t||i||e).focus()}}_restoreFocus(){let e=this._document.body,t=this._elWithFocus,i;t&&t.focus&&e.contains(t)?i=t:i=e,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&c(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275cmp=H({type:s,selectors:[["ngb-modal-window"]],viewQuery:function(t,i){if(t&1&&X(ce,7),t&2){let n;ee(n=te())&&(i._dialogEl=n.first)}},hostAttrs:["tabindex","-1"],hostVars:8,hostBindings:function(t,i){t&2&&(U("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy)("role",i.role),C("modal d-block"+(i.windowClass?" "+i.windowClass:"")),A("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",role:"role",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:he,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(t,i){t&1&&(G(),Z(0,"div",1,0)(2,"div",2),J(3),Y()()),t&2&&C("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+i.fullscreenClass+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2})}}return s})(),we=(()=>{class s{constructor(){this._applicationRef=o(Q),this._injector=o(u),this._environmentInjector=o(F),this._document=o(j),this._scrollBar=o(ae),this._activeWindowCmptHasChanged=new l,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new D;let e=o(v);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let t=this._windowCmpts[this._windowCmpts.length-1];oe(e,t.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(t.location.nativeElement)}})}_restoreScrollBar(){let e=this._scrollBarRestoreFn;e&&(this._scrollBarRestoreFn=null,e())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(e,t,i){let n=i.container instanceof HTMLElement?i.container:y(i.container)?this._document.querySelector(i.container):this._document.body;if(!n)throw new Error(`The specified modal container "${i.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let r=new E;e=i.injector||e;let k=e.get(F,null)||this._environmentInjector,h=this._getContentRef(e,k,t,r,i),m=i.backdrop!==!1?this._attachBackdrop(n):void 0,I=this._attachWindowComponent(n,h.nodes),f=new z(I,h,m,i.beforeDismiss);return this._registerModalRef(f),this._registerWindowCmpt(I),f.hidden.pipe(T(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),r.close=_=>{f.close(_)},r.dismiss=_=>{f.dismiss(_)},r.update=_=>{f.update(_)},f.update(i),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),m&&m.instance&&m.changeDetectorRef.detectChanges(),I.changeDetectorRef.detectChanges(),f}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(t=>t.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e){let t=R(pe,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(t.hostView),e.appendChild(t.location.nativeElement),t}_attachWindowComponent(e,t){let i=R(_e,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:t});return this._applicationRef.attachView(i.hostView),e.appendChild(i.location.nativeElement),i}_getContentRef(e,t,i,n,r){return i?i instanceof K?this._createFromTemplateRef(i,n):V(i)?this._createFromString(i):this._createFromComponent(e,t,i,n,r):new g([])}_createFromTemplateRef(e,t){let i={$implicit:t,close(r){t.close(r)},dismiss(r){t.dismiss(r)}},n=e.createEmbeddedView(i);return this._applicationRef.attachView(n),new g([n.rootNodes],n)}_createFromString(e){let t=this._document.createTextNode(`${e}`);return new g([[t]])}_createFromComponent(e,t,i,n,r){let k=u.create({providers:[{provide:E,useValue:n}],parent:e}),h=R(i,{environmentInjector:t,elementInjector:k}),m=h.location.nativeElement;return r.scrollable&&m.classList.add("component-host-scrollable"),this._applicationRef.attachView(h.hostView),new g([[m]],h.hostView,h)}_setAriaHidden(e){let t=e.parentElement;t&&e!==this._document.body&&(Array.from(t.children).forEach(i=>{i!==e&&i.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(t))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,t)=>{e?t.setAttribute("aria-hidden",e):t.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){let t=()=>{let i=this._modalRefs.indexOf(e);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(t,t)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{let t=this._windowCmpts.indexOf(e);t>-1&&(this._windowCmpts.splice(t,1),this._activeWindowCmptHasChanged.next())})}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275prov=d({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),le=(()=>{class s{constructor(){this._injector=o(u),this._modalStack=o(we),this._config=o(me)}open(e,t={}){let i=M(N(M({},this._config),{animation:this._config.animation}),t);return this._modalStack.open(this._injector,e,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275prov=d({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var de=(()=>{class s{constructor(){}get inIframe(){return window.parent!==window}get window(){return this.inIframe?window.parent:null}get document(){return this.window?.document.documentElement??null}querySelector(e){return this.window?.document?.querySelector("bkd-portal")?.shadowRoot?.querySelector(e)??null}getIframeElement(){return this.querySelector("bkd-content")?.shadowRoot?.querySelector("iframe")??null}getIframeTop(){return this.getIframeElement()?.offsetTop??0}getIFrameBottom(){let e=this.getIframeElement();return e?e.offsetTop+e.offsetHeight:0}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275prov=d({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var xe=(()=>{class s{constructor(){this.modal=o(le),this.portal=o(de)}open(...e){let t=this.modal.open(...e);return this.applyPortalOffsetAndMaxHeight(t),this.disablePortalScrolling(t),t}get activeInstances(){return this.modal.activeInstances}dismissAll(...e){return this.modal.dismissAll(...e)}hasOpenModals(...e){return this.modal.hasOpenModals(...e)}applyPortalOffsetAndMaxHeight(e){let t=this.getModalWindowElement(e);if(!t){console.warn("Trying to apply portal offset to <ngb-modal-window>, but element is not present!");return}this.portal.window&&(t.style.top=`${this.getModalIframeOffset()}px`,t.style.maxHeight=`${this.getModalHeight()}px`)}disablePortalScrolling(e){if(this.portal.window&&this.portal.document){let t=this.portal.window.innerWidth-this.portal.document.clientWidth;this.portal.document.style.paddingRight=`${t}px`,this.portal.document.style.overflow="hidden"}e.hidden.subscribe(()=>{this.portal.document&&(this.portal.document.style.paddingRight="0px",this.portal.document.style.overflow="auto")})}getModalWindowElement(e){return e._windowCmptRef?.instance?._elRef?.nativeElement??null}getModalIframeOffset(){return Math.max(this.getViewportTop()-this.portal.getIframeTop(),0)}getModalTop(){return Math.min(this.getViewportTop(),this.portal.getIframeTop())}getModalBottom(){return Math.min(this.getViewportBottom(),this.portal.getIFrameBottom())}getModalHeight(){return this.getModalBottom()-this.getModalTop()}getViewportTop(){return this.portal.window?.scrollY??0}getViewportBottom(){return this.getViewportTop()+this.getViewportHeight()}getViewportHeight(){return this.portal.window?.innerHeight??0}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275prov=d({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();export{E as a,de as b,xe as c};
