import{a as W}from"./chunk-EM4LGRAI.js";import{c as X}from"./chunk-GKIJ2K7S.js";import{m as O,n as P,o as z,p as A,q}from"./chunk-BTSV5M6I.js";import{P as B}from"./chunk-C3LYZ6LV.js";import{$b as _,B as x,Cb as V,Hb as F,Ib as f,Kb as j,Ob as b,Rb as E,S as I,Sb as M,Tb as a,U as T,Ub as c,Y as y,Zb as g,aa as D,ac as l,ea as L,gb as U,j as k,ja as S,jb as r,l as v,mc as p,oc as N,pa as R,v as d,wa as m,wb as $,xa as u}from"./chunk-6PRZEEKG.js";var h="default",ie=(()=>{class t{constructor(){this.action$=new k,this.loadingCounts$=x(this.action$.pipe(y((e,{action:n,context:i})=>{switch(n){case"increment":return e[i]=(e[i]||0)+1,e;case"decrement":return e[i]=Math.max(0,(e[i]||0)-1),e;default:return e}},{}),D({})),{connector:()=>new v(1)}),this.loading$=this.loading(),this.loadingCountsSub=this.loadingCounts$.connect()}ngOnDestroy(){this.loadingCountsSub.unsubscribe()}loading(e=h){return this.loadingCounts$.pipe(d(n=>n[e]),d(H),I())}load(e,n=h){let i=typeof n=="string"?n:n.context||h,o=typeof n=="object"&&n.stopOnFirstValue||!1,C=this.decrementLoadingCount(i),w=!0;function Z(){w&&(C(),w=!1)}return e.pipe(X(this.incrementLoadingCount(i)),o?L(Z):T(C))}incrementLoadingCount(e){return()=>this.action$.next({action:"increment",context:e})}decrementLoadingCount(e){return()=>this.action$.next({action:"decrement",context:e})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function H(t){return(t||0)!==0}var J=(t,s)=>s.id;function K(t,s){if(t&1){let e=g();a(0,"a",2),_("click",function(i){m(e);let o=l();return i.preventDefault(),u(o.reports.length>0&&o.openReport(o.reports[0]))}),a(1,"i",3),p(2,"description"),c()()}if(t&2){let e=l();j("disabled",e.disableIfUnavailable&&e.reports.length===0),f("href",e.reports.length>0?e.reports[0].url:"",U)}}function Q(t,s){if(t&1){let e=g();a(0,"button",7),_("click",function(){let i=m(e).$implicit,o=l(2);return u(o.openReport(i))}),p(1),c()}if(t&2){let e=s.$implicit;r(),N(" ",e.title," ")}}function Y(t,s){if(t&1&&(a(0,"div",1)(1,"a",4)(2,"i",3),p(3,"description"),c()(),a(4,"div",5),E(5,Q,2,1,"button",6,J),c()()),t&2){let e=l();r(),f("id",e.dropdownId),r(3),F("aria-labelledby",e.dropdownId),r(),M(e.reports)}}var de=(()=>{class t{constructor(){this.reports=[],this.disableIfUnavailable=!1,this.storageService=R(W),this.dropdownId=B("reports-link-dropdown")}openReport(e){window.open(this.addTokenToUrl(e),"_blank")}addTokenToUrl(e){let n=new URL(e.url);return n.searchParams.set("token",this.storageService.getAccessToken()??""),n}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=$({type:t,selectors:[["bkd-reports-link"]],inputs:{reports:"reports",disableIfUnavailable:"disableIfUnavailable"},decls:2,vars:2,consts:[["target","_blank",1,"btn","btn-primary","btn-icon",3,"href","disabled"],["ngbDropdown","",1,"d-inline-block"],["target","_blank",1,"btn","btn-primary","btn-icon",3,"click","href"],[1,"material-icons"],["ngbDropdownToggle","",1,"btn","btn-primary","btn-icon","d-flex","align-items-center",3,"id"],["ngbDropdownMenu",""],["ngbDropdownItem",""],["ngbDropdownItem","",3,"click"]],template:function(n,i){n&1&&V(0,K,3,3,"a",0)(1,Y,7,2,"div",1),n&2&&(b(i.reports.length===1||i.reports.length===0&&i.disableIfUnavailable?0:-1),r(),b(i.reports.length>1?1:-1))},dependencies:[q,A,z,P,O],styles:["a[_ngcontent-%COMP%]{text-decoration:none;color:#fff}"]})}}return t})();export{ie as a,de as b};
