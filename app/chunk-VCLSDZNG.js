import{f as ce,g as ue}from"./chunk-SBIVIORM.js";import{a as pe}from"./chunk-UMMIG55K.js";import{a as me}from"./chunk-O7D7N5QA.js";import{g as q,h as Y}from"./chunk-2QS7YZBA.js";import{a as se}from"./chunk-HY2G6OQH.js";import{b as $}from"./chunk-CXKEEE6P.js";import{d as le}from"./chunk-UFMGFWOV.js";import{a as z,b as Z}from"./chunk-NY2OCKWG.js";import{b as de}from"./chunk-DQAQYQ7K.js";import{f as O,h as N,t as re,z as L}from"./chunk-DXI7W5HI.js";import{Ad as U,Cb as y,Ec as u,Fc as _,Fd as j,Gc as k,Ib as ee,Ka as M,Kb as te,Ob as s,Od as x,Pd as R,Rc as X,Tb as l,Ub as c,Vb as d,ac as p,ba as G,dd as ne,ec as g,gb as C,gd as oe,ja as D,jb as o,mc as r,nc as P,oc as v,pa as f,pc as S,q as F,v as E,va as Q,vc as ie,w as B,wb as I,wc as w,xc as h,xe as ae,zb as W,zd as m}from"./chunk-D6CA3SC5.js";function Ae(t,a){if(t&1&&(r(0),d(1,"br")),t&2){let e=p();v(" ",e.student().AddressLine2,"")}}function De(t,a){if(t&1&&(l(0,"a",0),r(1),c(),d(2,"br")),t&2){let e=p();g("href","tel:",e.student().PhonePrivate,"",C),o(),v(" ",e.student().PhonePrivate," ")}}function Le(t,a){if(t&1&&(l(0,"a",0),r(1),c(),d(2,"br")),t&2){let e=p();g("href","tel:",e.student().PhoneMobile,"",C),o(),v(" ",e.student().PhoneMobile," ")}}function Te(t,a){if(t&1&&(l(0,"a",0),r(1),c()),t&2){let e=p();g("href","mailto:",e.email(),"",C),o(),v(" ",e.email()," ")}}var it=(()=>{class t{constructor(){this.student=M.required(),this.emailProperty=M("DisplayEmail"),this.postalCode=X(()=>{let e=this.student();return"PostalCode"in e?e.PostalCode:e.Zip}),this.email=X(()=>{let e=this.student();return this.emailProperty()==="Email2"&&"Email2"in e?e.Email2||null:e.DisplayEmail})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=I({type:t,selectors:[["bkd-student-dossier-address"]],inputs:{student:[1,"student"],emailProperty:[1,"emailProperty"]},decls:9,vars:7,consts:[[3,"href"]],template:function(i,n){i&1&&(l(0,"address"),r(1),d(2,"br"),y(3,Ae,2,1),r(4),d(5,"br"),y(6,De,3,3)(7,Le,3,3)(8,Te,2,3,"a",0),c()),i&2&&(o(),v(" ",n.student().AddressLine1,""),o(2),s(n.student().AddressLine2?3:-1),o(),S(" ",n.postalCode()||""," ",n.student().Location,""),o(2),s(n.student().PhonePrivate?6:-1),o(),s(n.student().PhoneMobile?7:-1),o(),s(n.email()?8:-1))},styles:["address[_ngcontent-%COMP%]{padding-left:1rem}"],changeDetection:0})}}return t})();var J=(()=>{class t{transform(e){return e?.DisplayEmail||e?.Email||e?.Email2||null}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275pipe=W({name:"bkdPersonEmail",type:t,pure:!0})}}return t})();function Ee(t,a){if(t&1&&(r(0),d(1,"br")),t&2){p(2);let e=h(0);v(" ",e.CompanyName,"")}}function Me(t,a){if(t&1&&(r(0),d(1,"br")),t&2){p(2);let e=h(0);v(" ",e.CompanyNameAddition,"")}}function ke(t,a){if(t&1&&(r(0),d(1,"br")),t&2){p(2);let e=h(0);S(" ",e.Lastname||""," ",e.Firstname||"","")}}function Re(t,a){if(t&1&&(r(0),d(1,"br")),t&2){p(2);let e=h(0);v(" ",e.AddressLine1,"")}}function Fe(t,a){if(t&1&&(r(0),d(1,"br")),t&2){p(2);let e=h(0);v(" ",e.AddressLine2,"")}}function Be(t,a){if(t&1&&(r(0),d(1,"br")),t&2){p(2);let e=h(0);S(" ",e.PostalCode," ",e.Location,"")}}function we(t,a){if(t&1&&(l(0,"a",1),r(1),d(2,"br"),c()),t&2){p(2);let e=h(0);g("href","tel:",e.PhoneBusiness,"",C),o(),P(e.PhoneBusiness)}}function Oe(t,a){if(t&1&&(l(0,"a",1),u(1,"bkdPersonEmail"),r(2),u(3,"bkdPersonEmail"),c()),t&2){p(2);let e=h(0);g("href","mailto:",_(1,3,e),"",C),o(2),P(_(3,5,e))}}function Ne(t,a){if(t&1&&(l(0,"address"),y(1,Ee,2,1)(2,Me,2,1)(3,ke,2,2)(4,Re,2,1)(5,Fe,2,1)(6,Be,2,2)(7,we,3,3,"a",1)(8,Oe,4,7,"a",1),u(9,"bkdPersonEmail"),c()),t&2){p();let e=h(0);o(),s(e.CompanyName?1:-1),o(),s(e.CompanyNameAddition?2:-1),o(),s(e.Lastname||e.Firstname?3:-1),o(),s(e.AddressLine1?4:-1),o(),s(e.AddressLine2?5:-1),o(),s(e.PostalCode&&e.Location?6:-1),o(),s(e.PhoneBusiness?7:-1),o(),s(_(9,8,e)?8:-1)}}function Ue(t,a){if(t&1&&(l(0,"div",0),r(1),u(2,"translate"),u(3,"addSpace"),d(4,"br"),r(5),u(6,"date"),u(7,"date"),c()),t&2){p();let e=h(1);o(),S(" ",_(2,4,"shared.profile.apprenticeship-period"),"",k(3,6,":",":"),""),o(4),S(" ",k(6,9,e.ContractDateFrom,"dd.MM.yyyy"),"\u2013",k(7,12,e.ContractDateTo,"dd.MM.yyyy")," ")}}function je(t,a){if(t&1&&(r(0),d(1,"br")),t&2){p(2);let e=h(2);S(" ",e.Lastname||""," ",e.Firstname||"","")}}function ze(t,a){if(t&1&&(l(0,"a",1),r(1),d(2,"br"),c()),t&2){p(2);let e=h(2);g("href","tel:",e.PhoneBusiness,"",C),o(),P(e.PhoneBusiness)}}function Ye(t,a){if(t&1&&(l(0,"a",1),r(1),d(2,"br"),c()),t&2){p(2);let e=h(2);g("href","tel:",e.PhoneMobile,"",C),o(),P(e.PhoneMobile)}}function $e(t,a){if(t&1&&(l(0,"a",1),u(1,"bkdPersonEmail"),r(2),u(3,"bkdPersonEmail"),c()),t&2){p(2);let e=h(2);g("href","mailto:",_(1,3,e),"",C),o(2),P(_(3,5,e))}}function Je(t,a){if(t&1&&(l(0,"div",0),r(1),u(2,"translate"),u(3,"addSpace"),l(4,"address"),y(5,je,2,2)(6,ze,3,3,"a",1)(7,Ye,3,3,"a",1)(8,$e,4,7,"a",1),u(9,"bkdPersonEmail"),c()()),t&2){p();let e=h(2);o(),S(" ",_(2,6,"shared.profile.job-trainer"),"",k(3,8,":",":")," "),o(4),s(e.Lastname||e.Firstname?5:-1),o(),s(e.PhoneBusiness?6:-1),o(),s(e.PhoneMobile?7:-1),o(),s(_(9,11,e)?8:-1)}}var mt=(()=>{class t{constructor(){this.apprenticeship=M.required()}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=I({type:t,selectors:[["bkd-student-dossier-apprenticeship"]],inputs:{apprenticeship:[1,"apprenticeship"]},decls:6,vars:6,consts:[[1,"subentry"],[3,"href"]],template:function(i,n){if(i&1&&(ie(0)(1)(2),y(3,Ne,10,10,"address")(4,Ue,8,15,"div",0)(5,Je,10,13,"div",0)),i&2){let b=w(n.apprenticeship().apprenticeshipManager);o();let T=w(n.apprenticeship().apprenticeshipContract);o();let H=w(n.apprenticeship().jobTrainer);o(),s(b?3:-1),o(),s(T.ContractDateFrom?4:-1),o(),s(H?5:-1)}},dependencies:[oe,ae,ue,J],styles:[".subentry[_ngcontent-%COMP%]{padding-bottom:1rem}"],changeDetection:0})}}return t})();function He(t,a){if(t&1&&(r(0),d(1,"br")),t&2){let e=p();v(" ",e.person.AddressLine1,"")}}function Ge(t,a){if(t&1&&(r(0),d(1,"br")),t&2){let e=p();v(" ",e.person.AddressLine2,"")}}function Xe(t,a){if(t&1&&(r(0),d(1,"br")),t&2){let e=p();S(" ",e.person.Zip," ",e.person.Location,"")}}function qe(t,a){if(t&1&&(l(0,"a",0),r(1),d(2,"br"),c()),t&2){let e=p();g("href","tel:",e.person.PhonePrivate,"",C),o(),P(e.person.PhonePrivate)}}function Ze(t,a){if(t&1&&(l(0,"a",0),r(1),d(2,"br"),c()),t&2){let e=p();g("href","tel:",e.person.PhoneMobile,"",C),o(),P(e.person.PhoneMobile)}}function Ve(t,a){if(t&1&&(l(0,"a",0),u(1,"bkdPersonEmail"),r(2),u(3,"bkdPersonEmail"),c()),t&2){let e=p();g("href","mailto:",_(1,3,e.person),"",C),o(2),P(_(3,5,e.person))}}var ht=(()=>{class t{constructor(){}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=I({type:t,selectors:[["bkd-student-dossier-legal-representative"]],inputs:{person:"person"},decls:10,vars:10,consts:[[3,"href"]],template:function(i,n){i&1&&(l(0,"address"),r(1),d(2,"br"),y(3,He,2,1)(4,Ge,2,1)(5,Xe,2,2)(6,qe,3,3,"a",0)(7,Ze,3,3,"a",0)(8,Ve,4,7,"a",0),u(9,"bkdPersonEmail"),c()),i&2&&(o(),S(" ",n.person.LastName," ",n.person.FirstName,""),o(2),s(n.person.AddressLine1?3:-1),o(),s(n.person.AddressLine2?4:-1),o(),s(n.person.Zip&&n.person.Zip?5:-1),o(),s(n.person.PhonePrivate?6:-1),o(),s(n.person.PhoneMobile?7:-1),o(),s(_(9,8,n.person)?8:-1))},dependencies:[J],encapsulation:2,changeDetection:0})}}return t})();var fe=j({Email:x(m),Email2:x(m),PhoneBusiness:x(m),CompanyName:R(m),CompanyNameAddition:R(m),Firstname:x(m),Lastname:x(m),AddressLine1:R(m),AddressLine2:R(m),PostalCode:x(m),Location:x(m),Id:U});var he=(()=>{class t extends z{constructor(){let e=f(N),i=f(L);super(e,i,fe,"ApprenticeshipManagers")}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var xe=j({Email:x(m),Email2:x(m),PhoneBusiness:x(m),PhoneMobile:x(m),Firstname:x(m),Lastname:x(m),Id:U});var Ce=(()=>{class t extends z{constructor(){let e=f(N),i=f(L);super(e,i,xe,"JobTrainers")}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function V(t,a){let e=+q(t)-+q(a);return e<0?-1:e>0?1:e}function ge(t,a,e){let[i,n]=Y(e?.in,t,a);return i.getFullYear()-n.getFullYear()}function ve(t,a,e){let[i,n]=Y(e?.in,t,a),b=V(i,n),T=Math.abs(ge(i,n));i.setFullYear(1584),n.setFullYear(1584);let H=V(i,n)===-b,K=b*(T-+H);return K===0?0:K}var Qe=18;function _e(t){return ve(new Date,t.Birthdate||new Date)>=Qe}var Se="dossier-myself",be="dossier-student",Pe="dossier-legal-reps",ye="dossier-apprenticeships",Ie="dossier-stay-permit",ai=(()=>{class t{constructor(){this.studentService=f(ce),this.personsService=f(le),this.apprenticeshipManagersService=f(he),this.jobTrainersService=f(Ce),this.dropDownItemsService=f(pe),this.loadingService=f(me),this.loadingStudent$=this.loadingService.loading(be),this.loadingMyself$=this.loadingService.loading(Se),this.loadingLegalRepresentatives$=this.loadingService.loading(Pe),this.loadingApprenticeships$=this.loadingService.loading(ye),this.loadingStayPermit$=this.loadingService.loading(Ie)}getStudent(e){return this.loadingService.load(this.studentService.get(e,{context:new O().set($,{disableErrorHandlingForStatus:[404]})}).pipe(Z()),be)}getMyself(){return this.loadingService.load(this.personsService.getMyself({context:new O().set($,{disableErrorHandlingForStatus:[403]})}),Se)}getLegalRepresentatives(e){return this.loadingService.load(this.loadLegalRepresentatives(e).pipe(G(i=>this.loadLegalRepresentativePersons(i).pipe(E(n=>i.map(b=>this.findPerson(b.RepresentativeId,n)).filter(de))))),Pe)}getApprenticeships(e){return this.loadingService.load(this.loadApprenticeshipContracts(e).pipe(G(i=>B([this.loadApprenticeshipManagers(i),this.loadJobTrainers(i)]).pipe(E(([n,b])=>i.map(T=>this.createApprenticeshipCompany(T,n,b)))))),ye)}getStayPermitValue(e){return this.loadingService.load(this.dropDownItemsService.getStayPermits().pipe(E(i=>i.find(n=>n.Key===e)?.Value||null)),Ie)}loadLegalRepresentatives(e){return this.studentService.getLegalRepresentatives(e.Id).pipe(E(i=>{let n=_e(e);return i.filter(b=>!n||b.RepresentativeAfterMajority)}))}loadLegalRepresentativePersons(e){return e.length===0?F([]):this.personsService.getListForIds(e.map(i=>i.RepresentativeId))}loadApprenticeshipContracts(e){return this.studentService.getCurrentApprenticeshipContracts(e,{context:new O().set($,{disableErrorHandlingForStatus:[404]})}).pipe(Z([]))}loadJobTrainers(e){let i=e.map(n=>n.JobTrainer).filter(n=>typeof n=="number");return i.length===0?F([]):B(i.map(n=>this.jobTrainersService.get(n)))}loadApprenticeshipManagers(e){let i=e.map(n=>n.ApprenticeshipManagerId);return i.length===0?F([]):B(i.map(n=>this.apprenticeshipManagersService.get(n)))}createApprenticeshipCompany(e,i,n){return{apprenticeshipContract:e,jobTrainer:this.findPerson(e.JobTrainer,n),apprenticeshipManager:this.findPerson(e.ApprenticeshipManagerId,i)}}findPerson(e,i){return e&&i.find(n=>n.Id===e)||null}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var hi=(()=>{class t{constructor(){this.settings=f(L),this.storageService=f(se),this.avatarStyles={}}ngOnChanges(e){e.studentId&&(this.avatarStyles=this.buildAvatarStyles(this.studentId))}buildAvatarStyles(e){return{"background-image":[this.buildAvatarUrl(e),this.fallbackAvatarUrl].map(i=>`url(${i})`).join(", ")}}buildAvatarUrl(e){let i=this.storageService.getAccessToken()||"";return`${this.settings.apiUrl}/Files/personPictures/${e}?token=${i}`}get fallbackAvatarUrl(){return`${this.settings.scriptsAndAssetsPath}/assets/images/avatar-placeholder.png`}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=I({type:t,selectors:[["bkd-avatar"]],inputs:{studentId:"studentId",link:"link",linkParams:"linkParams"},features:[Q],decls:1,vars:5,consts:[[1,"avatar",3,"routerLink","queryParams","ngStyle"]],template:function(i,n){i&1&&d(0,"a",0),i&2&&(te("disabled",!n.link),ee("routerLink",n.link)("queryParams",n.linkParams)("ngStyle",n.avatarStyles))},dependencies:[re,ne],styles:["[_nghost-%COMP%]{display:flex}.small[_nghost-%COMP%]{width:40px;min-width:40px;height:50px}.medium[_nghost-%COMP%]{width:58px;min-width:58px;height:75px}.large[_nghost-%COMP%]{width:100px;min-width:100px;height:130px}.avatar[_ngcontent-%COMP%]{flex:1;border:1px solid rgba(0,0,0,.25);background-repeat:no-repeat;background-size:cover;background-position:center}a.disabled[_ngcontent-%COMP%]{pointer-events:none;cursor:default}"]})}}return t})();export{ai as a,it as b,mt as c,ht as d,hi as e};
