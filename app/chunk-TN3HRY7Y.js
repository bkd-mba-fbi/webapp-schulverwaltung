import{a as W}from"./chunk-56A7FKFV.js";import{c as X}from"./chunk-YNODG5RP.js";import{m as O,n as P,o as z,p as A,q}from"./chunk-HVLHLZKP.js";import{P as B}from"./chunk-ZXUJZ6KS.js";import{B as I,Eb as F,Gb as f,Ib as b,Lb as j,Mb as E,Nb as g,Ob as s,Pb as c,S as T,U as y,Ub as h,Wb as _,Xb as l,Y as D,aa as S,ab as R,db as a,ea as U,gc as M,ic as p,j as v,ja as $,kc as N,l as x,oa as L,ob as V,ua as m,v as d,va as u}from"./chunk-GP622B77.js";var C="default",oe=(()=>{let n=class n{constructor(){this.action$=new v,this.loadingCounts$=I(this.action$.pipe(D((e,{action:t,context:o})=>{switch(t){case"increment":return e[o]=(e[o]||0)+1,e;case"decrement":return e[o]=Math.max(0,(e[o]||0)-1),e;default:return e}},{}),S({})),{connector:()=>new x(1)}),this.loading$=this.loading(),this.loadingCountsSub=this.loadingCounts$.connect()}ngOnDestroy(){this.loadingCountsSub.unsubscribe()}loading(e=C){return this.loadingCounts$.pipe(d(t=>t[e]),d(J),T())}load(e,t=C){let o=typeof t=="string"?t:t.context||C,Z=typeof t=="object"&&t.stopOnFirstValue||!1,w=this.decrementLoadingCount(o),k=!0;function G(){k&&(w(),k=!1)}return e.pipe(X(this.incrementLoadingCount(o)),Z?U(G):y(w))}incrementLoadingCount(e){return()=>this.action$.next({action:"increment",context:e})}decrementLoadingCount(e){return()=>this.action$.next({action:"decrement",context:e})}};n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"});let i=n;return i})();function J(i){return(i||0)!==0}var K=(i,n)=>n.id;function Q(i,n){if(i&1){let r=h();s(0,"a",2),_("click",function(t){m(r);let o=l();return t.preventDefault(),u(o.reports.length>0&&o.openReport(o.reports[0]))}),s(1,"i",3),p(2,"description"),c()()}if(i&2){let r=l();M("disabled",r.disableIfUnavailable&&r.reports.length===0),g("href",r.reports.length>0?r.reports[0].url:"",R)}}function Y(i,n){if(i&1){let r=h();s(0,"button",7),_("click",function(){let t=m(r).$implicit,o=l(2);return u(o.openReport(t))}),p(1),c()}if(i&2){let r=n.$implicit;a(),N(" ",r.title," ")}}function ee(i,n){if(i&1&&(s(0,"div",1)(1,"a",4)(2,"i",3),p(3,"description"),c()(),s(4,"div",5),j(5,Y,2,1,"button",6,K),c()()),i&2){let r=l();a(),g("id",r.dropdownId),a(3),F("aria-labelledby",r.dropdownId),a(),E(r.reports)}}var me=(()=>{let n=class n{constructor(){this.reports=[],this.disableIfUnavailable=!1,this.storageService=L(W),this.dropdownId=B("reports-link-dropdown")}openReport(e){window.open(this.addTokenToUrl(e),"_blank")}addTokenToUrl(e){let t=new URL(e.url);return t.searchParams.set("token",this.storageService.getAccessToken()??""),t}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=V({type:n,selectors:[["bkd-reports-link"]],inputs:{reports:"reports",disableIfUnavailable:"disableIfUnavailable"},decls:2,vars:2,consts:[["target","_blank",1,"btn","btn-primary","btn-icon",3,"href","disabled"],["ngbDropdown","",1,"d-inline-block"],["target","_blank",1,"btn","btn-primary","btn-icon",3,"click","href"],[1,"material-icons"],["ngbDropdownToggle","",1,"btn","btn-primary","btn-icon","d-flex","align-items-center",3,"id"],["ngbDropdownMenu",""],["ngbDropdownItem",""],["ngbDropdownItem","",3,"click"]],template:function(t,o){t&1&&(f(0,Q,3,3,"a",0),f(1,ee,7,2,"div",1)),t&2&&(b(o.reports.length===1||o.reports.length===0&&o.disableIfUnavailable?0:-1),a(),b(o.reports.length>1?1:-1))},dependencies:[q,A,z,P,O],styles:["a[_ngcontent-%COMP%]{text-decoration:none;color:#fff}"]});let i=n;return i})();export{oe as a,me as b};
